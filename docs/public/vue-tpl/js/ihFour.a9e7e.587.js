(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ihFour.a9e7e"],{"0082":function(e,t,n){var r=new Uint8Array([0,255,255,255]),a={pickingSelectedColor:null,pickingHighlightColor:r,pickingThreshold:1,pickingActive:!1};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,t={};if(void 0!==e.pickingSelectedColor)if(null===e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{var n=[e.pickingSelectedColor[0],e.pickingSelectedColor[1],e.pickingSelectedColor[2]];t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=n}return void 0!==e.pickingHighlightColor&&(t.picking_uHighlightColor=e.pickingHighlightColor),void 0!==e.pickingThreshold&&(t.picking_uThreshold=e.pickingThreshold),void 0!==e.pickingActive&&(t.picking_uActive=e.pickingActive?1:0),t}var o="uniform vec3 picking_uSelectedColor;\nuniform float picking_uThreshold;\nuniform bool picking_uSelectedColorValid;\n\nout vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    picking_uSelectedColorValid &&\n    abs(vertexColor.r - picking_uSelectedColor.r) < picking_uThreshold &&\n    abs(vertexColor.g - picking_uSelectedColor.g) < picking_uThreshold &&\n    abs(vertexColor.b - picking_uSelectedColor.b) < picking_uThreshold;\n}\n\nvoid picking_setPickingColor(vec3 pickingColor) {\n  picking_vRGBcolor_Aselected.a =\n    float(isVertexPicked(pickingColor));\n  picking_vRGBcolor_Aselected.rgb = pickingColor * COLOR_SCALE;\n}\n",c="uniform bool picking_uActive;\nuniform vec3 picking_uSelectedColor;\nuniform vec4 picking_uHighlightColor;\n\nin vec4 picking_vRGBcolor_Aselected;\n\nconst float COLOR_SCALE = 1. / 255.;\nvec4 picking_filterHighlightColor(vec4 color) {\n  bool selected = bool(picking_vRGBcolor_Aselected.a);\n\n  if (selected) {\n    vec4 highLightColor = picking_uHighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);\n    float highLightRatio = highLightAlpha / blendedAlpha;\n\n    vec3 blendedRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(blendedRGB, blendedAlpha);\n  } else {\n    return color;\n  }\n}\nvec4 picking_filterPickingColor(vec4 color) {\n  vec3 pickingColor = picking_vRGBcolor_Aselected.rgb;\n  if (picking_uActive && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return picking_uActive ? vec4(pickingColor, 1.0) : color;\n}\nvec4 picking_filterColor(vec4 color) {\n  vec4 highightColor = picking_filterHighlightColor(color);\n  return picking_filterPickingColor(highightColor);\n}\n\n";t["a"]={name:"picking",vs:o,fs:c,getUniforms:i}},"167a":function(e,t,n){n.d(t,"a",(function(){return o}));var r=n("ade3"),a=n("0b1c"),i=n("4ea4");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.header,n=void 0===t?"Uniforms":t,o=e.program,u=e.uniforms,s=e.undefinedOnly,l=void 0!==s&&s;Object(a["a"])(o);var f=".*_.*",d=".*Matrix",h=o._uniformSetters,b={},v=Object.keys(h).sort(),g=0,m=!0,O=!1,y=void 0;try{for(var p,j=v[Symbol.iterator]();!(m=(p=j.next()).done);m=!0){var _=p.value;_.match(f)||_.match(d)||c({table:b,header:n,uniforms:u,uniformName:_,undefinedOnly:l})&&g++}}catch(N){O=!0,y=N}finally{try{m||null==j["return"]||j["return"]()}finally{if(O)throw y}}var A=!0,E=!1,x=void 0;try{for(var k,T=v[Symbol.iterator]();!(A=(k=T.next()).done);A=!0){var w=k.value;w.match(d)&&c({table:b,header:n,uniforms:u,uniformName:w,undefinedOnly:l})&&g++}}catch(N){E=!0,x=N}finally{try{A||null==T["return"]||T["return"]()}finally{if(E)throw x}}var L=!0,S=!1,F=void 0;try{for(var I,P=v[Symbol.iterator]();!(L=(I=P.next()).done);L=!0){var D=I.value;b[D]||c({table:b,header:n,uniforms:u,uniformName:D,undefinedOnly:l})&&g++}}catch(N){S=!0,F=N}finally{try{L||null==P["return"]||P["return"]()}finally{if(S)throw F}}var R=0,B={};if(!l)for(var C in u){var M=u[C];b[C]||(R++,B[C]=Object(r["a"])({Type:"NOT USED: ".concat(M)},n,Object(i["a"])(M)))}return{table:b,count:g,unusedTable:B,unusedCount:R}}function c(e){var t,n=e.table,a=e.header,o=e.uniforms,c=e.uniformName,s=e.undefinedOnly,l=o[c],f=u(l);return(!s||!f)&&(n[c]=(t={},Object(r["a"])(t,a,f?Object(i["a"])(l):"N/A"),Object(r["a"])(t,"Uniform Type",f?l:"NOT PROVIDED"),t),!0)}function u(e){return void 0!==e&&null!==e}},"1f9d":function(e,t,n){n.d(t,"a",(function(){return g}));var r=n("a34a"),a=n.n(r),i=n("1da1"),o=n("d4ec"),c=n("bee2"),u=n("99de"),s=n("7e84"),l=n("257e"),f=n("262e"),d=n("97a3"),h=n("4945"),b=n("e7ea"),v=[34069,34070,34071,34072,34073,34074],g=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(o["a"])(this,t),Object(h["b"])(e),n=Object(u["a"])(this,Object(s["a"])(t).call(this,e,Object.assign({},r,{target:34067}))),n.initialize(r),Object.seal(Object(l["a"])(n)),n}return Object(f["a"])(t,e),Object(c["a"])(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.mipmaps,r=void 0===n||n,a=t.parameters,i=void 0===a?{}:a;this.opts=t,this.setCubeMapImageData(t).then((function(){e.loaded=!0,r&&e.generateMipmap(t),e.setParameters(i)}))}},{key:"subImage",value:function(e){var t=e.face,n=e.data,r=e.x,a=void 0===r?0:r,i=e.y,o=void 0===i?0:i,c=e.mipmapLevel,u=void 0===c?0:c;return this._subImage({target:t,data:n,x:a,y:o,mipmapLevel:u})}},{key:"setCubeMapImageData",value:function(){var e=Object(i["a"])(a.a.mark((function e(t){var n,r,i,o,c,u,s,l,f,d,h,g,m,O=this;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.width,r=t.height,i=t.pixels,o=t.data,c=t.border,u=void 0===c?0:c,s=t.format,l=void 0===s?6408:s,f=t.type,d=void 0===f?5121:f,h=this.gl,g=i||o,e.next=5,Promise.all(v.map((function(e){var t=g[e];return Promise.all(Array.isArray(t)?t:[t])})));case 5:m=e.sent,this.bind(),v.forEach((function(e,t){m[t].length>1&&!1!==O.opts.mipmaps&&b["a"].warn("".concat(O.id," has mipmap and multiple LODs."))(),m[t].forEach((function(t,a){n&&r?h.texImage2D(e,a,l,n,r,u,l,d,t):h.texImage2D(e,a,l,l,d,t)}))})),this.unbind();case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"setImageDataForFace",value:function(e){var t=this,n=e.face,r=e.width,a=e.height,i=e.pixels,o=e.data,c=e.border,u=void 0===c?0:c,s=e.format,l=void 0===s?6408:s,f=e.type,d=void 0===f?5121:f,h=this.gl,b=i||o;return this.bind(),b instanceof Promise?b.then((function(r){return t.setImageDataForFace(Object.assign({},e,{face:n,data:r,pixels:r}))})):this.width||this.height?h.texImage2D(n,0,l,r,a,u,l,d,b):h.texImage2D(n,0,l,l,d,b),this}}]),t}(d["a"]);g.FACES=v},"2e19":function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return v})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return O}));var r,a,i,o=n("2909"),c=n("ade3"),u=n("cbbc"),s=(r={},Object(c["a"])(r,3042,!1),Object(c["a"])(r,32773,new Float32Array([0,0,0,0])),Object(c["a"])(r,32777,32774),Object(c["a"])(r,34877,32774),Object(c["a"])(r,32969,1),Object(c["a"])(r,32968,0),Object(c["a"])(r,32971,1),Object(c["a"])(r,32970,0),Object(c["a"])(r,3106,new Float32Array([0,0,0,0])),Object(c["a"])(r,3107,[!0,!0,!0,!0]),Object(c["a"])(r,2884,!1),Object(c["a"])(r,2885,1029),Object(c["a"])(r,2929,!1),Object(c["a"])(r,2931,1),Object(c["a"])(r,2932,513),Object(c["a"])(r,2928,new Float32Array([0,1])),Object(c["a"])(r,2930,!0),Object(c["a"])(r,3024,!0),Object(c["a"])(r,36006,null),Object(c["a"])(r,2886,2305),Object(c["a"])(r,33170,4352),Object(c["a"])(r,2849,1),Object(c["a"])(r,32823,!1),Object(c["a"])(r,32824,0),Object(c["a"])(r,10752,0),Object(c["a"])(r,32938,1),Object(c["a"])(r,32939,!1),Object(c["a"])(r,3089,!1),Object(c["a"])(r,3088,new Int32Array([0,0,1024,1024])),Object(c["a"])(r,2960,!1),Object(c["a"])(r,2961,0),Object(c["a"])(r,2968,4294967295),Object(c["a"])(r,36005,4294967295),Object(c["a"])(r,2962,519),Object(c["a"])(r,2967,0),Object(c["a"])(r,2963,4294967295),Object(c["a"])(r,34816,519),Object(c["a"])(r,36003,0),Object(c["a"])(r,36004,4294967295),Object(c["a"])(r,2964,7680),Object(c["a"])(r,2965,7680),Object(c["a"])(r,2966,7680),Object(c["a"])(r,34817,7680),Object(c["a"])(r,34818,7680),Object(c["a"])(r,34819,7680),Object(c["a"])(r,2978,new Int32Array([0,0,1024,1024])),Object(c["a"])(r,3333,4),Object(c["a"])(r,3317,4),Object(c["a"])(r,37440,!1),Object(c["a"])(r,37441,!1),Object(c["a"])(r,37443,37444),Object(c["a"])(r,35723,4352),Object(c["a"])(r,36010,null),Object(c["a"])(r,35977,!1),Object(c["a"])(r,3330,0),Object(c["a"])(r,3332,0),Object(c["a"])(r,3331,0),Object(c["a"])(r,3314,0),Object(c["a"])(r,32878,0),Object(c["a"])(r,3316,0),Object(c["a"])(r,3315,0),Object(c["a"])(r,32877,0),r),l=function(e,t,n){return t?e.enable(n):e.disable(n)},f=function(e,t,n){return e.hint(n,t)},d=function(e,t,n){return e.pixelStorei(n,t)},h=function(e,t){var n=Object(u["b"])(e)?36009:36160;return e.bindFramebuffer(n,t)},b=function(e,t){return e.bindFramebuffer(36008,t)},v=(a={},Object(c["a"])(a,3042,l),Object(c["a"])(a,32773,(function(e,t){return e.blendColor.apply(e,Object(o["a"])(t))})),Object(c["a"])(a,32777,"blendEquation"),Object(c["a"])(a,34877,"blendEquation"),Object(c["a"])(a,32969,"blendFunc"),Object(c["a"])(a,32968,"blendFunc"),Object(c["a"])(a,32971,"blendFunc"),Object(c["a"])(a,32970,"blendFunc"),Object(c["a"])(a,3106,(function(e,t){return e.clearColor.apply(e,Object(o["a"])(t))})),Object(c["a"])(a,3107,(function(e,t){return e.colorMask.apply(e,Object(o["a"])(t))})),Object(c["a"])(a,2884,l),Object(c["a"])(a,2885,(function(e,t){return e.cullFace(t)})),Object(c["a"])(a,2929,l),Object(c["a"])(a,2931,(function(e,t){return e.clearDepth(t)})),Object(c["a"])(a,2932,(function(e,t){return e.depthFunc(t)})),Object(c["a"])(a,2928,(function(e,t){return e.depthRange.apply(e,Object(o["a"])(t))})),Object(c["a"])(a,2930,(function(e,t){return e.depthMask(t)})),Object(c["a"])(a,3024,l),Object(c["a"])(a,35723,f),Object(c["a"])(a,36006,h),Object(c["a"])(a,2886,(function(e,t){return e.frontFace(t)})),Object(c["a"])(a,33170,f),Object(c["a"])(a,2849,(function(e,t){return e.lineWidth(t)})),Object(c["a"])(a,32823,l),Object(c["a"])(a,32824,"polygonOffset"),Object(c["a"])(a,10752,"polygonOffset"),Object(c["a"])(a,35977,l),Object(c["a"])(a,32938,"sampleCoverage"),Object(c["a"])(a,32939,"sampleCoverage"),Object(c["a"])(a,3089,l),Object(c["a"])(a,3088,(function(e,t){return e.scissor.apply(e,Object(o["a"])(t))})),Object(c["a"])(a,2960,l),Object(c["a"])(a,2961,(function(e,t){return e.clearStencil(t)})),Object(c["a"])(a,2968,(function(e,t){return e.stencilMaskSeparate(1028,t)})),Object(c["a"])(a,36005,(function(e,t){return e.stencilMaskSeparate(1029,t)})),Object(c["a"])(a,2962,"stencilFuncFront"),Object(c["a"])(a,2967,"stencilFuncFront"),Object(c["a"])(a,2963,"stencilFuncFront"),Object(c["a"])(a,34816,"stencilFuncBack"),Object(c["a"])(a,36003,"stencilFuncBack"),Object(c["a"])(a,36004,"stencilFuncBack"),Object(c["a"])(a,2964,"stencilOpFront"),Object(c["a"])(a,2965,"stencilOpFront"),Object(c["a"])(a,2966,"stencilOpFront"),Object(c["a"])(a,34817,"stencilOpBack"),Object(c["a"])(a,34818,"stencilOpBack"),Object(c["a"])(a,34819,"stencilOpBack"),Object(c["a"])(a,2978,(function(e,t){return e.viewport.apply(e,Object(o["a"])(t))})),Object(c["a"])(a,3333,d),Object(c["a"])(a,3317,d),Object(c["a"])(a,37440,d),Object(c["a"])(a,37441,d),Object(c["a"])(a,37443,d),Object(c["a"])(a,3330,d),Object(c["a"])(a,3332,d),Object(c["a"])(a,3331,d),Object(c["a"])(a,36010,b),Object(c["a"])(a,3314,d),Object(c["a"])(a,32878,d),Object(c["a"])(a,3316,d),Object(c["a"])(a,3315,d),Object(c["a"])(a,32877,d),a),g={blendEquation:function(e,t){return e.blendEquationSeparate(t[32777],t[34877])},blendFunc:function(e,t){return e.blendFuncSeparate(t[32969],t[32968],t[32971],t[32970])},polygonOffset:function(e,t){return e.polygonOffset(t[32824],t[10752])},sampleCoverage:function(e,t){return e.sampleCoverage(t[32938],t[32939])},stencilFuncFront:function(e,t){return e.stencilFuncSeparate(1028,t[2962],t[2967],t[2963])},stencilFuncBack:function(e,t){return e.stencilFuncSeparate(1029,t[34816],t[36003],t[36004])},stencilOpFront:function(e,t){return e.stencilOpSeparate(1028,t[2964],t[2965],t[2966])},stencilOpBack:function(e,t){return e.stencilOpSeparate(1029,t[34817],t[34818],t[34819])}},m=function(e,t){return e.isEnabled(t)},O=(i={},Object(c["a"])(i,3042,m),Object(c["a"])(i,2884,m),Object(c["a"])(i,2929,m),Object(c["a"])(i,3024,m),Object(c["a"])(i,32823,m),Object(c["a"])(i,32926,m),Object(c["a"])(i,32928,m),Object(c["a"])(i,3089,m),Object(c["a"])(i,2960,m),Object(c["a"])(i,35977,m),i)},"2fc2":function(e,t,n){n.d(t,"a",(function(){return d}));var r=n("d4ec"),a=n("bee2"),i=n("aed6"),o=n("4945"),c=n("ae79"),u=n("55da"),s=n("0b1c"),l=n("b206"),f="Resource subclass must define virtual methods",d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r["a"])(this,e),Object(o["b"])(t);var a=n.id,i=n.userData,c=void 0===i?{}:i;this.gl=t,this.id=a||Object(u["c"])(this.constructor.name),this.userData=c,this._bound=!1,this._handle=n.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}return Object(a["a"])(e,[{key:"toString",value:function(){return"".concat(this.constructor.name,"(").concat(this.id,")")}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.deleteChildren,n=void 0!==t&&t,r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&n&&r.filter(Boolean).forEach((function(e){e["delete"]()})),this}},{key:"bind",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.handle;return"function"!==typeof t?(this._bindHandle(t),this):(this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e)}},{key:"unbind",value:function(){this.bind(null)}},{key:"getParameter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=Object(c["b"])(this.gl,e),Object(s["a"])(e);var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var a=Object(o["d"])(this.gl),i=(!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!i){var u=r.webgl1,l="webgl2"in r?r.webgl2:r.webgl1,f=a?l:u;return f}}return this._getParameter(e,t)}},{key:"getParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=t.parameters,r=t.keys,a=this.constructor.PARAMETERS||{},i=Object(o["d"])(this.gl),u={},s=n||Object.keys(a),l=!0,f=!1,d=void 0;try{for(var h,b=s[Symbol.iterator]();!(l=(h=b.next()).done);l=!0){var v=h.value,g=a[v],m=g&&(!("webgl2"in g)||i)&&(!("extension"in g)||this.gl.getExtension(g.extension));if(m){var O=r?Object(c["a"])(this.gl,v):v;u[O]=this.getParameter(v,e),r&&"GLenum"===g.type&&(u[O]=Object(c["a"])(this.gl,u[O]))}}}catch(y){f=!0,d=y}finally{try{l||null==b["return"]||b["return"]()}finally{if(f)throw d}}return u}},{key:"setParameter",value:function(e,t){e=Object(c["b"])(this.gl,e),Object(s["a"])(e);var n=this.constructor.PARAMETERS||{},r=n[e];if(r){var a=Object(o["d"])(this.gl),i=(!("webgl2"in r)||a)&&(!("extension"in r)||this.gl.getExtension(r.extension));if(!i)throw new Error("Parameter not available on this platform");"GLenum"===r.type&&(t=Object(c["b"])(t))}return this._setParameter(e,t),this}},{key:"setParameters",value:function(e){for(var t in e)this.setParameter(t,e[t]);return this}},{key:"stubRemovedMethods",value:function(e,t,n){return Object(l["a"])(this,e,t,n)}},{key:"initialize",value:function(e){}},{key:"_createHandle",value:function(){throw new Error(f)}},{key:"_deleteHandle",value:function(){throw new Error(f)}},{key:"_bindHandle",value:function(){throw new Error(f)}},{key:"_getOptsFromHandle",value:function(){throw new Error(f)}},{key:"_getParameter",value:function(e,t){throw new Error(f)}},{key:"_setParameter",value:function(e,t){throw new Error(f)}},{key:"_context",value:function(){return this.gl.luma=this.gl.luma||{},this.gl.luma}},{key:"_addStats",value:function(){var e=this.constructor.name,t=i["a"].get("Resource Counts");t.get("Resources Created").incrementCount(),t.get("".concat(e,"s Created")).incrementCount(),t.get("".concat(e,"s Active")).incrementCount()}},{key:"_removeStats",value:function(){var e=this.constructor.name,t=i["a"].get("Resource Counts");t.get("".concat(e,"s Active")).decrementCount()}},{key:"_trackAllocatedMemory",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.constructor.name,n=i["a"].get("Memory Usage");n.get("GPU Memory").addCount(e),n.get("".concat(t," Memory")).addCount(e),this.byteLength=e}},{key:"_trackDeallocatedMemory",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.constructor.name,t=i["a"].get("Memory Usage");t.get("GPU Memory").subtractCount(this.byteLength),t.get("".concat(e," Memory")).subtractCount(this.byteLength),this.byteLength=0}},{key:"handle",get:function(){return this._handle}}]),e}()},"3a49":function(e,t,n){n.d(t,"a",(function(){return z}));var r,a=n("d4ec"),i=n("bee2"),o=n("99de"),c=n("257e"),u=n("7e84"),s=n("45eb"),l=n("262e"),f=n("2fc2"),d=n("97a3"),h=n("d752"),b=n("ade3"),v=n("9f85"),g=n("e7ea"),m=(r={},Object(b["a"])(r,5126,(function(e,t,n){return e.uniform1fv(t,A(n,1))})),Object(b["a"])(r,35664,(function(e,t,n){return e.uniform2fv(t,A(n,2))})),Object(b["a"])(r,35665,(function(e,t,n){return e.uniform3fv(t,A(n,3))})),Object(b["a"])(r,35666,(function(e,t,n){return e.uniform4fv(t,A(n,4))})),Object(b["a"])(r,5124,(function(e,t,n){return e.uniform1iv(t,E(n,1))})),Object(b["a"])(r,35667,(function(e,t,n){return e.uniform2iv(t,E(n,2))})),Object(b["a"])(r,35668,(function(e,t,n){return e.uniform3iv(t,E(n,3))})),Object(b["a"])(r,35669,(function(e,t,n){return e.uniform4iv(t,E(n,4))})),Object(b["a"])(r,35670,(function(e,t,n){return e.uniform1iv(t,E(n,1))})),Object(b["a"])(r,35671,(function(e,t,n){return e.uniform2iv(t,E(n,2))})),Object(b["a"])(r,35672,(function(e,t,n){return e.uniform3iv(t,E(n,3))})),Object(b["a"])(r,35673,(function(e,t,n){return e.uniform4iv(t,E(n,4))})),Object(b["a"])(r,35674,(function(e,t,n){return e.uniformMatrix2fv(t,!1,A(n,4))})),Object(b["a"])(r,35675,(function(e,t,n){return e.uniformMatrix3fv(t,!1,A(n,9))})),Object(b["a"])(r,35676,(function(e,t,n){return e.uniformMatrix4fv(t,!1,A(n,16))})),Object(b["a"])(r,35678,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,35680,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,5125,(function(e,t,n){return e.uniform1uiv(t,x(n,1))})),Object(b["a"])(r,36294,(function(e,t,n){return e.uniform2uiv(t,x(n,2))})),Object(b["a"])(r,36295,(function(e,t,n){return e.uniform3uiv(t,x(n,3))})),Object(b["a"])(r,36296,(function(e,t,n){return e.uniform4uiv(t,x(n,4))})),Object(b["a"])(r,35685,(function(e,t,n){return e.uniformMatrix2x3fv(t,!1,A(n,6))})),Object(b["a"])(r,35686,(function(e,t,n){return e.uniformMatrix2x4fv(t,!1,A(n,8))})),Object(b["a"])(r,35687,(function(e,t,n){return e.uniformMatrix3x2fv(t,!1,A(n,6))})),Object(b["a"])(r,35688,(function(e,t,n){return e.uniformMatrix3x4fv(t,!1,A(n,12))})),Object(b["a"])(r,35689,(function(e,t,n){return e.uniformMatrix4x2fv(t,!1,A(n,8))})),Object(b["a"])(r,35690,(function(e,t,n){return e.uniformMatrix4x3fv(t,!1,A(n,12))})),Object(b["a"])(r,35679,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,35682,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36289,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36292,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36293,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36298,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36299,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36300,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36303,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36306,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36307,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36308,(function(e,t,n){return e.uniform1i(t,n)})),Object(b["a"])(r,36311,(function(e,t,n){return e.uniform1i(t,n)})),r),O={},y={},p={},j=[0];function _(e,t,n,r){1===t&&"boolean"===typeof e&&(e=e?1:0),Number.isFinite(e)&&(j[0]=e,e=j);var a=e.length;if(a%t&&g["a"].warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof n)return e;var i=r[a];i||(i=new n(a),r[a]=i);for(var o=0;o<a;o++)i[o]=e[o];return i}function A(e,t){return _(e,t,Float32Array,O)}function E(e,t){return _(e,t,Int32Array,y)}function x(e,t){return _(e,t,Uint32Array,p)}function k(e){if("]"!==e[e.length-1])return{name:e,length:1,isArray:!1};var t=/([^[]*)(\[[0-9]+\])?/,n=e.match(t);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:n[1],length:n[2]||1,isArray:Boolean(n[2])}}function T(e,t,n){var r=m[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r.bind(null,e,t)}function w(e,t,n){for(var r in e){var a=e[r],i=!n||Boolean(n[r]);if(i&&!L(a))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(r),a),new Error("".concat(t," Bad uniform ").concat(r))}return!0}function L(e){return Array.isArray(e)||ArrayBuffer.isView(e)?S(e):!!isFinite(e)||(!0===e||!1===e||(e instanceof d["a"]||(e instanceof v["a"]||e instanceof h["a"]&&Boolean(e.texture))))}function S(e){if(0===e.length)return!1;for(var t=Math.min(e.length,16),n=0;n<t;++n)if(!Number.isFinite(e[n]))return!1;return!0}function F(e,t){if(Array.isArray(e)||ArrayBuffer.isView(e)){if(!t)return!1;var n=e.length;if(t.length!==n)return!1;for(var r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}return e===t}function I(e){return Array.isArray(e)||ArrayBuffer.isView(e)?e.slice():e}var P=n("6ea8"),D=n("4f61"),R=n("4945"),B=n("a1e8"),C=function(){function e(t){Object(a["a"])(this,e),this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}return Object(i["a"])(e,[{key:"getAttributeInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.attributeInfosByLocation[t]:this.attributeInfosByName[e]||null}},{key:"getAttributeLocation",value:function(e){var t=this.getAttributeInfo(e);return t?t.location:-1}},{key:"getAttributeAccessor",value:function(e){var t=this.getAttributeInfo(e);return t?t.accessor:null}},{key:"getVaryingInfo",value:function(e){var t=Number(e);return Number.isFinite(t)?this.varyingInfos[t]:this.varyingInfosByName[e]||null}},{key:"getVaryingIndex",value:function(e){var t=this.getVaryingInfo();return t?t.location:-1}},{key:"getVaryingAccessor",value:function(e){var t=this.getVaryingInfo();return t?t.accessor:null}},{key:"_readAttributesFromProgram",value:function(e){for(var t=e.gl,n=t.getProgramParameter(e.handle,35721),r=0;r<n;r++){var a=t.getActiveAttrib(e.handle,r),i=a.name,o=a.type,c=a.size,u=t.getAttribLocation(e.handle,i);u>=0&&this._addAttribute(u,i,o,c)}this.attributeInfos.sort((function(e,t){return e.location-t.location}))}},{key:"_readVaryingsFromProgram",value:function(e){var t=e.gl;if(Object(R["d"])(t)){for(var n=t.getProgramParameter(e.handle,35971),r=0;r<n;r++){var a=t.getTransformFeedbackVarying(e.handle,r),i=a.name,o=a.type,c=a.size;this._addVarying(r,i,o,c)}this.varyingInfos.sort((function(e,t){return e.location-t.location}))}}},{key:"_addAttribute",value:function(e,t,n,r){var a=Object(B["a"])(n),i=a.type,o=a.components,c={type:i,size:r*o};this._inferProperties(e,t,c);var u={location:e,name:t,accessor:new D["a"](c)};this.attributeInfos.push(u),this.attributeInfosByLocation[e]=u,this.attributeInfosByName[u.name]=u}},{key:"_inferProperties",value:function(e,t,n){/instance/i.test(t)&&(n.divisor=1)}},{key:"_addVarying",value:function(e,t,n,r){var a=Object(B["a"])(n),i=a.type,o=a.components,c=new D["a"]({type:i,size:r*o}),u={location:e,name:t,accessor:c};this.varyingInfos.push(u),this.varyingInfosByName[u.name]=u}}]),e}(),M=n("84fd"),N=n("ae79"),U=n("0b1c"),G=n("55da"),V=4,H=35981,X=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"],z=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])(this,t),n=Object(o["a"])(this,Object(u["a"])(t).call(this,e,r)),n.stubRemovedMethods("Program","v6.0",X),n._isCached=!1,n.initialize(r),Object.seal(Object(c["a"])(n)),n._setId(r.id),n}return Object(l["a"])(t,e),Object(i["a"])(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hash,n=e.vs,r=e.fs,a=e.varyings,i=e.bufferMode,o=void 0===i?H:i;return this.hash=t||"",this.vs="string"===typeof n?new P["b"](this.gl,{id:"".concat(e.id,"-vs"),source:n}):n,this.fs="string"===typeof r?new P["a"](this.gl,{id:"".concat(e.id,"-fs"),source:r}):r,Object(U["a"])(this.vs instanceof P["b"]),Object(U["a"])(this.fs instanceof P["a"]),this.uniforms={},a&&a.length>0&&(Object(R["a"])(this.gl),this.varyings=a,this.gl.transformFeedbackVaryings(this.handle,a,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new C(this),this.setProps(e)}},{key:"delete",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isCached?this:Object(s["a"])(Object(u["a"])(t.prototype),"delete",this).call(this,e)}},{key:"setProps",value:function(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}},{key:"draw",value:function(e){var t=this,n=e.logPriority,r=e.drawMode,a=void 0===r?4:r,i=e.vertexCount,o=e.offset,c=void 0===o?0:o,u=e.start,s=e.end,l=e.isIndexed,f=void 0!==l&&l,d=e.indexType,h=void 0===d?5123:d,b=e.isInstanced,v=void 0!==b&&b,m=e.instanceCount,O=void 0===m?0:m,y=e.vertexArray,p=void 0===y?null:y,j=e.transformFeedback,_=e.framebuffer,A=e.parameters,E=void 0===A?{}:A,x=e.uniforms,k=e.samplers;if((x||k)&&(g["a"].deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(x||{})),void 0!==n){var T=_?_.id:"default",w="mode=".concat(Object(N["a"])(this.gl,a)," verts=").concat(i," ")+"instances=".concat(O," indexType=").concat(Object(N["a"])(this.gl,h)," ")+"isInstanced=".concat(v," isIndexed=").concat(f," ")+"Framebuffer=".concat(T);g["a"].log(n,w)()}return Object(U["a"])(p),this.gl.useProgram(this.handle),!!this._areTexturesRenderable()&&(p.bindForDraw(i,O,(function(){if(void 0!==_&&(E=Object.assign({},E,{framebuffer:_})),j){var e=Object(B["c"])(a);j.begin(e)}t._bindTextures(),Object(M["a"])(t.gl,E,(function(){f&&v?t.gl.drawElementsInstanced(a,i,h,c,O):f&&Object(R["d"])(t.gl)&&!isNaN(u)&&!isNaN(s)?t.gl.drawRangeElements(a,u,s,i,h,c):f?t.gl.drawElements(a,i,h,c):v?t.gl.drawArraysInstanced(a,c,i,O):t.gl.drawArrays(a,c,i)})),j&&j.end()})),!0)}},{key:"setUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=!1,r={};for(var a in e)F(this.uniforms[a],e[a])||(n=!0,r[a]=e[a],this.uniforms[a]=I(e[a]));return n&&(t(),w(r,this.id,this._uniformSetters),this._setUniforms(r)),this}},{key:"reset",value:function(){}},{key:"_areTexturesRenderable",value:function(){var e=!0;for(var t in this.uniforms){var n=this._uniformSetters[t];if(n&&void 0!==n.textureIndex){var r=this.uniforms[t];if(r instanceof h["a"]){var a=r;r=a.texture}if(r instanceof d["a"]){var i=r;e=e&&i.loaded}}}return e}},{key:"_bindTextures",value:function(){for(var e in this.uniforms){var t=this._uniformSetters[e];if(t&&void 0!==t.textureIndex){var n=this.uniforms[e];if(n instanceof h["a"]&&(n=n.texture),n instanceof d["a"]){var r=n;r.bind(t.textureIndex)}}}}},{key:"_setUniforms",value:function(e){for(var t in this.gl.useProgram(this.handle),e){var n=e[t],r=this._uniformSetters[t];if(r)if(n instanceof h["a"]&&(n=n.texture),n instanceof d["a"]){void 0===r.textureIndex&&(r.textureIndex=this._textureIndexCounter++);var a=n,i=r.textureIndex;a.bind(i),r(i)}else r(n)}return this}},{key:"_createHandle",value:function(){return this.gl.createProgram()}},{key:"_deleteHandle",value:function(){this.gl.deleteProgram(this.handle)}},{key:"_getOptionsFromHandle",value:function(e){var t=this.gl.getAttachedShaders(e),n={},r=!0,a=!1,i=void 0;try{for(var o,c=t[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value,s=this.gl.getShaderParameter(this.handle,35663);switch(s){case 35633:n.vs=new P["b"]({handle:u});break;case 35632:n.fs=new P["a"]({handle:u});break;default:}}}catch(l){a=!0,i=l}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw i}}return n}},{key:"_getParameter",value:function(e){return this.gl.getProgramParameter(this.handle,e)}},{key:"_setId",value:function(e){if(!e){var t=this._getName();this.id=Object(G["c"])(t)}}},{key:"_getName",value:function(){var e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}},{key:"_compileAndLink",value:function(){var e=this.gl;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),g["a"].time(V,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),g["a"].timeEnd(V,"linkProgram for ".concat(this._getName()))(),e.debug||g["a"].priority>0){e.validateProgram(this.handle);var t=e.getProgramParameter(this.handle,35714);if(!t)throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)))}}},{key:"_readUniformLocationsFromLinkedProgram",value:function(){var e=this.gl;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(var t=0;t<this._uniformCount;t++){var n=this.gl.getActiveUniform(this.handle,t),r=k(n.name),a=r.name,i=r.isArray,o=e.getUniformLocation(this.handle,a);if(this._uniformSetters[a]=T(e,o,n,i),n.size>1)for(var c=0;c<n.size;c++)o=e.getUniformLocation(this.handle,"".concat(a,"[").concat(c,"]")),this._uniformSetters["".concat(a,"[").concat(c,"]")]=T(e,o,n,i)}this._textureIndexCounter=0}},{key:"getActiveUniforms",value:function(e,t){return this.gl.getActiveUniforms(this.handle,e,t)}},{key:"getUniformBlockIndex",value:function(e){return this.gl.getUniformBlockIndex(this.handle,e)}},{key:"getActiveUniformBlockParameter",value:function(e,t){return this.gl.getActiveUniformBlockParameter(this.handle,e,t)}},{key:"uniformBlockBinding",value:function(e,t){this.gl.uniformBlockBinding(this.handle,e,t)}}]),t}(f["a"])},"3f41":function(e,t,n){n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return l}));var r=n("d4ec"),a=n("bee2"),i=n("6c70"),o=n("bb30"),c=function(){function e(){Object(r["a"])(this,e),this.shaderModules={},this.defaultShaderModules=[]}return Object(a["a"])(e,[{key:"setDefaultShaderModules",value:function(e){this.defaultShaderModules=this.resolveModules(e)}},{key:"getDefaultShaderModules",value:function(){return this.defaultShaderModules}},{key:"registerShaderModules",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.ignoreMultipleRegistrations,r=void 0!==n&&n,a=!0,i=!1,o=void 0;try{for(var c,u=e[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;this._registerShaderModule(s,r)}}catch(l){i=!0,o=l}finally{try{a||null==u["return"]||u["return"]()}finally{if(i)throw o}}}},{key:"getShaderModule",value:function(e){if(e instanceof i["a"])return e;if("string"!==typeof e)return this._registerShaderModule(e,!0);var t=this.shaderModules[e];return t||Object(o["a"])(!1,"Unknown shader module ".concat(e)),t}},{key:"resolveModules",value:function(e){var t=this;return e.map((function(e){return t.getShaderModule(e)}))}},{key:"_registerShaderModule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e instanceof i["a"])return e;if(Object(o["a"])(e.name,"shader module has no name"),this.shaderModules[e.name]&&!t)throw new Error("shader module ".concat(e.name," already registered"));return e=new i["a"](e),e.dependencies=this.resolveModules(e.dependencies),this.shaderModules[e.name]=e,this.shaderModules[e.name]}}]),e}(),u=new c;function s(e){return e=e.concat(u.defaultShaderModules),e=u.resolveModules(e),f(e)}function l(e){return u.getShaderModule(e)}function f(e){var t={},n={};return d({modules:e,level:0,moduleMap:t,moduleDepth:n}),Object.keys(n).sort((function(e,t){return n[t]-n[e]})).map((function(e){return t[e]}))}function d(e){var t=e.modules,n=e.level,r=e.moduleMap,a=e.moduleDepth;if(n>=5)throw new Error("Possible loop in shader dependency graph");var i=!0,o=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var l=u.value;r[l.name]=l,(void 0===a[l.name]||a[l.name]<n)&&(a[l.name]=n)}}catch(O){o=!0,c=O}finally{try{i||null==s["return"]||s["return"]()}finally{if(o)throw c}}var f=!0,h=!1,b=void 0;try{for(var v,g=t[Symbol.iterator]();!(f=(v=g.next()).done);f=!0){var m=v.value;m.dependencies&&d({modules:m.dependencies,level:n+1,moduleMap:r,moduleDepth:a})}}catch(O){h=!0,b=O}finally{try{f||null==g["return"]||g["return"]()}finally{if(h)throw b}}}},"45f7":function(e,t,n){n.d(t,"a",(function(){return j}));var r=n("d4ec"),a=n("99de"),i=n("7e84"),o=n("257e"),c=n("bee2"),u=n("262e"),s=n("2fc2"),l=n("7779"),f=n("b4c9"),d=n("4945"),h=n("0b1c"),b=34918,v=34919,g=35007,m=36795,O=35976,y=35887,p=36202,j=function(e){function t(e){var n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])(this,t),n=Object(a["a"])(this,Object(i["a"])(t).call(this,e,c)),n.target=null,n._queryPending=!1,n._pollingPromise=null,Object.seal(Object(o["a"])(n)),n}return Object(u["a"])(t,e),Object(c["a"])(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(d["d"])(e),r=Object(l["b"])(e,f["a"].TIMER_QUERY),a=n||r,i=!0,o=!1,c=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0){var b=u.value;switch(b){case"queries":a=a&&n;break;case"timers":a=a&&r;break;default:Object(h["a"])(!1)}}}catch(v){o=!0,c=v}finally{try{i||null==s["return"]||s["return"]()}finally{if(o)throw c}}return a}}]),Object(c["a"])(t,[{key:"beginTimeElapsedQuery",value:function(){return this.begin(g)}},{key:"beginOcclusionQuery",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.conservative,n=void 0!==t&&t;return this.begin(n?p:y)}},{key:"beginTransformFeedbackQuery",value:function(){return this.begin(O)}},{key:"begin",value:function(e){return this._queryPending||(this.target=e,this.gl.beginQuery(this.target,this.handle)),this}},{key:"end",value:function(){return this._queryPending||this.target&&(this.gl.endQuery(this.target),this.target=null,this._queryPending=!0),this}},{key:"isResultAvailable",value:function(){if(!this._queryPending)return!1;var e=this.gl.getQueryParameter(this.handle,v);return e&&(this._queryPending=!1),e}},{key:"isTimerDisjoint",value:function(){return this.gl.getParameter(m)}},{key:"getResult",value:function(){return this.gl.getQueryParameter(this.handle,b)}},{key:"getTimerMilliseconds",value:function(){return this.getResult()/1e6}},{key:"createPoll",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;var n=0;return this._pollingPromise=new Promise((function(r,a){var i=function i(){e.isResultAvailable()?(r(e.getResult()),e._pollingPromise=null):n++>t?(a("Timed out"),e._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)})),this._pollingPromise}},{key:"_createHandle",value:function(){return t.isSupported(this.gl)?this.gl.createQuery():null}},{key:"_deleteHandle",value:function(){this.gl.deleteQuery(this.handle)}}]),t}(s["a"])},"4f61":function(e,t,n){n.d(t,"a",(function(){return f}));var r=n("4478"),a=n("d4ec"),i=n("bee2"),o=n("07df"),c=n("0b1c"),u=n("2c4f"),s={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},l={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}},f=function(){function e(){var t=this;Object(a["a"])(this,e);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];r.forEach((function(e){return t._assign(e)})),Object.freeze(this)}return Object(i["a"])(e,null,[{key:"getBytesPerElement",value:function(e){var t=Object(o["c"])(e.type||5126);return t.BYTES_PER_ELEMENT}},{key:"getBytesPerVertex",value:function(e){Object(c["a"])(e.size);var t=Object(o["c"])(e.type||5126);return t.BYTES_PER_ELEMENT*e.size}},{key:"resolve",value:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return Object(r["a"])(e,[s].concat(n))}}]),Object(i["a"])(e,[{key:"toString",value:function(){return JSON.stringify(this)}},{key:"_assign",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object(u["a"])("Accessor",e,l),void 0!==e.type&&(this.type=e.type,5124!==e.type&&5125!==e.type||(this.integer=!0)),void 0!==e.size&&(this.size=e.size),void 0!==e.offset&&(this.offset=e.offset),void 0!==e.stride&&(this.stride=e.stride),void 0!==e.normalized&&(this.normalized=e.normalized),void 0!==e.integer&&(this.integer=e.integer),void 0!==e.divisor&&(this.divisor=e.divisor),void 0!==e.buffer&&(this.buffer=e.buffer),void 0!==e.index&&("boolean"===typeof index?this.index=e.index?1:0:this.index=e.index),void 0!==e.instanced&&(this.divisor=e.instanced?1:0),void 0!==e.isInstanced&&(this.divisor=e.isInstanced?1:0),this}},{key:"BYTES_PER_ELEMENT",get:function(){return e.getBytesPerElement(this)}},{key:"BYTES_PER_VERTEX",get:function(){return e.getBytesPerVertex(this)}}]),e}()},"53ff":function(e,t,n){(function(e){n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return v}));var r=n("d4ec"),a=n("bee2"),i=n("efe98"),o=n("2e19"),c=n("b7ea"),u=n("73eb"),s=n("d5e2");function l(e,t){var n=e[t].bind(e);e[t]=function(){var t=arguments.length<=0?void 0:arguments[0];return t in e.state.cache||(e.state.cache[t]=n.apply(void 0,arguments)),e.state.enable?e.state.cache[t]:n.apply(void 0,arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function f(e,t,n){var r=e[t].bind(e);e[t]=function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];var c,u=n.apply(void 0,[e.state._updateCache].concat(i)),s=u.valueChanged,l=u.oldValue;s&&((c=e.state).log.apply(c,["gl.".concat(t)].concat(i)),r.apply(void 0,i));return l},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}var d=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.copyState,i=void 0!==a&&a,u=n.log,s=void 0===u?function(){}:u;Object(r["a"])(this,e),this.gl=t,this.stateStack=[],this.enable=!0,this.cache=i?Object(c["a"])(t):Object.assign({},o["b"]),this.log=s,this._updateCache=this._updateCache.bind(this),Object.seal(this)}return Object(a["a"])(e,[{key:"push",value:function(){this.stateStack.push({})}},{key:"pop",value:function(){Object(u["a"])(this.stateStack.length>0);var e=this.stateStack[this.stateStack.length-1];Object(c["c"])(this.gl,e,this.cache),this.stateStack.pop()}},{key:"_updateCache",value:function(e){var t,n=!1,r=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(var a in e)Object(u["a"])(void 0!==a),Object(s["a"])(e[a],this.cache[a])||(n=!0,t=this.cache[a],r&&!(a in r)&&(r[a]=this.cache[a]),this.cache[a]=e[a]);return{valueChanged:n,oldValue:t}}}]),e}();function h(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.enable,a=void 0===r||r,o=n.copyState;if(Object(u["a"])(void 0!==o),!t.state){var c="undefined"!==typeof e?e:window;for(var s in c.polyfillContext&&c.polyfillContext(t),t.state=new d(t,{copyState:o,enable:a}),i["a"]){var h=i["a"][s];f(t,s,h)}l(t,"getParameter"),l(t,"isEnabled")}return t.state.enable=a,t}function b(e){e.state||h(e,{copyState:!1}),e.state.push()}function v(e){Object(u["a"])(e.state),e.state.pop()}}).call(this,n("c8ba"))},"5a27":function(e,t,n){n.d(t,"a",(function(){return u}));var r=n("b7ea"),a=n("3835"),i=n("2909");function o(e){return Array.isArray(e)||ArrayBuffer.isView(e)}var c={framebuffer:function(e,t){var n=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,n)},blend:function(e,t){return t?e.enable(3042):e.disable(3042)},blendColor:function(e,t){return e.blendColor.apply(e,Object(i["a"])(t))},blendEquation:function(e,t){t=o(t)?t:[t,t],e.blendEquationSeparate.apply(e,Object(i["a"])(t))},blendFunc:function(e,t){t=o(t)&&2===t.length?[].concat(Object(i["a"])(t),Object(i["a"])(t)):t,e.blendFuncSeparate.apply(e,Object(i["a"])(t))},clearColor:function(e,t){return e.clearColor.apply(e,Object(i["a"])(t))},clearDepth:function(e,t){return e.clearDepth(t)},clearStencil:function(e,t){return e.clearStencil(t)},colorMask:function(e,t){return e.colorMask.apply(e,Object(i["a"])(t))},cull:function(e,t){return t?e.enable(2884):e.disable(2884)},cullFace:function(e,t){return e.cullFace(t)},depthTest:function(e,t){return t?e.enable(2929):e.disable(2929)},depthFunc:function(e,t){return e.depthFunc(t)},depthMask:function(e,t){return e.depthMask(t)},depthRange:function(e,t){return e.depthRange.apply(e,Object(i["a"])(t))},dither:function(e,t){return t?e.enable(3024):e.disable(3024)},derivativeHint:function(e,t){e.hint(35723,t)},frontFace:function(e,t){return e.frontFace(t)},mipmapHint:function(e,t){return e.hint(33170,t)},lineWidth:function(e,t){return e.lineWidth(t)},polygonOffsetFill:function(e,t){return t?e.enable(32823):e.disable(32823)},polygonOffset:function(e,t){return e.polygonOffset.apply(e,Object(i["a"])(t))},sampleCoverage:function(e,t){return e.sampleCoverage.apply(e,Object(i["a"])(t))},scissorTest:function(e,t){return t?e.enable(3089):e.disable(3089)},scissor:function(e,t){return e.scissor.apply(e,Object(i["a"])(t))},stencilTest:function(e,t){return t?e.enable(2960):e.disable(2960)},stencilMask:function(e,t){t=o(t)?t:[t,t];var n=t,r=Object(a["a"])(n,2),i=r[0],c=r[1];e.stencilMaskSeparate(1028,i),e.stencilMaskSeparate(1029,c)},stencilFunc:function(e,t){t=o(t)&&3===t.length?[].concat(Object(i["a"])(t),Object(i["a"])(t)):t;var n=t,r=Object(a["a"])(n,6),c=r[0],u=r[1],s=r[2],l=r[3],f=r[4],d=r[5];e.stencilFuncSeparate(1028,c,u,s),e.stencilFuncSeparate(1029,l,f,d)},stencilOp:function(e,t){t=o(t)&&3===t.length?[].concat(Object(i["a"])(t),Object(i["a"])(t)):t;var n=t,r=Object(a["a"])(n,6),c=r[0],u=r[1],s=r[2],l=r[3],f=r[4],d=r[5];e.stencilOpSeparate(1028,c,u,s),e.stencilOpSeparate(1029,l,f,d)},viewport:function(e,t){return e.viewport.apply(e,Object(i["a"])(t))}};function u(e,t){for(var n in Object(r["c"])(e,t),t){var a=c[n];a&&a(e,t[n],n)}}},"69a7":function(e,t,n){n.d(t,"a",(function(){return b}));var r=n("d4ec"),a=n("99de"),i=n("7e84"),o=n("257e"),c=n("bee2"),u=n("262e"),s=n("84fd"),l=n("4945"),f=n("97a3"),d=n("b980"),h=n("b1cf"),b=function(e){function t(e){var n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])(this,t),Object(l["a"])(e),c=Object.assign({depth:1},c,{target:32879,unpackFlipY:!1}),n=Object(a["a"])(this,Object(i["a"])(t).call(this,e,c)),n.initialize(c),Object.seal(Object(o["a"])(n)),n}return Object(u["a"])(t,e),Object(c["a"])(t,null,[{key:"isSupported",value:function(e){return Object(l["d"])(e)}}]),Object(c["a"])(t,[{key:"setImageData",value:function(e){var t=this,n=e.level,r=void 0===n?0:n,a=e.dataFormat,i=void 0===a?6408:a,o=e.width,c=e.height,u=e.depth,l=void 0===u?1:u,f=e.border,b=void 0===f?0:f,v=e.format,g=e.type,m=void 0===g?5121:g,O=e.offset,y=void 0===O?0:O,p=e.data,j=e.parameters,_=void 0===j?{}:j;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Object(s["a"])(this.gl,_,(function(){ArrayBuffer.isView(p)&&t.gl.texImage3D(t.target,r,i,o,c,l,b,v,m,p),p instanceof h["a"]&&(t.gl.bindBuffer(35052,p.handle),t.gl.texImage3D(t.target,r,i,o,c,l,b,v,m,y))})),p&&p.byteLength)this._trackAllocatedMemory(p.byteLength,"Texture");else{var A=d["a"][this.dataFormat]||4,E=d["c"][this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*A*E,"Texture")}return this.loaded=!0,this}}]),t}(f["a"])},"6c70":function(e,t,n){n.d(t,"a",(function(){return O}));var r=n("d4ec"),a=n("bee2");function i(e,t,n){switch(t){case 300:return n?o(e):c(e);case 100:return n?u(e):s(e);default:throw new Error("unknown GLSL version ".concat(t))}}function o(e){return e.replace(/attribute\s+/g,"in ").replace(/varying\s+/g,"out ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(+/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}function c(e){return e.replace(/varying\s+/g,"in ").replace(/texture2D\(/g,"texture(").replace(/textureCube\(/g,"texture(").replace(/texture2DLodEXT\(/g,"textureLod(").replace(/textureCubeLodEXT\(/g,"textureLod(")}function u(e){return e.replace(/^in\s+/gm,"attribute ").replace(/^out\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}function s(e){return e.replace(/^in\s+/gm,"varying ").replace(/texture\(/g,"texture2D(")}var l=n("bb30"),f=n("53ca"),d={number:{validate:function(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate:function(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function h(e){var t={};for(var n in e){var r=e[n],a=b(r);t[n]=a}return t}function b(e){var t=v(e);return"object"===t?e?"type"in e?Object.assign({},e,d[e.type]):"value"in e?(t=v(e.value),Object.assign({type:t},e,d[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},d[t])}function v(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":Object(f["a"])(e)}var g="vs",m="fs",O=function(){function e(t){var n=t.name,a=t.vs,i=t.fs,o=t.dependencies,c=void 0===o?[]:o,u=t.uniforms,s=t.getUniforms,f=t.deprecations,d=void 0===f?[]:f,b=t.defines,v=void 0===b?{}:b,g=t.vertexShader,m=t.fragmentShader;Object(r["a"])(this,e),Object(l["a"])("string"===typeof n),this.name=n,this.vs=a||g,this.fs=i||m,this.getModuleUniforms=s,this.dependencies=c,this.deprecations=this._parseDeprecationDefinitions(d),this.defines=v,u&&(this.uniforms=h(u))}return Object(a["a"])(e,[{key:"getModuleSource",value:function(e,t){var n;switch(e){case g:n=i(this.vs||"",t,!0);break;case m:n=i(this.fs||"",t,!1);break;default:Object(l["a"])(!1)}return"#define MODULE_".concat(this.name.toUpperCase(),"\n").concat(n,"// END MODULE_").concat(this.name,"\n\n")}},{key:"getUniforms",value:function(e,t){return this.getModuleUniforms?this.getModuleUniforms(e,t):this.uniforms?this._defaultGetUniforms(e):{}}},{key:"getDefines",value:function(){return this.defines}},{key:"checkDeprecations",value:function(e,t){this.deprecations.forEach((function(n){n.regex.test(e)&&(n.deprecated?t.deprecated(n.old,n["new"])():t.removed(n.old,n["new"])())}))}},{key:"_parseDeprecationDefinitions",value:function(e){return e.forEach((function(e){switch(e.type){case"function":e.regex=new RegExp("\\b".concat(e.old,"\\("));break;default:e.regex=new RegExp("".concat(e.type," ").concat(e.old,";"))}})),e}},{key:"_defaultGetUniforms",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=this.uniforms;for(var r in n){var a=n[r];r in e&&!a["private"]?(a.validate&&Object(l["a"])(a.validate(e[r],a),"".concat(this.name,": invalid ").concat(r)),t[r]=e[r]):t[r]=a.value}return t}}]),e}()},"6e98":function(e,t,n){n.d(t,"a",(function(){return b}));var r=n("d4ec"),a=n("99de"),i=n("7e84"),o=n("257e"),c=n("bee2"),u=n("262e"),s=n("2fc2"),l=n("b1cf"),f=n("4945"),d=n("55da"),h=n("e7ea"),b=function(e){function t(e){var n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])(this,t),Object(f["a"])(e),n=Object(a["a"])(this,Object(i["a"])(t).call(this,e,c)),n.initialize(c),n.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(Object(o["a"])(n)),n}return Object(u["a"])(t,e),Object(c["a"])(t,null,[{key:"isSupported",value:function(e){return Object(f["d"])(e)}}]),Object(c["a"])(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(d["a"])(this.buffers)||this.bind((function(){return e._unbindBuffers()})),this.setProps(t),this}},{key:"setProps",value:function(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}},{key:"setBuffers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.bind((function(){for(var n in t)e.setBuffer(n,t[n])})),this}},{key:"setBuffer",value:function(e,t){var n=this,r=this._getVaryingIndex(e),a=this._getBufferParams(t),i=a.buffer,o=a.byteSize,c=a.byteOffset;return r<0?(this.unused[e]=i,h["a"].warn((function(){return"".concat(n.id," unused varying buffer ").concat(e)}))(),this):(this.buffers[r]=t,this.bindOnUse||this._bindBuffer(r,i,c,o),this)}},{key:"begin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}},{key:"end",value:function(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}},{key:"_getBufferParams",value:function(e){var t,n,r;return e instanceof l["a"]===!1?(r=e.buffer,n=e.byteSize,t=e.byteOffset):r=e,void 0===t&&void 0===n||(t=t||0,n=n||r.byteLength-t),{buffer:r,byteOffset:t,byteSize:n}}},{key:"_getVaryingInfo",value:function(e){return this.configuration&&this.configuration.getVaryingInfo(e)}},{key:"_getVaryingIndex",value:function(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;var t=Number(e);return Number.isFinite(t)?t:-1}},{key:"_bindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers){var t=this._getBufferParams(this.buffers[e]),n=t.buffer,r=t.byteSize,a=t.byteOffset;this._bindBuffer(e,n,a,r)}}},{key:"_unbindBuffers",value:function(){if(this.bindOnUse)for(var e in this.buffers)this._bindBuffer(e,null)}},{key:"_bindBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=t&&t.handle;return a&&void 0!==r?this.gl.bindBufferRange(35982,e,a,n,r):this.gl.bindBufferBase(35982,e,a),this}},{key:"_createHandle",value:function(){return this.gl.createTransformFeedback()}},{key:"_deleteHandle",value:function(){this.gl.deleteTransformFeedback(this.handle)}},{key:"_bindHandle",value:function(e){this.gl.bindTransformFeedback(36386,this.handle)}}]),t}(s["a"])},"6ea8":function(e,t,n){n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return E}));var r=n("d4ec"),a=n("99de"),i=n("7e84"),o=n("bee2"),c=n("262e");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unnamed",n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=e.match(n);return r?r[1]:t}var s=35632,l=35633;function f(e){switch(e){case s:return"fragment";case l:return"vertex";default:return"unknown type"}}function d(e,t,n,r){for(var a=e.split(/\r?\n/),i={},o={},c=r||u(t)||"(unnamed)",s="".concat(f(n)," shader ").concat(c),l=0;l<a.length;l++){var d=a[l];if(!(d.length<=1)){var v=d.split(":"),g=v[0],m=parseInt(v[2],10);if(isNaN(m))throw new Error("GLSL compilation error in ".concat(s,": ").concat(e));"WARNING"!==g?i[m]=d:o[m]=d}}var O=b(t);return{shaderName:s,errors:h(i,O),warnings:h(o,O)}}function h(e,t){for(var n="",r=0;r<t.length;r++){var a=t[r];if((e[r+3]||e[r+2]||e[r+1])&&(n+="".concat(a,"\n"),e[r+1])){var i=e[r+1],o=i.split(":",3),c=o[0],u=parseInt(o[1],10)||0,s=i.substring(o.join(":").length+1).trim();n+=v("^^^ ".concat(c,": ").concat(s,"\n\n"),u)}}return n}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:": ",r=e.split(/\r?\n/),a=String(r.length+t-1).length;return r.map((function(e,r){var i=r+t,o=String(i).length,c=v(i,a-o);return c+n+e}))}function v(e,t){for(var n="",r=0;r<t;++r)n+=" ";return"".concat(n).concat(e)}var g=n("4945"),m=n("0b1c"),O=n("55da"),y=n("e7ea"),p=n("2fc2"),j="Shader: GLSL source code must be a JavaScript string",_=function(e){function t(e,n){var o;Object(r["a"])(this,t),Object(g["b"])(e),Object(m["a"])("string"===typeof n.source,j);var c=u(n.source,null)||n.id||Object(O["c"])("unnamed ".concat(t.getTypeName(n.shaderType)));return o=Object(a["a"])(this,Object(i["a"])(t).call(this,e,{id:c})),o.shaderType=n.shaderType,o.source=n.source,o.initialize(n),o}return Object(c["a"])(t,e),Object(o["a"])(t,null,[{key:"getTypeName",value:function(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(m["a"])(!1),"unknown"}}}]),Object(o["a"])(t,[{key:"initialize",value:function(e){var t=e.source,n=u(t,null);n&&(this.id=Object(O["c"])(n)),this._compile(t)}},{key:"getParameter",value:function(e){return this.gl.getShaderParameter(this.handle,e)}},{key:"toString",value:function(){return"".concat(t.getTypeName(this.shaderType),":").concat(this.id)}},{key:"getName",value:function(){return u(this.source)||"unnamed-shader"}},{key:"getSource",value:function(){return this.gl.getShaderSource(this.handle)}},{key:"getTranslatedSource",value:function(){var e=this.gl.getExtension("WEBGL.debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL.debug_shaders not implemented"}},{key:"_compile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.source;e.startsWith("#version ")||(e="#version 100\n".concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);var t=this.getParameter(35713);if(!t){var n=this.gl.getShaderInfoLog(this.handle),r=d(n,this.source,this.shaderType,this.id),a=r.shaderName,i=r.errors,o=r.warnings;throw y["a"].error("GLSL compilation errors in ".concat(a,"\n").concat(i))(),y["a"].warn("GLSL compilation warnings in ".concat(a,"\n").concat(o))(),new Error("GLSL compilation errors in ".concat(a))}}},{key:"_deleteHandle",value:function(){this.gl.deleteShader(this.handle)}},{key:"_getOptsFromHandle",value:function(){return{type:this.getParameter(35663),source:this.getSource()}}}]),t}(p["a"]),A=function(e){function t(e,n){return Object(r["a"])(this,t),"string"===typeof n&&(n={source:n}),Object(a["a"])(this,Object(i["a"])(t).call(this,e,Object.assign({},n,{shaderType:35633})))}return Object(c["a"])(t,e),Object(o["a"])(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35633)}}]),t}(_),E=function(e){function t(e,n){return Object(r["a"])(this,t),"string"===typeof n&&(n={source:n}),Object(a["a"])(this,Object(i["a"])(t).call(this,e,Object.assign({},n,{shaderType:35632})))}return Object(c["a"])(t,e),Object(o["a"])(t,[{key:"_createHandle",value:function(){return this.gl.createShader(35632)}}]),t}(_)},"73eb":function(e,t,n){function r(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}n.d(t,"a",(function(){return r}))},7779:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));var r=n("b4c9"),a=n("4945"),i=n("0b1c"),o=n("e7ea"),c=2;function u(e,t){return t=Array.isArray(t)?t:[t],t.every((function(t){return l(e,t)}))}function s(e){if(e.luma=e.luma||{},!e.luma.caps)for(var t in e.luma.caps={},e.luma.caps.webgl2=Object(a["d"])(e),r["b"])e.luma.caps[t]=l(e,t);return e.luma.caps}function l(e,t){var n=r["b"][t];Object(i["a"])(n,t);var u,s=Object(a["d"])(e)&&n[1]||n[0];if("function"===typeof s)u=s(e);else if(Array.isArray(s)){u=!0;var l=!0,f=!1,d=void 0;try{for(var h,b=s[Symbol.iterator]();!(l=(h=b.next()).done);l=!0){var v=h.value;u=u&&Boolean(e.getExtension(v))}}catch(g){f=!0,d=g}finally{try{l||null==b["return"]||b["return"]()}finally{if(f)throw d}}}else"string"===typeof s?u=Boolean(e.getExtension(s)):"boolean"===typeof s?u=s:Object(i["a"])(!1);return u||o["a"].log(c,"Feature: ".concat(t," not supported"))(),u}},7946:function(e,t,n){(function(e){var t=n("f47a"),r=n("8157");function a(e){return e.luma=e.luma||{},o(e),e.luma.polyfilled||(u(e,r["b"]),c(e,{target:e.luma,target2:e}),e.luma.polyfilled=!0),e}var i="undefined"!==typeof e?e:window;function o(e){e.luma.extensions={};var t=e.getSupportedExtensions()||[],n=!0,r=!1,a=void 0;try{for(var i,o=t[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;e.luma[c]=e.getExtension(c)}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]()}finally{if(r)throw a}}}function c(e,t){var n=t.target,a=t.target2;Object.keys(r["a"]).forEach((function(t){if("function"===typeof r["a"][t]){var i=e[t]?e[t].bind(e):function(){},o=r["a"][t].bind(null,e,i);n[t]=o,a[t]=o}}))}function u(e,t){var n=!0,r=!1,a=void 0;try{for(var i,o=Object.getOwnPropertyNames(t)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var c=i.value;"overrides"!==c&&s(e,{extension:c,target:e.luma,target2:e})}}catch(u){r=!0,a=u}finally{try{n||null==o["return"]||o["return"]()}finally{if(r)throw a}}}function s(e,n){var a=n.extension,i=n.target,o=n.target2,c=r["b"][a];Object(t["a"])(c);for(var u=c.meta,s=void 0===u?{}:u,l=s.suffix,f=void 0===l?"":l,d=e.getExtension(a),h=function(){var t=v[b],n="".concat(t).concat(f),r=null;"meta"===t||"function"===typeof e[t]||(d&&"function"===typeof d[n]?r=function(){return d[n].apply(d,arguments)}:"function"===typeof c[t]&&(r=c[t].bind(i))),r&&(i[t]=r,o[t]=r)},b=0,v=Object.keys(c);b<v.length;b++)h()}i.polyfillContext=a}).call(this,n("c8ba"))},"7aa2":function(e,t,n){n.d(t,"a",(function(){return u}));var r=n("ade3"),a=n("b1cf"),i=n("ae79"),o=n("a1e8"),c=n("4ea4");function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertexArray,n=e.header,r=void 0===n?"Attributes":n;if(!t.configuration)return{};var a={};t.elements&&(a.ELEMENT_ARRAY_BUFFER=s(t,t.elements,null,r));var i=t.values;for(var o in i){var c=t._getAttributeInfo(o);if(c){var u="".concat(o,": ").concat(c.name),f=t.accessors[c.location];f&&(u="".concat(o,": ").concat(l(c.name,f))),a[u]=s(t,i[o],f,r)}}return a}function s(e,t,n,o){var u,s,l=e.gl;if(!t)return s={},Object(r["a"])(s,o,"null"),Object(r["a"])(s,"Format ","N/A"),s;var f,d,h,b="NOT PROVIDED",v="N/A",g="N/A",m="N/A";if(n&&(b=n.type,v=n.size,b=String(b).replace("Array",""),f=-1!==b.indexOf("nt")),t instanceof a["a"]){var O,y,p=t,j=p.getDebugData(),_=j.data,A=j.modified;if(d=A?"*":"",h=_,m=p.byteLength,g=m/_.BYTES_PER_ELEMENT/v,n){var E=n.divisor>0;y="".concat(E?"I ":"P "," ").concat(g," (x").concat(v,"=").concat(m," bytes ").concat(Object(i["a"])(l,b),")")}else f=!0,y="".concat(m," bytes");return O={},Object(r["a"])(O,o,"".concat(d).concat(Object(c["a"])(h,{size:v,isInteger:f}))),Object(r["a"])(O,"Format ",y),O}return h=t,v=t.length,b=String(t.constructor.name).replace("Array",""),f=-1!==b.indexOf("nt"),u={},Object(r["a"])(u,o,"".concat(Object(c["a"])(h,{size:v,isInteger:f})," (constant)")),Object(r["a"])(u,"Format ","".concat(v,"x").concat(b," (constant)")),u}function l(e,t){var n=t.type,r=t.size,a=Object(o["b"])(n,r);return a?"".concat(e," (").concat(a.name,")"):e}},"7dc3":function(e,t,n){var r=n("73d3"),a=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],i={modelMatrix:a,viewMatrix:a,projectionMatrix:a,cameraPositionWorld:[0,0,0]};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t={};return void 0!==e.modelMatrix&&(t.modelMatrix=e.modelMatrix),void 0!==e.viewMatrix&&(t.viewMatrix=e.viewMatrix),void 0!==e.projectionMatrix&&(t.projectionMatrix=e.projectionMatrix),void 0!==e.cameraPositionWorld&&(t.cameraPositionWorld=e.cameraPositionWorld),void 0===e.projectionMatrix&&void 0===e.viewMatrix||(t.viewProjectionMatrix=new r["a"](e.projectionMatrix).multiplyRight(e.viewMatrix)),t}var c="varying vec4 project_vPositionWorld;\nvarying vec3 project_vNormalWorld;\n\nvec4 project_getPosition_World() {\n  return project_vPositionWorld;\n}\n\nvec3 project_getNormal_World() {\n  return project_vNormalWorld;\n}\n",u="".concat(c,"\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewProjectionMatrix;\nuniform vec3 cameraPositionWorld;\n\nstruct World {\n  vec3 position;\n  vec3 normal;\n};\n\nWorld world;\n\nvoid project_setPosition(vec4 position) {\n  project_vPositionWorld = position;\n}\n\nvoid project_setNormal(vec3 normal) {\n  project_vNormalWorld = normal;\n}\n\nvoid project_setPositionAndNormal_World(vec3 position, vec3 normal) {\n  world.position = position;\n  world.normal = normal;\n}\n\nvoid project_setPositionAndNormal_Model(vec3 position, vec3 normal) {\n  world.position = (modelMatrix * vec4(position, 1.)).xyz;\n  world.normal = mat3(modelMatrix) * normal;\n}\n\nvec4 project_model_to_clipspace(vec4 position) {\n  return viewProjectionMatrix * modelMatrix * position;\n}\n\nvec4 project_model_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * modelMatrix * vec4(position, 1.);\n}\n\nvec4 project_world_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_view_to_clipspace(vec3 position) {\n  return projectionMatrix * vec4(position, 1.);\n}\n\nvec4 project_to_clipspace(vec3 position) {\n  return viewProjectionMatrix * vec4(position, 1.);\n}\n"),s="\n".concat(c);t["a"]={name:"project",getUniforms:o,vs:u,fs:s}},"7f94":function(e,t,n){n.d(t,"a",(function(){return d}));var r=n("d4ec"),a=n("99de"),i=n("7e84"),o=n("257e"),c=n("bee2"),u=n("262e"),s=n("97a3"),l=n("4945"),f=n("4d8d"),d=function(e){function t(e){var n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])(this,t),Object(l["b"])(e),(c instanceof Promise||"string"===typeof c)&&(c={data:c}),"string"===typeof c.data&&(c=Object.assign({},c,{data:Object(f["a"])(c.data)})),n=Object(a["a"])(this,Object(i["a"])(t).call(this,e,Object.assign({},c,{target:3553}))),n.initialize(c),Object.seal(Object(o["a"])(n)),n}return Object(u["a"])(t,e),Object(c["a"])(t,null,[{key:"isSupported",value:function(e,t){return s["a"].isSupported(e,t)}}]),t}(s["a"])},8157:function(e,t,n){n.d(t,"b",(function(){return F})),n.d(t,"a",(function(){return I}));var r,a,i=n("ade3"),o=n("f47a"),c="OES_element_index",u="WEBGL_draw_buffers",s="EXT_disjoint_timer_query",l="EXT_disjoint_timer_query_webgl2",f="EXT_texture_filter_anisotropic",d="WEBGL_debug_renderer_info",h=35723,b=4352,v=36795,g=34047,m=37445,O=37446,y=function(e){return j(e)?void 0:0},p=(r={},Object(i["a"])(r,3074,(function(e){return j(e)?void 0:36064})),Object(i["a"])(r,h,(function(e){return j(e)?void 0:b})),Object(i["a"])(r,35977,y),Object(i["a"])(r,32937,y),Object(i["a"])(r,v,(function(e,t){var n=j(e)?e.getExtension(l):e.getExtension(s);return n&&n.GPU_DISJOINT_EXT?t(n.GPU_DISJOINT_EXT):0})),Object(i["a"])(r,m,(function(e,t){var n=e.getExtension(d);return t(n&&n.UNMASKED_VENDOR_WEBGL||7936)})),Object(i["a"])(r,O,(function(e,t){var n=e.getExtension(d);return t(n&&n.UNMASKED_RENDERER_WEBGL||7937)})),Object(i["a"])(r,g,(function(e,t){var n=e.luma.extensions[f];return n?t(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1})),Object(i["a"])(r,32883,y),Object(i["a"])(r,35071,y),Object(i["a"])(r,37447,y),Object(i["a"])(r,36063,(function(e,t){if(!j(e)){var n=e.getExtension(u);return n?t(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}})),Object(i["a"])(r,35379,y),Object(i["a"])(r,35374,y),Object(i["a"])(r,35377,y),Object(i["a"])(r,34852,(function(e){if(!j(e)){var t=e.getExtension(u);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}})),Object(i["a"])(r,36203,(function(e){return e.getExtension(c)?2147483647:65535})),Object(i["a"])(r,33001,(function(e){return e.getExtension(c)?16777216:65535})),Object(i["a"])(r,33e3,(function(e){return 16777216})),Object(i["a"])(r,37157,y),Object(i["a"])(r,35373,y),Object(i["a"])(r,35657,y),Object(i["a"])(r,36183,y),Object(i["a"])(r,37137,y),Object(i["a"])(r,34045,y),Object(i["a"])(r,35978,y),Object(i["a"])(r,35979,y),Object(i["a"])(r,35968,y),Object(i["a"])(r,35376,y),Object(i["a"])(r,35375,y),Object(i["a"])(r,35659,y),Object(i["a"])(r,37154,y),Object(i["a"])(r,35371,y),Object(i["a"])(r,35658,y),Object(i["a"])(r,35076,y),Object(i["a"])(r,35077,y),Object(i["a"])(r,35380,y),r);function j(e){return Boolean(e&&2===e._version)}function _(e,t,n){var r=p[n],a="function"===typeof r?r(e,t,n):r,i=void 0!==a?a:t(n);return i}var A="OES_vertex_array_object",E="ANGLE_instanced_arrays",x="WEBGL_draw_buffers",k="EXT_disjoint_timer_query",T="EXT_texture_filter_anisotropic",w="VertexArray requires WebGL2 or OES_vertex_array_object extension";function L(e){return Boolean(e&&2===e._version)}function S(e,t){return{webgl2:L(e),ext:e.getExtension(t)}}var F=(a={},Object(i["a"])(a,A,{meta:{suffix:"OES"},createVertexArray:function(){Object(o["a"])(!1,w)},deleteVertexArray:function(){},bindVertexArray:function(){},isVertexArray:function(){return!1}}),Object(i["a"])(a,E,{meta:{suffix:"ANGLE"},vertexAttribDivisor:function(e,t){Object(o["a"])(0===t,"WebGL instanced rendering not supported")},drawElementsInstanced:function(){},drawArraysInstanced:function(){}}),Object(i["a"])(a,x,{meta:{suffix:"WEBGL"},drawBuffers:function(){Object(o["a"])(!1)}}),Object(i["a"])(a,k,{meta:{suffix:"EXT"},createQuery:function(){Object(o["a"])(!1)},deleteQuery:function(){Object(o["a"])(!1)},beginQuery:function(){Object(o["a"])(!1)},endQuery:function(){},getQuery:function(e,t){return this.getQueryObject(e,t)},getQueryParameter:function(e,t){return this.getQueryObject(e,t)},getQueryObject:function(){}}),a),I={readBuffer:function(e,t,n){L(e)&&t(n)},getVertexAttrib:function(e,t,n,r){var a,i=S(e,E),o=i.webgl2,c=i.ext;switch(r){case 35069:a=!!o&&void 0;break;case 35070:a=o||c?void 0:0;break;default:}return void 0!==a?a:t(n,r)},getProgramParameter:function(e,t,n,r){if(!L(e))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0;default:}return t(n,r)},getInternalformatParameter:function(e,t,n,r,a){if(!L(e))switch(a){case 32937:return new Int32Array([0]);default:}return e.getInternalformatParameter(n,r,a)},getTexParameter:function(e,t,n,r){switch(r){case 34046:var a=e.luma.extensions,i=a[T];r=i&&i.TEXTURE_MAX_ANISOTROPY_EXT||34046;break;default:}return t(n,r)},getParameter:_,hint:function(e,t,n,r){return t(n,r)}}},"84fd":function(e,t,n){n.d(t,"a",(function(){return c}));var r=n("53ff"),a=n("5a27"),i=n("cbbc"),o=n("73eb");function c(e,t,n){if(Object(i["a"])(t))return n(e);var c,u=t.nocatch,s=void 0===u||u;if(Object(o["a"])(!t.frameBuffer),Object(r["c"])(e),Object(a["a"])(e,t),s)c=n(e),Object(r["b"])(e);else try{c=n(e)}finally{Object(r["b"])(e)}return c}},"8da4":function(e,t,n){n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return s}));var r,a=n("208c"),i=a["a"]&&"undefined"!==typeof document,o=i&&"complete"===document.readyState;function c(){return r||(r=i?new Promise((function(e,t){if(i&&"complete"===document.readyState)return o=!0,void e(document);window.onload=function(){o=!0,e(document)}})):Promise.resolve({})),r}function u(e){var t=e.width,n=void 0===t?800:t,r=e.height,a=void 0===r?600:r,i=e.id,o=void 0===i?"gl-canvas":i,c=e.insert,u=void 0===c||c,s=document.createElement("canvas");if(s.id=o,s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(a)?"".concat(a,"px"):"100%",u){var l=document.body;l.insertBefore(s,l.firstChild)}return s}function s(e){var t,n=e.canvas,r=e.width,a=e.height,i=e.onError,c=void 0===i?function(){}:i;return"string"===typeof n?(o||c("createGLContext called on canvas '".concat(n,"' before page was loaded")),t=document.getElementById(n)):t=n||u({id:"lumagl-canvas",width:r,height:a,onError:c}),t}},9503:function(e,t,n){n.d(t,"c",(function(){return P})),n.d(t,"b",(function(){return D})),n.d(t,"a",(function(){return R}));var r=n("3835"),a=n("ade3"),i=n("acc8"),o=n("3f41");function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="undefined"!==typeof window&&window.navigator||{},n=e.userAgent||t.userAgent||"",r=-1!==n.indexOf("MSIE "),a=-1!==n.indexOf("Trident/");return r||a}var u=n("bb30"),s=7936,l=7937,f=7938,d=35724,h={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},b={};function v(e){return Boolean(e&&2===e._version)}function g(e){var t=e.getExtension("WEBGL_debug_renderer_info"),n=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||s),r=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||l),a=m(n,r),i={gpuVendor:a,vendor:n,renderer:r,version:e.getParameter(f),shadingLanguageVersion:e.getParameter(d)};return i}function m(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}Object.keys(h).forEach((function(e){b[e]=e}));var O={};function y(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=h[t];if(Object(u["a"])(r,t),!c(n))return!0;if(t in O)return O[t];var a=r[0],i=n.behavior||"enable",o="#extension GL_".concat(a," : ").concat(i,"\nvoid main(void) {}"),s=e.createShader(35633);e.shaderSource(s,o),e.compileShader(s);var l=e.getShaderParameter(s,35713);return e.deleteShader(s),O[t]=l,l}function p(e,t){var n=h[t];Object(u["a"])(n,t);var r=v(e)&&n[1]||n[0],a="string"===typeof r?Boolean(e.getExtension(r)):r;return Object(u["a"])(!1===a||!0===a),a}function j(e,t){return t=Array.isArray(t)?t:[t],t.every((function(t){return p(e,t)}))}function _(e){var t=g(e);switch(t.gpuVendor.toLowerCase()){case"nvidia":return"#define NVIDIA_GPU\n// Nvidia optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n";case"intel":return"#define INTEL_GPU\n// Intel optimizes away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n";case"amd":return"#define AMD_GPU\n";default:return"#define DEFAULT_GPU\n// Prevent driver from optimizing away the calculation necessary for emulated fp64\n#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1\n// Intel's built-in 'tan' function doesn't have acceptable precision\n#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1\n// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow\n#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1\n"}}function A(e,t,n){var r="#if (__VERSION__ > 120)\n\n# define FRAG_DEPTH\n# define DERIVATIVES\n# define DRAW_BUFFERS\n# define TEXTURE_LOD\n\n#endif // __VERSION\n";return j(e,b.GLSL_FRAG_DEPTH)&&(r+="// FRAG_DEPTH => gl_FragDepth is available\n#ifdef GL_EXT_frag_depth\n#extension GL_EXT_frag_depth : enable\n# define FRAG_DEPTH\n# define gl_FragDepth gl_FragDepthEXT\n#endif\n"),j(e,b.GLSL_DERIVATIVES)&&y(e,b.GLSL_DERIVATIVES)&&(r+="// DERIVATIVES => dxdF, dxdY and fwidth are available\n#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives : enable\n# define DERIVATIVES\n#endif\n"),j(e,b.GLSL_FRAG_DATA)&&y(e,b.GLSL_FRAG_DATA,{behavior:"require"})&&(r+="// DRAW_BUFFERS => gl_FragData[] is available\n#ifdef GL_EXT_draw_buffers\n#extension GL_EXT_draw_buffers : require\n#define DRAW_BUFFERS\n#endif\n"),j(e,b.GLSL_TEXTURE_LOD)&&(r+="// TEXTURE_LOD => texture2DLod etc are available\n#ifdef GL_EXT_shader_texture_lod\n#extension GL_EXT_shader_texture_lod : enable\n# define TEXTURE_LOD\n#define texture2DLod texture2DLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define texture2DProjLod texture2DProjLodEXT\n#define textureCubeLod textureCubeLodEXT\n#define texture2DGrad texture2DGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define texture2DProjGrad texture2DProjGradEXT\n#define textureCubeGrad textureCubeGradEXT\n#endif\n"),r}var E,x,k,T=n("ae9c"),w="\n\n".concat(T["a"],"\n\n"),L=(E={},Object(a["a"])(E,i["b"],"vertex"),Object(a["a"])(E,i["a"],"fragment"),E),S=(x={},Object(a["a"])(x,i["b"],{}),Object(a["a"])(x,i["a"],{}),x),F=(k={},Object(a["a"])(k,i["b"],{}),Object(a["a"])(k,i["a"],{}),k),I="precision highp float;\n\n";function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e=e.trim();var n=e.split(":"),a=Object(r["a"])(n,2),i=a[0],o=a[1],c=e.replace(/\(.+/,"");S[i][c]=Object.assign(t,{signature:o})}function D(e,t){var n=t.hook,r=t.injection,a=t.order,i=void 0===a?0:a,o=n.slice(0,2),c=F[o];c[e]=c[e]||{},Object(u["a"])(!c[e][n],"Module injection already created"),c[e][n]={injection:r,order:i}}function R(e,t){var n=t.vs,r=t.fs,a=Object(o["b"])(t.modules||[]);return{gl:e,vs:B(e,Object.assign({},t,{source:n,type:i["b"],modules:a})),fs:B(e,Object.assign({},t,{source:r,type:i["a"],modules:a})),getUniforms:C(a),modules:M(a)}}function B(e,t){var n,r,o=t.id,c=t.source,s=t.type,l=t.modules,f=t.defines,d=void 0===f?{}:f,h=t.hookFunctions,b=void 0===h?S:h,v=t.moduleInjections,g=void 0===v?F:v,m=t.inject,O=void 0===m?{}:m,y=t.prologue,p=void 0===y||y,j=t.log;(Object(u["a"])("string"===typeof c,"shader source must be a string"),b!==S)&&(n={},Object(a["a"])(n,i["b"],Object.assign({},S[i["b"]],b[i["b"]])),Object(a["a"])(n,i["a"],Object.assign({},S[i["a"]],b[i["a"]])),b=n);g!==F&&(r={},Object(a["a"])(r,i["b"],Object.assign({},F[i["b"]],g[i["b"]])),Object(a["a"])(r,i["a"],Object.assign({},F[i["a"]],g[i["a"]])),g=r);var E=s===i["b"],x=c.split("\n"),k=100,L="",P=c;0===x[0].indexOf("#version ")?(k=300,L=x[0],P=x.slice(1).join("\n")):L="#version ".concat(k);var D={};l.forEach((function(e){Object.assign(D,e.getDefines())})),Object.assign(D,d);var R=p?"".concat(L,"\n").concat(U({id:o,source:c,type:s}),"\n").concat(N({type:s}),"\n").concat(_(e),"\n").concat(A(e,k,!E),"\n").concat(G(D),"\n").concat(E?"":I,"\n"):"".concat(L,"\n"),B=!1,C={},M={};for(var H in O){var X="string"===typeof O[H]?{injection:O[H],order:0}:O[H];H.match(/^(v|f)s:/)?"#"===H[3]?M[H]=[X]:C[H]=[X]:M[H]=[X]}var z=!0,W=!1,q=void 0;try{for(var Q,Y=l[Symbol.iterator]();!(z=(Q=Y.next()).done);z=!0){var K=Q.value;switch(K.name){case"inject":B=!0;break;default:j&&K.checkDeprecations(P,j);var J=K.getModuleSource(s,k);if(R+=J,g[s][K.name]){var Z=g[s][K.name];for(var $ in Z)$.match(/^(v|f)s:#/)?(M[$]=M[$]||[],M[$].push(Z[$])):(C[$]=C[$]||[],C[$].push(Z[$]))}}}}catch(ee){W=!0,q=ee}finally{try{z||null==Y["return"]||Y["return"]()}finally{if(W)throw q}}return R+=w,R+=V(b[s],C),R+=P,R=Object(T["b"])(R,s,M,B),R}function C(e){return function(t){var n={},r=!0,a=!1,i=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var u=o.value,s=u.getUniforms(t,n);Object.assign(n,s)}}catch(l){a=!0,i=l}finally{try{r||null==c["return"]||c["return"]()}finally{if(a)throw i}}return n}}function M(e){var t={},n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var u=i.value,s=Object(o["a"])(u);t[u]=s}}catch(l){r=!0,a=l}finally{try{n||null==c["return"]||c["return"]()}finally{if(r)throw a}}return t}function N(e){var t=e.type;return"\n#define SHADER_TYPE_".concat(L[t].toUpperCase(),"\n")}function U(e){var t=e.id,n=e.source,r=e.type,a=t&&"string"===typeof t&&-1===n.indexOf("SHADER_NAME");return a?"\n#define SHADER_NAME ".concat(t,"_").concat(L[r],"\n\n"):""}function G(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,n="";for(var r in e){0===t&&(n+="\n// APPLICATION DEFINES\n"),t++;var a=e[r];(a||Number.isFinite(a))&&(n+="#define ".concat(r.toUpperCase()," ").concat(e[r],"\n"))}return 0===t&&(n+="\n"),n}function V(e,t){var n="";for(var r in e){var a=e[r];if(n+="void ".concat(a.signature," {\n"),a.header&&(n+="  ".concat(a.header)),t[r]){var i=t[r];i.sort((function(e,t){return e.order-t.order}));var o=!0,c=!1,u=void 0;try{for(var s,l=i[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var f=s.value;n+="  ".concat(f.injection,"\n")}}catch(d){c=!0,u=d}finally{try{o||null==l["return"]||l["return"]()}finally{if(c)throw u}}}a.footer&&(n+="  ".concat(a.footer)),n+="}\n"}return n}},"97a3":function(e,t,n){n.d(t,"a",(function(){return y}));var r=n("ade3"),a=n("d4ec"),i=n("99de"),o=n("7e84"),c=n("bee2"),u=n("262e"),s=n("2fc2"),l=n("b1cf"),f=n("b980"),d=n("84fd"),h=n("4945"),b=n("1565"),v=n("55da"),g=n("e7ea"),m=n("0b1c"),O=[9729,9728],y=function(e){function t(e,n){var r;Object(a["a"])(this,t);var c=n.id,u=void 0===c?Object(v["c"])("texture"):c,s=n.handle,l=n.target;return r=Object(i["a"])(this,Object(o["a"])(t).call(this,e,{id:u,handle:s})),r.target=l,r.textureUnit=void 0,r.loaded=!1,r.width=void 0,r.height=void 0,r.depth=void 0,r.format=void 0,r.type=void 0,r.dataFormat=void 0,r.border=void 0,r.textureUnit=void 0,r.mipmaps=void 0,r}return Object(u["a"])(t,e),Object(c["a"])(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format,r=t.linearFiltering,a=!0;return n&&(a=a&&Object(f["d"])(e,n),a=a&&(!r||Object(f["e"])(e,n))),a}}]),Object(c["a"])(t,[{key:"toString",value:function(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}},{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.data;if(n instanceof Promise)return n.then((function(n){return e.initialize(Object.assign({},t,{pixels:n,data:n}))})),this;var a=t.pixels,i=void 0===a?null:a,o=t.format,c=void 0===o?6408:o,u=t.border,s=void 0===u?0:u,l=t.recreate,f=void 0!==l&&l,d=t.parameters,h=void 0===d?{}:d,b=t.pixelStore,v=void 0===b?{}:b,m=t.textureUnit,O=void 0===m?void 0:m,y=t.unpackFlipY,p=void 0===y||y,j=t.mipmaps,_=void 0===j||j;n||(n=i);var A=t.width,E=t.height,x=t.dataFormat,k=t.type,T=t.depth,w=void 0===T?0:T,L=this._deduceParameters({format:c,type:k,dataFormat:x,compressed:!1,data:n,width:A,height:E});A=L.width,E=L.height,x=L.dataFormat,k=L.type,this.width=A,this.height=E,this.depth=w,this.format=c,this.type=k,this.dataFormat=x,this.border=s,this.textureUnit=O,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle));var S=Object(r["a"])({},37440,p),F=Object.assign({},S,v);return _&&this._isNPOT()&&(g["a"].warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),_=!1,this._updateForNPOT(h)),this.mipmaps=_,this.setImageData({data:n,width:A,height:E,depth:w,format:c,type:k,dataFormat:x,border:s,mipmaps:_,parameters:F}),_&&this.generateMipmap(),this.setParameters(h),f&&(this.data=n),this}},{key:"resize",value:function(e){var t=e.height,n=e.width,r=e.mipmaps,a=void 0!==r&&r;return n!==this.width||t!==this.height?this.initialize({width:n,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:a}):this}},{key:"generateMipmap",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._isNPOT()?(g["a"].warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(d["a"])(this.gl,t,(function(){e.gl.generateMipmap(e.target)})),this.gl.bindTexture(this.target,null),this)}},{key:"setImageData",value:function(e){this._trackDeallocatedMemory("Texture");var t=e.target,n=void 0===t?this.target:t,r=e.pixels,a=void 0===r?null:r,i=e.level,o=void 0===i?0:i,c=e.format,u=void 0===c?this.format:c,s=e.border,l=void 0===s?this.border:s,b=e.offset,v=void 0===b?0:b,g=e.parameters,O=void 0===g?{}:g,y=e.data,p=void 0===y?null:y,j=e.type,_=void 0===j?this.type:j,A=e.width,E=void 0===A?this.width:A,x=e.height,k=void 0===x?this.height:x,T=e.dataFormat,w=void 0===T?this.dataFormat:T,L=e.compressed,S=void 0!==L&&L;p||(p=a);var F=this._deduceParameters({format:u,type:_,dataFormat:w,compressed:S,data:p,width:E,height:k});_=F.type,w=F.dataFormat,S=F.compressed,E=F.width,k=F.height;var I=this.gl;I.bindTexture(this.target,this.handle);var P=null,D=this._getDataType({data:p,compressed:S});if(p=D.data,P=D.dataType,Object(d["a"])(this.gl,O,(function(){switch(P){case"null":I.texImage2D(n,o,u,E,k,l,w,_,p);break;case"typed-array":I.texImage2D(n,o,u,E,k,l,w,_,p,v);break;case"buffer":Object(h["a"])(I),I.bindBuffer(35052,p.handle||p),I.texImage2D(n,o,u,E,k,l,w,_,v),I.bindBuffer(35052,null);break;case"browser-object":Object(h["d"])(I)?I.texImage2D(n,o,u,E,k,l,w,_,p):I.texImage2D(n,o,u,w,_,p);break;case"compressed":I.compressedTexImage2D(n,o,u,E,k,l,p);break;default:Object(m["a"])(!1,"Unknown image data type")}})),p&&p.byteLength)this._trackAllocatedMemory(p.byteLength,"Texture");else{var R=f["a"][this.dataFormat]||4,B=f["c"][this.type]||1;this._trackAllocatedMemory(this.width*this.height*R*B,"Texture")}return this.loaded=!0,this}},{key:"setSubImageData",value:function(e){var t=this,n=e.target,r=void 0===n?this.target:n,a=e.pixels,i=void 0===a?null:a,o=e.data,c=void 0===o?null:o,u=e.x,s=void 0===u?0:u,f=e.y,v=void 0===f?0:f,g=e.width,O=void 0===g?this.width:g,y=e.height,p=void 0===y?this.height:y,j=e.level,_=void 0===j?0:j,A=e.format,E=void 0===A?this.format:A,x=e.type,k=void 0===x?this.type:x,T=e.dataFormat,w=void 0===T?this.dataFormat:T,L=e.compressed,S=void 0!==L&&L,F=e.offset,I=void 0===F?0:F,P=e.border,D=(void 0===P&&this.border,e.parameters),R=void 0===D?{}:D,B=this._deduceParameters({format:E,type:k,dataFormat:w,compressed:S,data:c,width:O,height:p});if(k=B.type,w=B.dataFormat,S=B.compressed,O=B.width,p=B.height,Object(m["a"])(0===this.depth,"texSubImage not supported for 3D textures"),c||(c=i),c&&c.data){var C=c;c=C.data,O=C.shape[0],p=C.shape[1]}c instanceof l["a"]&&(c=c.handle),this.gl.bindTexture(this.target,this.handle),Object(d["a"])(this.gl,R,(function(){S?t.gl.compressedTexSubImage2D(r,_,s,v,O,p,E,c):null===c?t.gl.texSubImage2D(r,_,s,v,O,p,w,k,null):ArrayBuffer.isView(c)?t.gl.texSubImage2D(r,_,s,v,O,p,w,k,c,I):c instanceof b["b"]?(Object(h["a"])(t.gl),t.gl.bindBuffer(35052,c),t.gl.texSubImage2D(r,_,s,v,O,p,w,k,I),t.gl.bindBuffer(35052,null)):Object(h["d"])(t.gl)?t.gl.texSubImage2D(r,_,s,v,O,p,w,k,c):t.gl.texSubImage2D(r,_,s,v,w,k,c)})),this.gl.bindTexture(this.target,null)}},{key:"copyFramebuffer",value:function(){return g["a"].error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"getActiveUnit",value:function(){return this.gl.getParameter(34016)-33984}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,this.handle),e}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.textureUnit,t=this.gl;return void 0!==e&&(this.textureUnit=e,t.activeTexture(33984+e)),t.bindTexture(this.target,null),e}},{key:"_getDataType",value:function(e){var t=e.data,n=e.compressed,r=void 0!==n&&n;return r?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof l["a"]?{data:t.handle,dataType:"buffer"}:t instanceof b["b"]?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}},{key:"_deduceParameters",value:function(e){var t=e.format,n=e.data,r=e.width,a=e.height,i=e.dataFormat,o=e.type,c=e.compressed,u=f["b"][t];i=i||u&&u.dataFormat,o=o||u&&u.types[0],c=c||u&&u.compressed;var s=this._deduceImageSize(n,r,a);return r=s.width,a=s.height,{dataFormat:i,type:o,compressed:c,width:r,height:a,format:t,data:n}}},{key:"_deduceImageSize",value:function(e,t,n){var r;return r="undefined"!==typeof ImageData&&e instanceof ImageData?{width:e.width,height:e.height}:"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?{width:e.naturalWidth,height:e.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?{width:e.width,height:e.height}:"undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement?{width:e.videoWidth,height:e.videoHeight}:e?{width:t,height:n}:{width:t>=0?t:1,height:n>=0?n:1},Object(m["a"])(r,"Could not deduced texture size"),Object(m["a"])(void 0===t||r.width===t,"Deduced texture width does not match supplied width"),Object(m["a"])(void 0===n||r.height===n,"Deduced texture height does not match supplied height"),r}},{key:"_createHandle",value:function(){return this.gl.createTexture()}},{key:"_deleteHandle",value:function(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}},{key:"_getParameter",value:function(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);var t=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),t}}},{key:"_setParameter",value:function(e,t){switch(this.gl.bindTexture(this.target,this.handle),t=this._getNPOTParam(e,t),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,t);break;case 4096:case 4097:Object(m["a"])(!1);break;default:this.gl.texParameteri(this.target,e,t);break}return this.gl.bindTexture(this.target,null),this}},{key:"_isNPOT",value:function(){return!Object(h["d"])(this.gl)&&(!(!this.width||!this.height)&&(!Object(v["b"])(this.width)||!Object(v["b"])(this.height)))}},{key:"_updateForNPOT",value:function(e){void 0===e[this.gl.TEXTURE_MIN_FILTER]&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===e[this.gl.TEXTURE_WRAP_S]&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===e[this.gl.TEXTURE_WRAP_T]&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}},{key:"_getNPOTParam",value:function(e,t){if(this._isNPOT())switch(e){case 10241:-1===O.indexOf(t)&&(t=9729);break;case 10242:case 10243:33071!==t&&(t=33071);break;default:break}return t}}]),t}(s["a"])},"9f85":function(e,t,n){n.d(t,"a",(function(){return m}));var r,a=n("d4ec"),i=n("99de"),o=n("7e84"),c=n("257e"),u=n("bee2"),s=n("262e"),l=n("2fc2"),f=n("ade3"),d="EXT_color_buffer_float",h=(r={},Object(f["a"])(r,33189,{bpp:2}),Object(f["a"])(r,33190,{gl2:!0,bpp:3}),Object(f["a"])(r,36012,{gl2:!0,bpp:4}),Object(f["a"])(r,36168,{bpp:1}),Object(f["a"])(r,34041,{bpp:4}),Object(f["a"])(r,35056,{gl2:!0,bpp:4}),Object(f["a"])(r,36013,{gl2:!0,bpp:5}),Object(f["a"])(r,32854,{bpp:2}),Object(f["a"])(r,36194,{bpp:2}),Object(f["a"])(r,32855,{bpp:2}),Object(f["a"])(r,33321,{gl2:!0,bpp:1}),Object(f["a"])(r,33330,{gl2:!0,bpp:1}),Object(f["a"])(r,33329,{gl2:!0,bpp:1}),Object(f["a"])(r,33332,{gl2:!0,bpp:2}),Object(f["a"])(r,33331,{gl2:!0,bpp:2}),Object(f["a"])(r,33334,{gl2:!0,bpp:4}),Object(f["a"])(r,33333,{gl2:!0,bpp:4}),Object(f["a"])(r,33323,{gl2:!0,bpp:2}),Object(f["a"])(r,33336,{gl2:!0,bpp:2}),Object(f["a"])(r,33335,{gl2:!0,bpp:2}),Object(f["a"])(r,33338,{gl2:!0,bpp:4}),Object(f["a"])(r,33337,{gl2:!0,bpp:4}),Object(f["a"])(r,33340,{gl2:!0,bpp:8}),Object(f["a"])(r,33339,{gl2:!0,bpp:8}),Object(f["a"])(r,32849,{gl2:!0,bpp:3}),Object(f["a"])(r,32856,{gl2:!0,bpp:4}),Object(f["a"])(r,32857,{gl2:!0,bpp:4}),Object(f["a"])(r,36220,{gl2:!0,bpp:4}),Object(f["a"])(r,36238,{gl2:!0,bpp:4}),Object(f["a"])(r,36975,{gl2:!0,bpp:4}),Object(f["a"])(r,36214,{gl2:!0,bpp:8}),Object(f["a"])(r,36232,{gl2:!0,bpp:8}),Object(f["a"])(r,36226,{gl2:!0,bpp:16}),Object(f["a"])(r,36208,{gl2:!0,bpp:16}),Object(f["a"])(r,33325,{gl2:d,bpp:2}),Object(f["a"])(r,33327,{gl2:d,bpp:4}),Object(f["a"])(r,34842,{gl2:d,bpp:8}),Object(f["a"])(r,33326,{gl2:d,bpp:4}),Object(f["a"])(r,33328,{gl2:d,bpp:8}),Object(f["a"])(r,34836,{gl2:d,bpp:16}),Object(f["a"])(r,35898,{gl2:d,bpp:4}),r),b=n("4945"),v=n("0b1c");function g(e,t,n){var r=n[t];if(!r)return!1;var a=Object(b["d"])(e)&&r.gl2||r.gl1;return"string"===typeof a?e.getExtension(a):a}var m=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(a["a"])(this,t),n=Object(i["a"])(this,Object(o["a"])(t).call(this,e,r)),n.initialize(r),Object.seal(Object(c["a"])(n)),n}return Object(s["a"])(t,e),Object(u["a"])(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.format;return!n||g(e,n,h)}},{key:"getSamplesForFormat",value:function(e,t){var n=t.format;return e.getInternalformatParameter(36161,n,32937)}}]),Object(u["a"])(t,[{key:"initialize",value:function(e){var t=e.format,n=e.width,r=void 0===n?1:n,a=e.height,i=void 0===a?1:a,o=e.samples,c=void 0===o?0:o;return Object(v["a"])(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==c&&Object(b["d"])(this.gl)?this.gl.renderbufferStorageMultisample(36161,c,t,r,i):this.gl.renderbufferStorage(36161,t,r,i),this.format=t,this.width=r,this.height=i,this.samples=c,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*h[this.format].bpp),this}},{key:"resize",value:function(e){var t=e.width,n=e.height;return t!==this.width||n!==this.height?this.initialize({width:t,height:n,format:this.format,samples:this.samples}):this}},{key:"_createHandle",value:function(){return this.gl.createRenderbuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_bindHandle",value:function(e){this.gl.bindRenderbuffer(36161,e)}},{key:"_syncHandle",value:function(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}},{key:"_getParameter",value:function(e){this.gl.bindRenderbuffer(36161,this.handle);var t=this.gl.getRenderbufferParameter(36161,e);return t}}]),t}(l["a"])},a511:function(e,t,n){n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return g}));var r=n("3835"),a=n("84fd"),i=n("4945"),o=n("0b1c"),c=256,u=1024,s=16384,l=6144,f=6145,d=6146,h=34041,b="clear: bad arguments";function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,r=void 0===n?null:n,i=t.color,l=void 0===i?null:i,f=t.depth,d=void 0===f?null:f,h=t.stencil,v=void 0===h?null:h,g={};r&&(g.framebuffer=r);var m=0;l&&(m|=s,!0!==l&&(g.clearColor=l)),d&&(m|=c,!0!==d&&(g.clearDepth=d)),v&&(m|=u,!0!==d&&(g.clearStencil=d)),Object(o["a"])(0!==m,b),Object(a["a"])(e,g,(function(){e.clear(m)}))}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.framebuffer,c=void 0===n?null:n,u=t.buffer,s=void 0===u?l:u,v=t.drawBuffer,g=void 0===v?0:v,m=t.value,O=void 0===m?[0,0,0,0]:m;Object(i["a"])(e),Object(a["a"])(e,{framebuffer:c},(function(){switch(s){case l:switch(O.constructor){case Int32Array:e.clearBufferiv(s,g,O);break;case Uint32Array:e.clearBufferuiv(s,g,O);break;case Float32Array:default:e.clearBufferfv(s,g,O)}break;case f:e.clearBufferfv(f,0,[O]);break;case d:e.clearBufferiv(d,0,[O]);break;case h:var t=Object(r["a"])(O,2),n=t[0],a=t[1];e.clearBufferfi(h,0,n,a);break;default:Object(o["a"])(!1,b)}}))}},a698:function(e,t,n){n.d(t,"a",(function(){return b}));var r=n("d4ec"),a=n("bee2"),i=n("4f61"),o=n("b1cf"),c=n("f9d4"),u=n("b206"),s=n("e7ea"),l=n("0b1c"),f="VertexArray: attributes must be Buffers or constants (i.e. typed array)",d=/^(.+)__LOCATION_([0-9]+)$/,h=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"],b=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r["a"])(this,e);var a=n.id||n.program&&n.program.id;this.id=a,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=c["a"].isSupported(t)?new c["a"](t):c["a"].getDefaultArray(t),Object(u["a"])(this,"VertexArray","v6.0",h),this.initialize(n),Object.seal(this)}return Object(a["a"])(e,[{key:"delete",value:function(){this.buffer&&this.buffer["delete"]()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}},{key:"reset",value:function(){this.elements=null,this.elementsAccessor=null;var e=this.vertexArrayObject.MAX_ATTRIBUTES;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}},{key:"setProps",value:function(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}},{key:"clearDrawParams",value:function(){this.drawParams=null}},{key:"getDrawParams",value:function(e){return this.drawParams=this.drawParams||this._updateDrawParams(),Object.assign({},this.drawParams,e)}},{key:"setAttributes",value:function(e){var t=this;return Object.assign(this.attributes,e),this.vertexArrayObject.bind((function(){for(var n in e){var r=e[n];t._setAttribute(n,r)}t.gl.bindBuffer(34962,null)})),this}},{key:"setElementBuffer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.elements=e,this.elementsAccessor=t,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setElementBuffer(e,t),this}},{key:"setBuffer",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(34963===t.target)return this.setElementBuffer(t,n);var r=this._resolveLocationAndAccessor(e,t,t.accessor,n),a=r.location,i=r.accessor;return a>=0&&(this.values[a]=t,this.accessors[a]=i,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.setBuffer(a,t,i)),this}},{key:"setConstant",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this._resolveLocationAndAccessor(e,t,Object.assign({size:t.length},n)),a=r.location,i=r.accessor;return a>=0&&(t=this.vertexArrayObject._normalizeConstantArrayValue(t,i),this.values[a]=t,this.accessors[a]=i,this.clearDrawParams(),this.vertexArrayObject.isDefaultArray||this.vertexArrayObject.enable(a,!1)),this}},{key:"unbindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&(e.vertexArrayObject.isDefaultArray||e.vertexArrayObject.setElementBuffer(null)),e.buffer=e.buffer||new o["a"](e.gl,{accessor:{size:4}});for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++)e.values[t]instanceof o["a"]&&(e.gl.disableVertexAttribArray(t),e.gl.bindBuffer(34962,e.buffer.handle),e.gl.vertexAttribPointer(t,1,5126,!1,0,0))})),this}},{key:"bindBuffers",value:function(){var e=this;return this.vertexArrayObject.bind((function(){e.elements&&e.setElementBuffer(e.elements);for(var t=0;t<e.vertexArrayObject.MAX_ATTRIBUTES;t++){var n=e.values[t];n instanceof o["a"]&&e.setBuffer(t,n)}})),this}},{key:"bindForDraw",value:function(e,t,n){var r,a=this;return this.vertexArrayObject.bind((function(){a._setConstantAttributes(e,t),a.vertexArrayObject.hasVertexArrays||a.bindBuffers(),r=n(),a.vertexArrayObject.hasVertexArrays||a.unbindBuffers()})),r}},{key:"_resolveLocationAndAccessor",value:function(e,t,n,r){var a=this,o=this._getAttributeIndex(e),c=o.location,u=o.name;if(!Number.isFinite(c)||c<0)return this.unused[e]=t,s["a"].once(3,(function(){return"unused value ".concat(e," in ").concat(a.id)}))(),this;var f=this._getAttributeInfo(u||c);if(!f)return{location:-1,accessor:null};var d=i["a"].resolve(f.accessor,n,r),h=d.size,b=d.type;return Object(l["a"])(Number.isFinite(h)&&Number.isFinite(b)),{location:c,accessor:d}}},{key:"_getAttributeInfo",value:function(e){return this.configuration&&this.configuration.getAttributeInfo(e)}},{key:"_getAttributeIndex",value:function(e){var t=Number(e);if(Number.isFinite(t))return{location:t};var n=d.exec(e),r=n?n[1]:e,a=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(r)+a,name:r}:{location:-1}}},{key:"_setAttribute",value:function(e,t){if(t instanceof o["a"])this.setBuffer(e,t);else if(Array.isArray(t)&&t.length&&t[0]instanceof o["a"]){var n=t[0],r=t[1];this.setBuffer(e,n,r)}else if(ArrayBuffer.isView(t)||Array.isArray(t)){var a=t;this.setConstant(e,a)}else{if(!(t.buffer instanceof o["a"]))throw new Error(f);var i=t;this.setBuffer(e,i.buffer,i)}}},{key:"_setConstantAttributes",value:function(e,t){var n=Math.max(0|e,0|t),r=this.values[0];ArrayBuffer.isView(r)&&this._setConstantAttributeZero(r,n);for(var a=1;a<this.vertexArrayObject.MAX_ATTRIBUTES;a++)r=this.values[a],ArrayBuffer.isView(r)&&this._setConstantAttribute(a,r)}},{key:"_setConstantAttributeZero",value:function(e,t){if(c["a"].isSupported(this.gl,{constantAttributeZero:!0}))this._setConstantAttribute(0,e);else{var n=this.vertexArrayObject.getConstantBuffer(t,e);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}}},{key:"_setConstantAttribute",value:function(e,t){c["a"].setConstant(this.gl,e,t),this.vertexArrayObject.isDefaultArray&&this.vertexArrayObject.enable(e,!1)}},{key:"_updateDrawParams",value:function(){for(var e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0},t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this._updateDrawParamsForLocation(e,t);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}},{key:"_updateDrawParamsForLocation",value:function(e,t){var n=this.values[t],r=this.accessors[t];if(n){var a=r.divisor,i=a>0;if(e.isInstanced=e.isInstanced||i,n instanceof o["a"]){var c=n;if(i){var u=c.getVertexCount(r);e.instanceCount=Math.min(e.instanceCount,u)}else{var s=c.getVertexCount(r);e.vertexCount=Math.min(e.vertexCount,s)}}}}},{key:"setElements",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return s["a"].deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,t)}}]),e}()},a7bc:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s}));n("b1cf");var r=n("d752"),a=(n("97a3"),n("84fd"),n("4945"),n("07df")),i=n("1ebe"),o=n("31d5"),c=n("0b1c");n("e7ea");function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceX,r=void 0===n?0:n,i=t.sourceY,o=void 0===i?0:i,u=t.sourceFormat,s=void 0===u?6408:u,d=t.sourceAttachment,h=void 0===d?36064:d,b=t.target,v=void 0===b?null:b,g=t.sourceWidth,m=t.sourceHeight,O=t.sourceType,y=l(e),p=y.framebuffer,j=y.deleteFramebuffer;Object(c["a"])(p);var _=p.gl,A=p.handle,E=p.attachments;g=g||p.width,m=m||p.height,36064===h&&null===A&&(h=1028),Object(c["a"])(E[h]),O=O||E[h].type,v=f(v,O,s,g,m),O=O||Object(a["b"])(v);var x=_.bindFramebuffer(36160,A);return _.readPixels(r,o,g,m,s,O,v),_.bindFramebuffer(36160,x||null),j&&p["delete"](),v}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.sourceAttachment,r=void 0===n?36064:n,i=t.targetMaxHeight,o=void 0===i?Number.MAX_SAFE_INTEGER:i,c=u(e,{sourceAttachment:r}),s=e.width,l=e.height;while(l>o){var f=Object(a["d"])({data:c,width:s,height:l});c=f.data,s=f.width,l=f.height}Object(a["a"])({data:c,width:s,height:l});var d=document.createElement("canvas");d.width=s,d.height=l;var h=d.getContext("2d"),b=h.createImageData(s,l);return b.data.set(c),h.putImageData(b,0,0),d.toDataURL()}function l(e){return e instanceof r["a"]?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:Object(o["a"])(e),deleteFramebuffer:!0}}function f(e,t,n,r,o){if(e)return e;t=t||5121;var c=Object(a["c"])(t,{clamped:!1}),u=Object(i["a"])(n);return new c(r*o*u)}},acc8:function(e,t,n){n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r="vs",a="fs"},ae9c:function(e,t,n){n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return h}));var r,a=n("ade3"),i="#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n",o="#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth();\n#endif\n",c=n("acc8"),u=(n("bb30"),r={},Object(a["a"])(r,c["b"],i),Object(a["a"])(r,c["a"],o),r),s="__LUMA_INJECT_DECLARATIONS__",l=/void main\s*\([^)]*\)\s*\{\n?/,f=/}\n?[^{}]*$/,d=[];function h(e,t,n,r){var a=t===c["b"],i=function(t){var r=n[t];r.sort((function(e,t){return e.order-t.order})),d.length=r.length;for(var i=0,o=r.length;i<o;++i)d[i]=r[i].injection;var c="".concat(d.join("\n"),"\n");switch(t){case"vs:#decl":a&&(e=e.replace(s,c));break;case"vs:#main-start":a&&(e=e.replace(l,(function(e){return e+c})));break;case"vs:#main-end":a&&(e=e.replace(f,(function(e){return c+e})));break;case"fs:#decl":a||(e=e.replace(s,c));break;case"fs:#main-start":a||(e=e.replace(l,(function(e){return e+c})));break;case"fs:#main-end":a||(e=e.replace(f,(function(e){return c+e})));break;default:e=e.replace(t,(function(e){return e+c}))}};for(var o in n)i(o);return e=e.replace(s,""),r&&(e=e.replace(/\}\s*$/,(function(e){return e+u[t]}))),e}},aed6:function(e,t,n){n.d(t,"a",(function(){return d}));var r=n("d4ec"),a=n("bee2"),i=n("208c"),o=n("8930"),c=n("e7ea"),u=n("95a8"),s=(n("7946"),"7.3.1"),l="set luma.log.priority=1 (or higher) to trace rendering",f=function(){function e(){Object(r["a"])(this,e),this.stats=new Map}return Object(a["a"])(e,[{key:"get",value:function(e){return this.stats.has(e)||this.stats.set(e,new u["a"]({id:e})),this.stats.get(e)}}]),e}(),d=new f;if(o["a"].luma&&o["a"].luma.VERSION!==s)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(o["a"].luma.VERSION," vs ").concat(s));o["a"].luma||(i["a"]&&c["a"].log(1,"luma.gl ".concat(s," - ").concat(l))(),o["a"].luma=o["a"].luma||{VERSION:s,version:s,log:c["a"],stats:d,globals:{modules:{},nodeIO:{}}});o["a"].luma},b1cf:function(e,t,n){n.d(t,"a",(function(){return p}));var r=n("d4ec"),a=n("bee2"),i=n("99de"),o=n("7e84"),c=n("257e"),u=n("262e"),s=n("2fc2"),l=n("4f61"),f=n("4945"),d=n("07df"),h=n("2c4f"),b=n("0b1c"),v=n("e7ea"),g=10,m={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},O={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:m},y={removedProps:m},p=function(e){function t(e){var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(r["a"])(this,t),n=Object(i["a"])(this,Object(o["a"])(t).call(this,e,a)),n.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),n.target=a.target||(n.gl.webgl2?36662:34962),n.initialize(a),Object.seal(Object(c["a"])(n)),n}return Object(u["a"])(t,e),Object(a["a"])(t,[{key:"getElementCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l["a"].getBytesPerElement(e))}},{key:"getVertexCount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.accessor;return Math.round(this.byteLength/l["a"].getBytesPerVertex(e))}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=Object(h["a"])("Buffer",e,O),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data):this._setByteLength(e.byteLength||0),this}},{key:"setProps",value:function(e){return e=Object(h["a"])("Buffer",e,y),"accessor"in e&&this.setAccessor(e.accessor),this}},{key:"setAccessor",value:function(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new l["a"](e),this}},{key:"reallocate",value:function(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}},{key:"setData",value:function(e){return this.initialize(e)}},{key:"subData",value:function(e){ArrayBuffer.isView(e)&&(e={data:e});var t=e,n=t.data,r=t.offset,a=void 0===r?0:r,i=t.srcOffset,o=void 0===i?0:i,c=e.byteLength||e.length;Object(b["a"])(n);var u=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(u,this.handle),0!==o||void 0!==c?(Object(f["a"])(this.gl),this.gl.bufferSubData(this.target,a,n,o,c)):this.gl.bufferSubData(u,a,n),this.gl.bindBuffer(u,null),this.debugData=null,this._inferType(n),this}},{key:"copyData",value:function(e){var t=e.sourceBuffer,n=e.readOffset,r=void 0===n?0:n,a=e.writeOffset,i=void 0===a?0:a,o=e.size,c=this.gl;return Object(f["a"])(c),c.bindBuffer(36662,t.handle),c.bindBuffer(36663,this.handle),c.copyBufferSubData(36662,36663,r,i,o),c.bindBuffer(36662,null),c.bindBuffer(36663,null),this.debugData=null,this}},{key:"getData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dstData,n=void 0===t?null:t,r=e.srcByteOffset,a=void 0===r?0:r,i=e.dstOffset,o=void 0===i?0:i,c=e.length,u=void 0===c?0:c;Object(f["a"])(this.gl);var s,l,h=Object(d["c"])(this.accessor.type||5126,{clamped:!1}),v=this._getAvailableElementCount(a),g=o;n?(l=n.length,s=l-g):(s=Math.min(v,u||v),l=g+s);var m=Math.min(v,s);return u=u||m,Object(b["a"])(u<=m),n=n||new h(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,a,n,o,u),this.gl.bindBuffer(36662,null),n}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,a=void 0===r?this.accessor&&this.accessor.index:r,i=e.offset,o=void 0===i?0:i,c=e.size;return 35345===n||35982===n?void 0!==c?this.gl.bindBufferRange(n,a,this.handle,o,c):(Object(b["a"])(0===o),this.gl.bindBufferBase(n,a,this.handle)):this.gl.bindBuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?this.target:t,r=e.index,a=void 0===r?this.accessor&&this.accessor.index:r,i=35345===n||35982===n;return i?this.gl.bindBufferBase(n,a,null):this.gl.bindBuffer(n,null),this}},{key:"getDebugData",value:function(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(g,this.byteLength)}),{data:this.debugData,changed:!0})}},{key:"invalidateDebugData",value:function(){this.debugData=null}},{key:"_setData",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(b["a"])(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();var n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,e,t),this.gl.bindBuffer(n,null),this.usage=t,this.debugData=e.slice(0,g),this.bytesUsed=e.byteLength,this._trackAllocatedMemory(e.byteLength);var r=Object(d["b"])(e);return Object(b["a"])(r),this.setAccessor(new l["a"](this.accessor,{type:r})),this}},{key:"_setByteLength",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.usage;Object(b["a"])(e>=0),this._trackDeallocatedMemory();var n=e;0===e&&(n=new Float32Array(0));var r=this._getTarget();return this.gl.bindBuffer(r,this.handle),this.gl.bufferData(r,n,t),this.gl.bindBuffer(r,null),this.usage=t,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}},{key:"_getTarget",value:function(){return this.gl.webgl2?36663:this.target}},{key:"_getAvailableElementCount",value:function(e){var t=Object(d["c"])(this.accessor.type||5126,{clamped:!1}),n=e/t.BYTES_PER_ELEMENT;return this.getElementCount()-n}},{key:"_inferType",value:function(e){this.accessor.type||this.setAccessor(new l["a"](this.accessor,{type:Object(d["b"])(e)}))}},{key:"_createHandle",value:function(){return this.gl.createBuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}},{key:"_getParameter",value:function(e){this.gl.bindBuffer(this.target,this.handle);var t=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),t}},{key:"setByteLength",value:function(e){return v["a"].deprecated("setByteLength","reallocate")(),this.reallocate(e)}},{key:"updateAccessor",value:function(e){return v["a"].deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new l["a"](this.accessor,e),this}},{key:"type",get:function(){return v["a"].deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}},{key:"bytes",get:function(){return v["a"].deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}}]),t}(s["a"])},b4c9:function(e,t,n){n.d(t,"a",(function(){return c}));var r,a=n("ade3"),i=n("d752"),o=n("7f94"),c={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"},u=null;function s(e){if(null!==u)return u;var t=new o["a"](e,{format:6408,type:5126,dataFormat:6408}),n=new i["a"](e,{id:"test-framebuffer",check:!1,attachments:Object(a["a"])({},36064,t)}),r=n.getStatus();return t["delete"](),n["delete"](),u=36053===r,u}t["b"]=(r={},Object(a["a"])(r,c.WEBGL2,[!1,!0]),Object(a["a"])(r,c.VERTEX_ARRAY_OBJECT,["OES_vertex_array_object",!0]),Object(a["a"])(r,c.TIMER_QUERY,["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"]),Object(a["a"])(r,c.INSTANCED_RENDERING,["ANGLE_instanced_arrays",!0]),Object(a["a"])(r,c.MULTIPLE_RENDER_TARGETS,["WEBGL_draw_buffers",!0]),Object(a["a"])(r,c.ELEMENT_INDEX_UINT32,["OES_element_index_uint",!0]),Object(a["a"])(r,c.BLEND_EQUATION_MINMAX,["EXT_blend_minmax",!0]),Object(a["a"])(r,c.FLOAT_BLEND,["EXT_float_blend"]),Object(a["a"])(r,c.COLOR_ENCODING_SRGB,["EXT_sRGB",!0]),Object(a["a"])(r,c.TEXTURE_DEPTH,["WEBGL_depth_texture",!0]),Object(a["a"])(r,c.TEXTURE_FLOAT,["OES_texture_float",!0]),Object(a["a"])(r,c.TEXTURE_HALF_FLOAT,["OES_texture_half_float",!0]),Object(a["a"])(r,c.TEXTURE_FILTER_LINEAR_FLOAT,["OES_texture_float_linear"]),Object(a["a"])(r,c.TEXTURE_FILTER_LINEAR_HALF_FLOAT,["OES_texture_half_float_linear"]),Object(a["a"])(r,c.TEXTURE_FILTER_ANISOTROPIC,["EXT_texture_filter_anisotropic"]),Object(a["a"])(r,c.COLOR_ATTACHMENT_RGBA32F,[s,"EXT_color_buffer_float"]),Object(a["a"])(r,c.COLOR_ATTACHMENT_FLOAT,[!1,"EXT_color_buffer_float"]),Object(a["a"])(r,c.COLOR_ATTACHMENT_HALF_FLOAT,["EXT_color_buffer_half_float"]),Object(a["a"])(r,c.GLSL_FRAG_DATA,["WEBGL_draw_buffers",!0]),Object(a["a"])(r,c.GLSL_FRAG_DEPTH,["EXT_frag_depth",!0]),Object(a["a"])(r,c.GLSL_DERIVATIVES,["OES_standard_derivatives",!0]),Object(a["a"])(r,c.GLSL_TEXTURE_LOD,["EXT_shader_texture_lod",!0]),r)},b709:function(e,t,n){function r(e){var t=e.getParameter(7936),n=e.getParameter(7937),r=e.getExtension("WEBGL_debug_renderer_info"),a=r&&e.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),i=r&&e.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:a||t,renderer:i||n,vendorMasked:t,rendererMasked:n,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}n.d(t,"a",(function(){return r}))},b7ea:function(e,t,n){n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return u}));var r=n("2e19");n("d5e2"),n("73eb");function a(e,t){var n={};for(var a in t){var i=Number(a),o=r["d"][a];o&&("string"===typeof o?n[o]=!0:o(e,t[a],i))}var c=e.state&&e.state.cache;if(c){var u=Object.assign({},c,t);for(var s in n){var l=r["a"][s];l(e,u)}}}function i(e,t){var n=r["c"][t];return n?n(e,Number(t)):e.getParameter(Number(t))}function o(e,t){t=t||r["b"];var n=Array.isArray(t)?t:Object.keys(t),a={},o=!0,c=!1,u=void 0;try{for(var s,l=n[Symbol.iterator]();!(o=(s=l.next()).done);o=!0){var f=s.value;a[f]=i(e,f)}}catch(d){c=!0,u=d}finally{try{o||null==l["return"]||l["return"]()}finally{if(c)throw u}}return a}function c(e){return Object.assign({},r["b"],{})}function u(e){a(e,c(e))}},b980:function(e,t,n){n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return d}));var r,a,i,o=n("ade3"),c=n("4945"),u=(r={},Object(o["a"])(r,6407,{dataFormat:6407,types:[5121,33635]}),Object(o["a"])(r,6408,{dataFormat:6408,types:[5121,32819,32820]}),Object(o["a"])(r,6406,{dataFormat:6406,types:[5121]}),Object(o["a"])(r,6409,{dataFormat:6409,types:[5121]}),Object(o["a"])(r,6410,{dataFormat:6410,types:[5121]}),Object(o["a"])(r,33326,{dataFormat:6403,types:[5126],gl2:!0}),Object(o["a"])(r,33328,{dataFormat:33319,types:[5126],gl2:!0}),Object(o["a"])(r,34837,{dataFormat:6407,types:[5126],gl2:!0}),Object(o["a"])(r,34836,{dataFormat:6408,types:[5126],gl2:!0}),r),s=(a={},Object(o["a"])(a,6403,1),Object(o["a"])(a,36244,1),Object(o["a"])(a,33319,2),Object(o["a"])(a,33320,2),Object(o["a"])(a,6407,3),Object(o["a"])(a,36248,3),Object(o["a"])(a,6408,4),Object(o["a"])(a,36249,4),Object(o["a"])(a,6402,1),Object(o["a"])(a,34041,1),Object(o["a"])(a,6406,1),Object(o["a"])(a,6409,1),Object(o["a"])(a,6410,2),a),l=(i={},Object(o["a"])(i,5126,4),Object(o["a"])(i,5125,4),Object(o["a"])(i,5124,4),Object(o["a"])(i,5123,2),Object(o["a"])(i,5122,2),Object(o["a"])(i,5131,2),Object(o["a"])(i,5120,1),Object(o["a"])(i,5121,1),i);function f(e,t){var n=u[t];if(!n)return!1;if(void 0===n.gl1&&void 0===n.gl2)return!0;var r=Object(c["d"])(e)&&n.gl2||n.gl1;return"string"===typeof r?e.getExtension(r):r}function d(e,t){var n=u[t];switch(n&&n.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}},bb30:function(e,t,n){function r(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}n.d(t,"a",(function(){return r}))},bc08:function(e,t,n){n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return p}));var r=n("be94"),a=n("53ff"),i=n("1565"),o="Failed to create WebGL context in Node.js, headless gl not available",c="Failed to create WebGL context in Node.js, headless gl returned null";function u(e){var t=e.width,n=e.height,r=e.webgl1,a=e.webgl2,u=e.onError;if(a&&!r)return u("headless-gl does not support WebGL2");if(!i["c"])return u(o);var s=Object(i["c"])(t,n,e);return s||u(c)}var s=n("8da4");function l(e,t){var n=t.onError,r=void 0===n?function(e){return null}:n,a=function(e){return r("WebGL context: ".concat(e.statusMessage||"error"))};e.addEventListener("webglcontextcreationerror",a,!1);var i=t.webgl1,o=void 0===i||i,c=t.webgl2,u=void 0===c||c,s=null;return u&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",a,!1),s||r("Failed to create ".concat(u&&!o?"WebGL2":"WebGL"," context"))}var f=n("b709"),d=(n("0b1c"),n("208c")),h=n("e7ea"),b=n("c830"),v=n("8930");function g(e){return Boolean(e&&2===e._version)}var m={webgl2:!0,webgl1:!0,throwOnFailure:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e=Object.assign({},m,e);var t,n=e,a=n.width,i=n.height;function o(t){if(e.throwOnError)throw new Error(t);return null}if(d["a"]){var c=e,f=c.canvas,h=Object(s["a"])({canvas:f,width:a,height:i,onError:o});t=l(h,e)}else t=u(Object(r["a"])({},e,{width:a,height:i,onError:o}));return t?(t=y(t,e),j(t),t):null}function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e._instrumented)return e;e._version=e._version||_(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},m,t);var n=t,r=n.manageState,i=n.debug;return r&&Object(a["a"])(e,{copyState:!1,log:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h["a"].log.apply(h["a"],[1].concat(t))()}}),d["a"]&&i&&(v["a"].makeDebugContext?(e=v["a"].makeDebugContext(e,t),h["a"].priority=Math.max(h["a"].priority,1)):h["a"].warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(e.canvas){var n=Object(b["a"])(t.useDevicePixels);A(e,n,t)}else{var r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}}function j(e){var t=g(e)?"WebGL2":"WebGL1",n=Object(f["a"])(e),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",a=e.debug?" debug":"";h["a"].info(1,"".concat(t).concat(a," context ").concat(r))()}function _(e){return"undefined"!==typeof i["a"]&&e instanceof i["a"]?2:1}function A(e,t,n){var r="width"in n?n.width:e.canvas.clientWidth||e.canvas.width||1,a="height"in n?n.height:e.canvas.clientHeight||e.canvas.height||1;e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};var i=e.luma.canvasSizeInfo;if(i.clientWidth!==r||i.clientHeight!==a||i.devicePixelRatio!==t){var o=t,c=Math.floor(r*o),u=Math.floor(a*o);e.canvas.width=c,e.canvas.height=u,e.drawingBufferWidth===c&&e.drawingBufferHeight===u||(h["a"].warn("Device pixel ratio clamped")(),o=Math.min(e.drawingBufferWidth/r,e.drawingBufferHeight/a),e.canvas.width=Math.floor(r*o),e.canvas.height=Math.floor(a*o)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:r,clientHeight:a,devicePixelRatio:t})}}},c49b:function(e,t,n){var r=n("7dc3"),a=new Float32Array([1,1,2]),i={lightDirection:a};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t={};return e.lightDirection&&(t.dirlight_uLightDirection=e.lightDirection),t}var c=null,u="uniform vec3 dirlight_uLightDirection;\nvec4 dirlight_filterColor(vec4 color) {\n  vec3 normal = project_getNormal_World();\n  float d = abs(dot(normalize(normal), normalize(dirlight_uLightDirection)));\n  return vec4(color.rgb * d, color.a);\n}\n";t["a"]={name:"dirlight",vs:c,fs:u,getUniforms:o,dependencies:[r["a"]]}},caae:function(e,t,n){n.d(t,"a",(function(){return i}));var r="#define SHADER_NAME luma_modular_vertex\n\n// object attributes\nattribute vec3 positions;\nattribute vec3 normals;\nattribute vec4 colors;\nattribute vec2 texCoords;\nattribute vec3 pickingColors;\n\nvoid main(void) {\n\n  // Set up position\n#ifdef MODULE_GEOMETRY\n  geometry_setPosition(positions);\n  geometry_setNormal(normals);\n#endif\n\n#ifdef MODULE_PROJECT\n  project_setPositionAndNormal_Model(positions, normals);\n  gl_Position = project_model_to_clipspace(positions);\n#endif\n\n  // Set up depth\n#ifdef MODULE_LOGDEPTH\n  logdepth_adjustPosition(gl_Position);\n#endif\n\n#ifdef MODULE_DIFFUSE\n  diffuse_setTextureCoordinate(texCoords);\n#endif\n\n  // Set up color calculations\n#ifdef MODULE_MATERIAL\n  material_setDiffuseColor(colors);\n  material_setDiffuseTextureCoordinates(texCoords);\n#endif\n\n#ifdef MODULE_LIGHTING\n  lighting_setPositionAndNormal(positions, normals);\n  lighting_apply_light(positions);\n  lighting_apply_reflection(positions);\n#endif\n\n#ifdef MODULE_PICKING\n  picking_setPickingColor(pickingColors);\n#endif\n\n}\n",a="#define SHADER_NAME luma-modular-fragment\n\nprecision highp float;\n\n// varyings\nvarying vec4 vColor;\n\nvoid main(){\n  gl_FragColor = vec4(1., 0., 1., 1.);\n\n#ifdef MODULE_DIFFUSE\n  gl_FragColor = diffuse_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_MATERIAL\n  gl_FragColor = material_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LIGHTING\n  gl_FragColor = lighting_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_FOG\n  gl_FragColor = fog_filterColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_PICKING\n  gl_FragColor = picking_filterHighlightColor(gl_FragColor);\n  gl_FragColor = picking_filterPickingColor(gl_FragColor);\n#endif\n\n#ifdef MODULE_LOGDEPTH\n  logdepth_setFragDepth(gl_Position);\n#endif\n}\n",i={vs:r,fs:a,uniforms:{}}},cbbc:function(e,t,n){function r(e){for(var t in e)return!1;return!0}function a(e){return Boolean(e&&2===e._version)}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}))},cf6e:function(e,t,n){n.d(t,"a",(function(){return i}));var r=n("ade3"),a=n("a1e8");function i(e){var t={},n="Accessors for ".concat(e.id),a=!0,i=!1,c=void 0;try{for(var u,s=e.attributeInfos[Symbol.iterator]();!(a=(u=s.next()).done);a=!0){var l=u.value;if(l){var f=o(l);t["in ".concat(f)]=Object(r["a"])({},n,JSON.stringify(l.accessor))}}}catch(y){i=!0,c=y}finally{try{a||null==s["return"]||s["return"]()}finally{if(i)throw c}}var d=!0,h=!1,b=void 0;try{for(var v,g=e.varyingInfos[Symbol.iterator]();!(d=(v=g.next()).done);d=!0){var m=v.value;if(m){var O=o(m);t["out ".concat(O)]=Object(r["a"])({},n,JSON.stringify(m.accessor))}}}catch(y){h=!0,b=y}finally{try{d||null==g["return"]||g["return"]()}finally{if(h)throw b}}return t}function o(e){var t=e.accessor,n=t.type,r=t.size,i=Object(a["b"])(n,r);return i?"".concat(i.name," ").concat(e.name):e.name}},d5e2:function(e,t,n){function r(e,t){if(e===t)return!0;var n=Array.isArray(e)||ArrayBuffer.isView(e),r=Array.isArray(t)||ArrayBuffer.isView(t);if(n&&r&&e.length===t.length){for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!1;return!0}return!1}n.d(t,"a",(function(){return r}))},d752:function(e,t,n){n.d(t,"a",(function(){return A}));var r=n("ade3"),a=n("3835"),i=n("d4ec"),o=n("99de"),c=n("257e"),u=n("7e84"),s=n("45eb"),l=n("bee2"),f=n("262e"),d=n("2fc2"),h=n("7f94"),b=n("9f85"),v=n("a511"),g=n("a7bc"),m=n("7779"),O=n("4945"),y=n("ae79"),p=n("0b1c"),j=n("e7ea"),_="Multiple render targets not supported",A=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(i["a"])(this,t),n=Object(o["a"])(this,Object(u["a"])(t).call(this,e,r)),n.width=null,n.height=null,n.attachments={},n.readBuffer=36064,n.drawBuffers=[36064],n.ownResources=[],n.initialize(r),Object.seal(Object(c["a"])(n)),n}return Object(f["a"])(t,e),Object(l["a"])(t,[{key:"MAX_COLOR_ATTACHMENTS",get:function(){return this.gl.getParameter(this.gl.MAX_COLOR_ATTACHMENTS)}},{key:"MAX_DRAW_BUFFERS",get:function(){return this.gl.getParameter(this.gl.MAX_DRAW_BUFFERS)}}],[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.colorBufferFloat,r=t.colorBufferHalfFloat,a=!0;return n&&(a=Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),r&&(a=a&&Boolean(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),a}},{key:"getDefaultFramebuffer",value:function(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new t(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}}]),Object(l["a"])(t,[{key:"initialize",value:function(e){var t=e.width,n=void 0===t?1:t,r=e.height,a=void 0===r?1:r,i=e.attachments,o=void 0===i?null:i,c=e.color,u=void 0===c||c,s=e.depth,l=void 0===s||s,f=e.stencil,d=void 0!==f&&f,h=e.check,b=void 0===h||h,v=e.readBuffer,g=e.drawBuffers;if(Object(p["a"])(n>=0&&a>=0,"Width and height need to be integers"),this.width=n,this.height=a,o)for(var m in o){var O=o[m],y=Array.isArray(O)?O[0]:O;y.resize({width:n,height:a})}else o=this._createDefaultAttachments(u,l,d,n,a);this.update({clearAttachments:!0,attachments:o,readBuffer:v,drawBuffers:g}),o&&b&&this.checkStatus()}},{key:"delete",value:function(){var e=!0,n=!1,r=void 0;try{for(var a,i=this.ownResources[Symbol.iterator]();!(e=(a=i.next()).done);e=!0){var o=a.value;o["delete"]()}}catch(c){n=!0,r=c}finally{try{e||null==i["return"]||i["return"]()}finally{if(n)throw r}}Object(s["a"])(Object(u["a"])(t.prototype),"delete",this).call(this)}},{key:"update",value:function(e){var t=e.attachments,n=void 0===t?{}:t,r=e.readBuffer,a=e.drawBuffers,i=e.clearAttachments,o=void 0!==i&&i,c=e.resizeAttachments,u=void 0===c||c;this.attach(n,{clearAttachments:o,resizeAttachments:u});var s=this.gl,l=s.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),a&&this._setDrawBuffers(a),s.bindFramebuffer(36160,l||null),this}},{key:"resize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,n=e.height;if(null===this.handle)return Object(p["a"])(void 0===t&&void 0===n),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;for(var r in void 0===t&&(t=this.gl.drawingBufferWidth),void 0===n&&(n=this.gl.drawingBufferHeight),t!==this.width&&n!==this.height&&j["a"].log(2,"Resizing framebuffer ".concat(this.id," to ").concat(t,"x").concat(n))(),this.attachments)this.attachments[r].resize({width:t,height:n});return this.width=t,this.height=n,this}},{key:"attach",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.clearAttachments,i=void 0!==r&&r,o=n.resizeAttachments,c=void 0===o||o,u={};i&&Object.keys(this.attachments).forEach((function(e){u[e]=null})),Object.assign(u,e);var s=this.gl.bindFramebuffer(36160,this.handle);for(var l in u){Object(p["a"])(void 0!==l,"Misspelled framebuffer binding point?");var f=Number(l),d=u[f],h=d;if(h)if(h instanceof b["a"])this._attachRenderbuffer({attachment:f,renderbuffer:h});else if(Array.isArray(d)){var v=Object(a["a"])(d,3),g=v[0],m=v[1],O=void 0===m?0:m,y=v[2],j=void 0===y?0:y;h=g,this._attachTexture({attachment:f,texture:g,layer:O,level:j})}else this._attachTexture({attachment:f,texture:h,layer:0,level:0});else this._unattach(f);c&&h&&h.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter((function(e){return!t.attachments[e]})).forEach((function(e){delete t.attachments[e]}))}},{key:"checkStatus",value:function(){this.gl;var e=this.getStatus();if(36053!==e)throw new Error(x(e));return this}},{key:"getStatus",value:function(){var e=this.gl,t=e.bindFramebuffer(36160,this.handle),n=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,t||null),n}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.color,n=e.depth,r=e.stencil,a=e.drawBuffers,i=void 0===a?[]:a,o=this.gl.bindFramebuffer(36160,this.handle);return(t||n||r)&&Object(v["a"])(this.gl,{color:t,depth:n,stencil:r}),i.forEach((function(e,t){Object(v["b"])({drawBuffer:t,value:e})})),this.gl.bindFramebuffer(36160,o||null),this}},{key:"readPixels",value:function(){return j["a"].error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}},{key:"readPixelsToBuffer",value:function(){return j["a"].error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}},{key:"copyToDataUrl",value:function(){return j["a"].error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}},{key:"copyToImage",value:function(){return j["a"].error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}},{key:"copyToTexture",value:function(){return j["a"].error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}},{key:"blit",value:function(){return j["a"].error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}},{key:"invalidate",value:function(e){var t=e.attachments,n=void 0===t?[]:t,r=e.x,a=void 0===r?0:r,i=e.y,o=void 0===i?0:i,c=e.width,u=e.height,s=this.gl;Object(O["a"])(s);var l=s.bindFramebuffer(36008,this.handle),f=0===a&&0===o&&void 0===c&&void 0===u;return f?s.invalidateFramebuffer(36008,n):s.invalidateFramebuffer(36008,n,a,o,c,u),s.bindFramebuffer(36008,l),this}},{key:"getAttachmentParameter",value:function(e,t,n){var r=this._getAttachmentParameterFallback(t);return null===r&&(this.gl.bindFramebuffer(36160,this.handle),r=this.gl.getFramebufferAttachmentParameter(36160,e,t),this.gl.bindFramebuffer(36160,null)),n&&r>1e3&&(r=Object(y["a"])(this.gl,r)),r}},{key:"getAttachmentParameters",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:36064,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[],r={},a=!0,i=!1,o=void 0;try{for(var c,u=n[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value,l=t?Object(y["a"])(this.gl,s):s;r[l]=this.getAttachmentParameter(e,s,t)}}catch(f){i=!0,o=f}finally{try{a||null==u["return"]||u["return"]()}finally{if(i)throw o}}return r}},{key:"getParameters",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.attachments),n={},r=0,a=t;r<a.length;r++){var i=a[r],o=Number(i),c=e?Object(y["a"])(this.gl,o):o;n[c]=this.getAttachmentParameters(o,e)}return n}},{key:"show",value:function(){return"undefined"!==typeof window&&window.open(Object(g["a"])(this),"luma-debug-texture"),this}},{key:"log",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e>j["a"].priority||"undefined"===typeof window)return this;t=t||"Framebuffer ".concat(this.id);var n=Object(g["a"])(this,{maxHeight:100});return j["a"].image({priority:e,message:t,image:n},t)(),this}},{key:"bind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,this.handle),this}},{key:"unbind",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target,n=void 0===t?36160:t;return this.gl.bindFramebuffer(n,null),this}},{key:"_createDefaultAttachments",value:function(e,t,n,a,i){var o,c=null;e&&(c=c||{},c[36064]=new h["a"](this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:a,height:i,mipmaps:!1,parameters:(o={},Object(r["a"])(o,10241,9729),Object(r["a"])(o,10240,9729),Object(r["a"])(o,10242,33071),Object(r["a"])(o,10243,33071),o)}),this.ownResources.push(c[36064]));return t&&n?(c=c||{},c[33306]=new b["a"](this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:a,height:111}),this.ownResources.push(c[33306])):t?(c=c||{},c[36096]=new b["a"](this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:a,height:i}),this.ownResources.push(c[36096])):n&&Object(p["a"])(!1),c}},{key:"_unattach",value:function(e){var t=this.attachments[e];t&&(t instanceof b["a"]?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}},{key:"_attachRenderbuffer",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.renderbuffer,a=this.gl;a.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}},{key:"_attachTexture",value:function(e){var t=e.attachment,n=void 0===t?36064:t,r=e.texture,a=e.layer,i=e.level,o=this.gl;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:o.framebufferTextureLayer(36160,n,r.target,i,a);break;case 34067:var c=E(a);o.framebufferTexture2D(36160,n,c,r.handle,i);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,i);break;default:Object(p["a"])(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}},{key:"_setReadBuffer",value:function(e){var t=this.gl;Object(O["d"])(t)?t.readBuffer(e):Object(p["a"])(36064===e||1029===e,_),this.readBuffer=e}},{key:"_setDrawBuffers",value:function(e){var t=this.gl;if(Object(O["d"])(t))t.drawBuffers(e);else{var n=t.getExtension("WEBGL.draw_buffers");n?n.drawBuffersWEBGL(e):Object(p["a"])(1===e.length&&(36064===e[0]||1029===e[0]),_)}this.drawBuffers=e}},{key:"_getAttachmentParameterFallback",value:function(e){var t=Object(m["a"])(this.gl);switch(e){case 36052:return t.webgl2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return t.webgl2?null:8;case 33297:return t.webgl2?null:5125;case 33296:return t.webgl2||t.EXT_sRGB?null:9729;default:return null}}},{key:"_createHandle",value:function(){return this.gl.createFramebuffer()}},{key:"_deleteHandle",value:function(){this.gl.deleteFramebuffer(this.handle)}},{key:"_bindHandle",value:function(e){return this.gl.bindFramebuffer(36160,e)}},{key:"color",get:function(){return this.attachments[36064]||null}},{key:"texture",get:function(){return this.attachments[36064]||null}},{key:"depth",get:function(){return this.attachments[36096]||this.attachments[33306]||null}},{key:"stencil",get:function(){return this.attachments[36128]||this.attachments[33306]||null}}]),t}(d["a"]);function E(e){return e<34069?e+34069:e}function x(e){var t=A.STATUS||{};return t[e]||"Framebuffer error ".concat(e)}var k=[36049,36048,33296,33298,33299,33300,33301,33302,33303];A.ATTACHMENT_PARAMETERS=k},efe98:function(e,t,n){var r=n("ade3");t["a"]={enable:function(e,t){return e(Object(r["a"])({},t,!0))},disable:function(e,t){return e(Object(r["a"])({},t,!1))},pixelStorei:function(e,t,n){return e(Object(r["a"])({},t,n))},hint:function(e,t,n){return e(Object(r["a"])({},t,n))},bindFramebuffer:function(e,t,n){var a;switch(t){case 36160:return e((a={},Object(r["a"])(a,36006,n),Object(r["a"])(a,36010,n),a));case 36009:return e(Object(r["a"])({},36006,n));case 36008:return e(Object(r["a"])({},36010,n));default:return null}},blendColor:function(e,t,n,a,i){return e(Object(r["a"])({},32773,new Float32Array([t,n,a,i])))},blendEquation:function(e,t){var n;return e((n={},Object(r["a"])(n,32777,t),Object(r["a"])(n,34877,t),n))},blendEquationSeparate:function(e,t,n){var a;return e((a={},Object(r["a"])(a,32777,t),Object(r["a"])(a,34877,n),a))},blendFunc:function(e,t,n){var a;return e((a={},Object(r["a"])(a,32969,t),Object(r["a"])(a,32968,n),Object(r["a"])(a,32971,t),Object(r["a"])(a,32970,n),a))},blendFuncSeparate:function(e,t,n,a,i){var o;return e((o={},Object(r["a"])(o,32969,t),Object(r["a"])(o,32968,n),Object(r["a"])(o,32971,a),Object(r["a"])(o,32970,i),o))},clearColor:function(e,t,n,a,i){return e(Object(r["a"])({},3106,new Float32Array([t,n,a,i])))},clearDepth:function(e,t){return e(Object(r["a"])({},2931,t))},clearStencil:function(e,t){return e(Object(r["a"])({},2961,t))},colorMask:function(e,t,n,a,i){return e(Object(r["a"])({},3107,[t,n,a,i]))},cullFace:function(e,t){return e(Object(r["a"])({},2885,t))},depthFunc:function(e,t){return e(Object(r["a"])({},2932,t))},depthRange:function(e,t,n){return e(Object(r["a"])({},2928,new Float32Array([t,n])))},depthMask:function(e,t){return e(Object(r["a"])({},2930,t))},frontFace:function(e,t){return e(Object(r["a"])({},2886,t))},lineWidth:function(e,t){return e(Object(r["a"])({},2849,t))},polygonOffset:function(e,t,n){var a;return e((a={},Object(r["a"])(a,32824,t),Object(r["a"])(a,10752,n),a))},sampleCoverage:function(e,t,n){var a;return e((a={},Object(r["a"])(a,32938,t),Object(r["a"])(a,32939,n),a))},scissor:function(e,t,n,a,i){return e(Object(r["a"])({},3088,new Int32Array([t,n,a,i])))},stencilMask:function(e,t){var n;return e((n={},Object(r["a"])(n,2968,t),Object(r["a"])(n,36005,t),n))},stencilMaskSeparate:function(e,t,n){return e(Object(r["a"])({},1028===t?2968:36005,n))},stencilFunc:function(e,t,n,a){var i;return e((i={},Object(r["a"])(i,2962,t),Object(r["a"])(i,2967,n),Object(r["a"])(i,2963,a),Object(r["a"])(i,34816,t),Object(r["a"])(i,36003,n),Object(r["a"])(i,36004,a),i))},stencilFuncSeparate:function(e,t,n,a,i){var o;return e((o={},Object(r["a"])(o,1028===t?2962:34816,n),Object(r["a"])(o,1028===t?2967:36003,a),Object(r["a"])(o,1028===t?2963:36004,i),o))},stencilOp:function(e,t,n,a){var i;return e((i={},Object(r["a"])(i,2964,t),Object(r["a"])(i,2965,n),Object(r["a"])(i,2966,a),Object(r["a"])(i,34817,t),Object(r["a"])(i,34818,n),Object(r["a"])(i,34819,a),i))},stencilOpSeparate:function(e,t,n,a,i){var o;return e((o={},Object(r["a"])(o,1028===t?2964:34817,n),Object(r["a"])(o,1028===t?2965:34818,a),Object(r["a"])(o,1028===t?2966:34819,i),o))},viewport:function(e,t,n,a,i){return e(Object(r["a"])({},2978,new Int32Array([t,n,a,i])))}}},f47a:function(e,t,n){function r(e,t){if(!e)throw new Error(t||"webgl2-polyfill: assertion failed.")}n.d(t,"a",(function(){return r}))},f9d4:function(e,t,n){n.d(t,"a",(function(){return O}));var r=n("d4ec"),a=n("99de"),i=n("257e"),o=n("7e84"),c=n("45eb"),u=n("bee2"),s=n("262e"),l=n("2fc2"),f=n("b1cf"),d=n("4945"),h=n("9499"),b=n("0b1c"),v=n("5db5"),g="OES_vertex_array_object",m="elements must be GL.ELEMENT_ARRAY_BUFFER",O=function(e){function t(e){var n,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(r["a"])(this,t);var u=c.id||c.program&&c.program.id;return n=Object(a["a"])(this,Object(o["a"])(t).call(this,e,Object.assign({},c,{id:u}))),n.hasVertexArrays=t.isSupported(e),n.buffer=null,n.bufferValue=null,n.initialize(c),Object.seal(Object(i["a"])(n)),n}return Object(s["a"])(t,e),Object(u["a"])(t,null,[{key:"isSupported",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.constantAttributeZero?Object(d["d"])(e)||"Chrome"===Object(v["a"])():Object(d["d"])(e)||e.getExtension(g)}},{key:"getDefaultArray",value:function(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new t(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}},{key:"getMaxAttributes",value:function(e){return t.MAX_ATTRIBUTES=t.MAX_ATTRIBUTES||e.getParameter(34921),t.MAX_ATTRIBUTES}},{key:"setConstant",value:function(e,n,r){switch(r.constructor){case Float32Array:t._setConstantFloatArray(e,n,r);break;case Int32Array:t._setConstantIntArray(e,n,r);break;case Uint32Array:t._setConstantUintArray(e,n,r);break;default:Object(b["a"])(!1)}}}]),Object(u["a"])(t,[{key:"delete",value:function(){Object(c["a"])(Object(o["a"])(t.prototype),"delete",this).call(this),this.buffer&&this.buffer["delete"]()}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.setProps(e)}},{key:"setProps",value:function(e){return this}},{key:"setElementBuffer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Object(b["a"])(!t||34963===t.target,m),this.bind((function(){e.gl.bindBuffer(34963,t?t.handle:null)})),this}},{key:"setBuffer",value:function(e,t,n){if(34963===t.target)return this.setElementBuffer(t,n);var r=n.size,a=n.type,i=n.stride,o=n.offset,c=n.normalized,u=n.integer,s=n.divisor,l=this.gl;return e=Number(e),this.bind((function(){l.bindBuffer(34962,t.handle),u?(Object(b["a"])(Object(d["d"])(l)),l.vertexAttribIPointer(e,r,a,i,o)):l.vertexAttribPointer(e,r,a,c,i,o),l.enableVertexAttribArray(e),l.vertexAttribDivisor(e,s||0)})),this}},{key:"enable",value:function(e){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=!r&&0===e&&!t.isSupported(this.gl,{constantAttributeZero:!0});return a||(e=Number(e),this.bind((function(){return r?n.gl.enableVertexAttribArray(e):n.gl.disableVertexAttribArray(e)}))),this}},{key:"getConstantBuffer",value:function(e,t,n){var r=this._normalizeConstantArrayValue(t,n),a=r.byteLength*e,i=r.length*e,o=!this.buffer;if(this.buffer=this.buffer||new f["a"](this.gl,a),o=o||this.buffer.reallocate(a),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){var c=Object(h["b"])(t.constructor,i);Object(h["a"])({target:c,source:r,start:0,count:i}),this.buffer.subData(c),this.bufferValue=t}return this.buffer}},{key:"_normalizeConstantArrayValue",value:function(e,t){return Array.isArray(e)?new Float32Array(e):e}},{key:"_compareConstantArrayValues",value:function(e,t){if(!e||!t||e.length!==t.length||e.constructor!==t.constructor)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}},{key:"_createHandle",value:function(){return this.hasVertexArrays=t.isSupported(this.gl),this.hasVertexArrays?this.gl.createVertexArray():null}},{key:"_deleteHandle",value:function(e){return this.hasVertexArrays&&this.gl.deleteVertexArray(e),[this.elements]}},{key:"_bindHandle",value:function(e){this.hasVertexArrays&&this.gl.bindVertexArray(e)}},{key:"_getParameter",value:function(e,t){var n=this,r=t.location;return Object(b["a"])(Number.isFinite(r)),this.bind((function(){switch(e){case 34373:return n.gl.getVertexAttribOffset(r,e);default:return n.gl.getVertexAttrib(r,e)}}))}},{key:"MAX_ATTRIBUTES",get:function(){return t.getMaxAttributes(this.gl)}}],[{key:"_setConstantFloatArray",value:function(e,t,n){switch(n.length){case 1:e.vertexAttrib1fv(t,n);break;case 2:e.vertexAttrib2fv(t,n);break;case 3:e.vertexAttrib3fv(t,n);break;case 4:e.vertexAttrib4fv(t,n);break;default:Object(b["a"])(!1)}}},{key:"_setConstantIntArray",value:function(e,t,n){switch(Object(b["a"])(Object(d["d"])(e)),n.length){case 1:e.vertexAttribI1iv(t,n);break;case 2:e.vertexAttribI2iv(t,n);break;case 3:e.vertexAttribI3iv(t,n);break;case 4:e.vertexAttribI4iv(t,n);break;default:Object(b["a"])(!1)}}},{key:"_setConstantUintArray",value:function(e,t,n){switch(Object(b["a"])(Object(d["d"])(e)),n.length){case 1:e.vertexAttribI1uiv(t,n);break;case 2:e.vertexAttribI2uiv(t,n);break;case 3:e.vertexAttribI3uiv(t,n);break;case 4:e.vertexAttribI4uiv(t,n);break;default:Object(b["a"])(!1)}}}]),t}(l["a"])}}]);