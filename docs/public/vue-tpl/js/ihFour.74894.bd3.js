(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ihFour.74894"],{"1da1":function(t,e,i){i.d(e,"a",(function(){return r}));i("d3b7");function n(t,e,i,n,r,a,s){try{var o=t[a](s),u=o.value}catch(h){return void i(h)}o.done?e(u):Promise.resolve(u).then(n,r)}function r(t){return function(){var e=this,i=arguments;return new Promise((function(r,a){var s=t.apply(e,i);function o(t){n(s,r,a,o,u,"next",t)}function u(t){n(s,r,a,o,u,"throw",t)}o(void 0)}))}}},2:function(t,e){},3835:function(t,e,i){function n(t){if(Array.isArray(t))return t}i.d(e,"a",(function(){return o}));i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0");function r(t,e){var i=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var n,r,a=[],s=!0,o=!1;try{for(i=i.call(t);!(s=(n=i.next()).done);s=!0)if(a.push(n.value),e&&a.length===e)break}catch(u){o=!0,r=u}finally{try{s||null==i["return"]||i["return"]()}finally{if(o)throw r}}return a}}var a=i("06c5");function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){return n(t)||r(t,e)||Object(a["a"])(t,e)||s()}},4478:function(t,e,i){i.d(e,"a",(function(){return a}));i("4ae1");var n=i("b380"),r=i("d967");function a(t,e,i){return a=Object(r["a"])()?Reflect.construct:function(t,e,i){var r=[null];r.push.apply(r,e);var a=Function.bind.apply(t,r),s=new a;return i&&Object(n["a"])(s,i.prototype),s},a.apply(null,arguments)}},"45eb":function(t,e,i){i.d(e,"a",(function(){return a}));i("5d41"),i("e439");var n=i("7e84");function r(t,e){while(!Object.prototype.hasOwnProperty.call(t,e))if(t=Object(n["a"])(t),null===t)break;return t}function a(t,e,i){return a="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function(t,e,i){var n=r(t,e);if(n){var a=Object.getOwnPropertyDescriptor(n,e);return a.get?a.get.call(i):a.value}},a(t,e,i||t)}},9129:function(t,e,i){i.d(e,"a",(function(){return u}));var n=i("3835"),r=i("d4ec"),a=i("bee2"),s=1,o=1,u=function(){function t(){Object(r["a"])(this,t),this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}return Object(a["a"])(t,[{key:"addChannel",value:function(t){var e=t.delay,i=void 0===e?0:e,n=t.duration,r=void 0===n?Number.POSITIVE_INFINITY:n,a=t.rate,o=void 0===a?1:a,u=t.repeat,h=void 0===u?1:u,l=s++,c={time:0,delay:i,duration:r,rate:o,repeat:h};return this._setChannelTime(c,this.time),this.channels.set(l,c),l}},{key:"removeChannel",value:function(t){this.channels["delete"](t);var e=!0,i=!1,r=void 0;try{for(var a,s=this.animations[Symbol.iterator]();!(e=(a=s.next()).done);e=!0){var o=Object(n["a"])(a.value,2),u=o[0],h=o[1];h.channel===t&&this.detachAnimation(u)}}catch(l){i=!0,r=l}finally{try{e||null==s["return"]||s["return"]()}finally{if(i)throw r}}}},{key:"isFinished",value:function(t){var e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}},{key:"getTime",value:function(t){if(void 0===t)return this.time;var e=this.channels.get(t);return void 0===e?-1:e.time}},{key:"setTime",value:function(t){this.time=Math.max(0,t);var e=this.channels.values(),i=!0,n=!1,r=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var o=a.value;this._setChannelTime(o,this.time)}}catch(g){n=!0,r=g}finally{try{i||null==s["return"]||s["return"]()}finally{if(n)throw r}}var u=this.animations.values(),h=!0,l=!1,c=void 0;try{for(var d,f=u[Symbol.iterator]();!(h=(d=f.next()).done);h=!0){var m=d.value,v=m.animation,p=m.channel;v.setTime(this.getTime(p))}}catch(g){l=!0,c=g}finally{try{h||null==f["return"]||f["return"]()}finally{if(l)throw c}}}},{key:"play",value:function(){this.playing=!0}},{key:"pause",value:function(){this.playing=!1,this.lastEngineTime=-1}},{key:"reset",value:function(){this.setTime(0)}},{key:"attachAnimation",value:function(t,e){var i=o++;return this.animations.set(i,{animation:t,channel:e}),t.setTime(this.getTime(e)),i}},{key:"detachAnimation",value:function(t){this.animations["delete"](t)}},{key:"update",value:function(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}},{key:"_setChannelTime",value:function(t,e){var i=e-t.delay,n=t.duration*t.repeat;i>=n?t.time=t.duration*t.rate:(t.time=Math.max(0,i)%t.duration,t.time*=t.rate)}}]),t}()},"98b8":function(t,e,i){(function(t){function e(t){return e="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}i("a4d3"),i("e01a"),i("d3b7"),i("d28b"),i("3ca3"),i("ddb0"),i("b636"),i("944a"),i("0c47"),i("23dc"),i("3410"),i("b0c0"),i("131a"),i("159b"),i("fb6a"),i("6c57");var n=function(t){var i,n=Object.prototype,r=n.hasOwnProperty,a="function"===typeof Symbol?Symbol:{},s=a.iterator||"@@iterator",o=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function h(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(E){h=function(t,e,i){return t[e]=i}}function l(t,e,i,n){var r=e&&e.prototype instanceof g?e:g,a=Object.create(r.prototype),s=new F(n||[]);return a._invoke=P(t,i,s),a}function c(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(E){return{type:"throw",arg:E}}}t.wrap=l;var d="suspendedStart",f="suspendedYield",m="executing",v="completed",p={};function g(){}function y(){}function b(){}var _={};h(_,s,(function(){return this}));var w=Object.getPrototypeOf,k=w&&w(w(R([])));k&&k!==n&&r.call(k,s)&&(_=k);var O=b.prototype=g.prototype=Object.create(_);function j(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,i){function n(a,s,o,u){var h=c(t[a],t,s);if("throw"!==h.type){var l=h.arg,d=l.value;return d&&"object"===e(d)&&r.call(d,"__await")?i.resolve(d.__await).then((function(t){n("next",t,o,u)}),(function(t){n("throw",t,o,u)})):i.resolve(d).then((function(t){l.value=t,o(l)}),(function(t){return n("throw",t,o,u)}))}u(h.arg)}var a;function s(t,e){function r(){return new i((function(i,r){n(t,e,i,r)}))}return a=a?a.then(r,r):r()}this._invoke=s}function P(t,e,i){var n=d;return function(r,a){if(n===m)throw new Error("Generator is already running");if(n===v){if("throw"===r)throw a;return A()}i.method=r,i.arg=a;while(1){var s=i.delegate;if(s){var o=M(s,i);if(o){if(o===p)continue;return o}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===d)throw n=v,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=m;var u=c(t,e,i);if("normal"===u.type){if(n=i.done?v:f,u.arg===p)continue;return{value:u.arg,done:i.done}}"throw"===u.type&&(n=v,i.method="throw",i.arg=u.arg)}}}function M(t,e){var n=t.iterator[e.method];if(n===i){if(e.delegate=null,"throw"===e.method){if(t.iterator["return"]&&(e.method="return",e.arg=i,M(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,p;var a=r.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,p):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function C(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(C,this),this.reset(!0)}function R(t){if(t){var e=t[s];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){while(++n<t.length)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return a.next=a}}return{next:A}}function A(){return{value:i,done:!0}}return y.prototype=b,h(O,"constructor",b),h(b,"constructor",y),y.displayName=h(b,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,h(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},t.awrap=function(t){return{__await:t}},j(x.prototype),h(x.prototype,o,(function(){return this})),t.AsyncIterator=x,t.async=function(e,i,n,r,a){void 0===a&&(a=Promise);var s=new x(l(e,i,n,r),a);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},j(O),h(O,u,"Generator"),h(O,s,(function(){return this})),h(O,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){while(e.length){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},t.values=R,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=i),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var u=r.call(s,"catchLoc"),h=r.call(s,"finallyLoc");if(u&&h){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=t,s.arg=e,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),T(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var r=n.arg;T(i)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:R(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),p}},t}("object"===e(t)?t.exports:{});try{regeneratorRuntime=n}catch(r){"object"===("undefined"===typeof globalThis?"undefined":e(globalThis))?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}).call(this,i("62e4")(t))},a34a:function(t,e,i){t.exports=i("98b8")},b930:function(t,e,i){i.d(e,"j",(function(){return n["a"]})),i.d(e,"b",(function(){return r["a"]})),i.d(e,"i",(function(){return a["b"]})),i.d(e,"a",(function(){return O})),i.d(e,"c",(function(){return S})),i.d(e,"d",(function(){return yt})),i.d(e,"f",(function(){return V["c"]})),i.d(e,"e",(function(){return V["b"]})),i.d(e,"g",(function(){return bt["a"]})),i.d(e,"h",(function(){return _t["a"]}));var n=i("5a27"),r=i("b1cf"),a=i("a7bc"),s=i("53ca"),o=i("a34a"),u=i.n(o),h=i("1da1"),l=i("d4ec"),c=i("bee2"),d=i("bc08"),f=i("aed6"),m=i("8da4"),v=i("45f7"),p=i("3198"),g=i("4945"),y=i("b7ea"),b=i("d752"),_=i("e7ea"),w=i("0b1c"),k=0,O=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l["a"])(this,t);var i=e.onCreateContext,n=void 0===i?function(t){return Object(d["a"])(t)}:i,r=e.onAddHTML,a=void 0===r?null:r,s=e.onInitialize,o=void 0===s?function(){}:s,u=e.onRender,h=void 0===u?function(){}:u,c=e.onFinalize,m=void 0===c?function(){}:c,v=e.gl,p=void 0===v?null:v,g=e.glOptions,y=void 0===g?{}:g,b=e.debug,w=void 0!==b&&b,O=e.createFramebuffer,j=void 0!==O&&O,x=e.autoResizeViewport,P=void 0===x||x,M=e.autoResizeDrawingBuffer,C=void 0===M||M,T=e.stats,F=void 0===T?f["a"].get("animation-loop-".concat(k++)):T,R=e.useDevicePixels,A=void 0===R||R;"useDevicePixelRatio"in e&&(_["a"].deprecated("useDevicePixelRatio","useDevicePixels")(),A=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:a,onInitialize:o,onRender:h,onFinalize:m,gl:p,glOptions:y,debug:w,createFramebuffer:j},this.gl=p,this.needsRedraw=null,this.timeline=null,this.stats=F,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:P,autoResizeDrawingBuffer:C,useDevicePixels:A}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}return Object(c["a"])(t,[{key:"delete",value:function(){this.stop(),this._setDisplay(null)}},{key:"setNeedsRedraw",value:function(t){return Object(w["a"])("string"===typeof t),this.needsRedraw=this.needsRedraw||t,this}},{key:"setProps",value:function(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}},{key:"start",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._running||(this._running=!0,Object(m["b"])().then((function(){return!t._running||t._initialized?null:(t._createWebGLContext(e),t._createFramebuffer(),t._startEventHandling(),t._initializeCallbackData(),t._updateCallbackData(),t._resizeCanvasDrawingBuffer(),t._resizeViewport(),t._gpuTimeQuery=v["a"].isSupported(t.gl,["timers"])?new v["a"](t.gl):null,t._initialized=!0,t.onInitialize(t.animationProps))})).then((function(e){t._running&&(t._addCallbackData(e||{}),!1!==e&&t._startLoop())}))),this}},{key:"redraw",value:function(){return this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this}},{key:"stop",value:function(){return this._running&&(this._finalizeCallbackData(),Object(p["a"])(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}},{key:"attachTimeline",value:function(t){return this.timeline=t,this.timeline}},{key:"detachTimeline",value:function(){this.timeline=null}},{key:"waitForRender",value:function(){var t=this;return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise((function(e){t._resolveNextFrame=e}))),this._nextFramePromise}},{key:"toDataURL",value:function(){var t=Object(h["a"])(u.a.mark((function t(){return u.a.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.setNeedsRedraw("toDataURL"),t.next=3,this.waitForRender();case 3:return t.abrupt("return",this.gl.canvas.toDataURL());case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"onCreateContext",value:function(){var t;return(t=this.props).onCreateContext.apply(t,arguments)}},{key:"onInitialize",value:function(){var t;return(t=this.props).onInitialize.apply(t,arguments)}},{key:"onRender",value:function(){var t;return(t=this.props).onRender.apply(t,arguments)}},{key:"onFinalize",value:function(){var t;return(t=this.props).onFinalize.apply(t,arguments)}},{key:"getHTMLControlValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=document.getElementById(t);return i?Number(i.value):e}},{key:"setViewParameters",value:function(){return _["a"].removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}},{key:"_startLoop",value:function(){var t=this,e=function e(){t._running&&(t.redraw(),t._animationFrameId=t._requestAnimationFrame(e))};Object(p["a"])(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}},{key:"_setDisplay",value:function(t){this.display&&(this.display["delete"](),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}},{key:"_requestAnimationFrame",value:function(t){this.display&&this.display.requestAnimationFrame(t)||Object(p["b"])(t)}},{key:"_renderFrame",value:function(){var t;this.display?(t=this.display)._renderFrame.apply(t,arguments):this.onRender.apply(this,arguments)}},{key:"_clearNeedsRedraw",value:function(){this.needsRedraw=null}},{key:"_setupFrame",value:function(){this._onSetupFrame?this._onSetupFrame(this.animationProps):(this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer())}},{key:"_initializeCallbackData",value:function(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}},{key:"_updateCallbackData",value:function(){var t=this._getSizeAndAspect(),e=t.width,i=t.height,n=t.aspect;e===this.animationProps.width&&i===this.animationProps.height||this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=i,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}},{key:"_finalizeCallbackData",value:function(){this.onFinalize(this.animationProps)}},{key:"_addCallbackData",value:function(t){"object"===Object(s["a"])(t)&&null!==t&&(this.animationProps=Object.assign({},this.animationProps,t))}},{key:"_createWebGLContext",value:function(t){if(this.offScreen=t.canvas&&"undefined"!==typeof OffscreenCanvas&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?Object(d["b"])(this.props.gl,t):this.onCreateContext(t),!Object(g["c"])(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");Object(y["b"])(this.gl),this._createInfoDiv()}},{key:"_createInfoDiv",value:function(){if(this.gl.canvas&&this.props.onAddHTML){var t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";var e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(e);var i=this.props.onAddHTML(e);i&&(e.innerHTML=i)}}},{key:"_getSizeAndAspect",value:function(){var t=this.gl.drawingBufferWidth,e=this.gl.drawingBufferHeight,i=1,n=this.gl.canvas;return n&&n.clientHeight?i=n.clientWidth/n.clientHeight:t>0&&e>0&&(i=t/e),{width:t,height:e,aspect:i}}},{key:"_resizeViewport",value:function(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}},{key:"_resizeCanvasDrawingBuffer",value:function(){this.autoResizeDrawingBuffer&&Object(d["c"])(this.gl,{useDevicePixels:this.useDevicePixels})}},{key:"_createFramebuffer",value:function(){this.props.createFramebuffer&&(this.framebuffer=new b["a"](this.gl))}},{key:"_resizeFramebuffer",value:function(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}},{key:"_beginTimers",value:function(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}},{key:"_endTimers",value:function(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}},{key:"_startEventHandling",value:function(){var t=this.gl.canvas;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}},{key:"_onMousemove",value:function(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}},{key:"_onMouseleave",value:function(t){this.animationProps._mousePosition=null}}]),t}(),j=i("be94"),x=i("99de"),P=i("7e84"),M=i("262e"),C=i("55da"),T={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l["a"])(this,t);var i=e.id,n=void 0===i?Object(C["c"])("geometry"):i,r=e.drawMode,a=void 0===r?T.TRIANGLES:r,s=e.attributes,o=void 0===s?{}:s,u=e.indices,h=void 0===u?null:u,c=e.vertexCount,d=void 0===c?null:c;this.id=n,this.drawMode=0|a,this.attributes={},this.userData={},this._setAttributes(o,h),this.vertexCount=d||this._calculateVertexCount(this.attributes,this.indices)}return Object(c["a"])(t,null,[{key:"DRAW_MODE",get:function(){return T}}]),Object(c["a"])(t,[{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getAttributes",value:function(){return this.indices?Object(j["a"])({indices:this.indices},this.attributes):this.attributes}},{key:"_print",value:function(t){return"Geometry ".concat(this.id," attribute ").concat(t)}},{key:"_setAttributes",value:function(t,e){for(var i in e&&(this.indices=ArrayBuffer.isView(e)?{value:e,size:1}:e),t){var n=t[i];n=ArrayBuffer.isView(n)?{value:n}:n,Object(w["a"])(ArrayBuffer.isView(n.value),"".concat(this._print(i),": must be typed array or object with value as typed array")),"POSITION"!==i&&"positions"!==i||n.size||(n.size=3),"indices"===i?(Object(w["a"])(!this.indices),this.indices=n):this.attributes[i]=n}return this.indices&&void 0!==this.indices.isIndexed&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}},{key:"_calculateVertexCount",value:function(t,e){if(e)return e.value.length;var i=1/0;for(var n in t){var r=t[n],a=r.value,s=r.size,o=r.constant;!o&&a&&s>=1&&(i=Math.min(i,a.length/s))}return Object(w["a"])(Number.isFinite(i)),i}},{key:"mode",get:function(){return this.drawMode}}]),t}(),R=new Uint16Array([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),A=new Float32Array([-1,-1,1,1,-1,1,1,1,1,-1,1,1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,1,-1,-1,1,1,1,1,1,1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,-1,1,-1,-1,-1,-1,-1,1,-1,1,1,-1,1,-1]),E=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0]),I=new Float32Array([0,0,1,0,1,1,0,1,1,0,1,1,0,1,0,0,0,1,0,0,1,0,1,1,1,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,0,0,1,0,1,1,0,1]),D={POSITION:{size:3,value:new Float32Array(A)},NORMAL:{size:3,value:new Float32Array(E)},TEXCOORD_0:{size:2,value:new Float32Array(I)}},S=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l["a"])(this,e);var i=t.id,n=void 0===i?Object(C["c"])("cube-geometry"):i;return Object(x["a"])(this,Object(P["a"])(e).call(this,Object(j["a"])({},t,{id:n,indices:{size:1,value:new Uint16Array(R)},attributes:Object(j["a"])({},D,t.attributes)})))}return Object(M["a"])(e,t),e}(F),L=i("45eb"),z=i("ade3"),N=i("6e98"),U={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function B(t,e,i){var n={},a=e.indices;for(var s in e.attributes){var o=e.attributes[s],u=Q(s,i);if("indices"===s)a=o;else if(o.constant)n[u]=o.value;else{var h=o.value,l=Object(j["a"])({},o);delete l.value,n[u]=[new r["a"](t,h),l],H(s,l)}}if(a){var c=a.value||a;Object(w["a"])(c instanceof Uint16Array||c instanceof Uint32Array,'attribute array for "indices" must be of integer type');var d={size:1,isIndexed:void 0===a.isIndexed||a.isIndexed};n.indices=[new r["a"](t,{data:c,target:34963}),d]}return n}function Q(t,e){var i=e||{},n=i.attributeMap,r=void 0===n?U:n;return r&&r[t]||t}function H(t,e){var i;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":i="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":i="vectors";break;default:}switch(i){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break;default:}Object(w["a"])(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}var G=i("3835"),V=i("9503"),W=i("3a49"),q=function(){function t(e){Object(l["a"])(this,t),this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._moduleInjections={vs:{},fs:{}},this._hookFunctions={vs:{},fs:{}},this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}return Object(c["a"])(t,null,[{key:"getDefaultProgramManager",value:function(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t(e),e.luma.defaultProgramManager}}]),Object(c["a"])(t,[{key:"addDefaultModule",value:function(t){this._defaultModules.find((function(e){return e.name===t.name}))||this._defaultModules.push(t),this.stateHash++}},{key:"removeDefaultModule",value:function(t){var e="string"===typeof t?t:t.name;this._defaultModules=this._defaultModules.filter((function(t){return t.name!==e})),this.stateHash++}},{key:"addModuleInjection",value:function(t,e){var i="string"===typeof t?t:t.name,n=e.hook,r=e.injection,a=e.order,s=void 0===a?0:a,o=n.slice(0,2),u=this._moduleInjections[o];u[i]=u[i]||{},u[i][n]={injection:r,order:s},this.stateHash++}},{key:"addShaderHook",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t=t.trim();var i=t.split(":"),n=Object(G["a"])(i,2),r=n[0],a=n[1],s=t.replace(/\(.+/,"");this._hookFunctions[r][s]=Object.assign(e,{signature:a}),this.stateHash++}},{key:"get",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e.vs,n=void 0===i?"":i,r=e.fs,a=void 0===r?"":r,s=e.defines,o=void 0===s?{}:s,u=e.inject,h=void 0===u?{}:u,l=e.varyings,c=void 0===l?[]:l,d=e.bufferMode,f=void 0===d?35981:d,m=this._getModuleList(e.modules),v=this._getHash(n),p=this._getHash(a),g=m.map((function(e){return t._getHash("string"===typeof e?e:e.name)})).sort(),y=c.map((function(e){return t._getHash(e)})),b=Object.keys(o).sort(),_=Object.keys(h).sort(),w=[],k=[],O=!0,j=!1,x=void 0;try{for(var P,M=b[Symbol.iterator]();!(O=(P=M.next()).done);O=!0){var C=P.value;w.push(this._getHash(C)),w.push(this._getHash(o[C]))}}catch(L){j=!0,x=L}finally{try{O||null==M["return"]||M["return"]()}finally{if(j)throw x}}var T=!0,F=!1,R=void 0;try{for(var A,E=_[Symbol.iterator]();!(T=(A=E.next()).done);T=!0){var I=A.value;k.push(this._getHash(I)),k.push(this._getHash(h[I]))}}catch(L){F=!0,R=L}finally{try{T||null==E["return"]||E["return"]()}finally{if(F)throw R}}var D="".concat(v,"/").concat(p,"D").concat(w.join("/"),"M").concat(g.join("/"),"I").concat(k.join("/"),"V").concat(y.join("/"),"H").concat(this.stateHash,"B").concat(f);if(!this._programCache[D]){var S=Object(V["a"])(this.gl,{vs:n,fs:a,modules:m,inject:h,defines:o,hookFunctions:this._hookFunctions,moduleInjections:this._moduleInjections});this._programCache[D]=new W["a"](this.gl,{hash:D,vs:S.vs,fs:S.fs,varyings:c,bufferMode:f}),this._getUniforms[D]=S.getUniforms||function(t){},this._useCounts[D]=0}return this._useCounts[D]++,this._programCache[D]}},{key:"getUniforms",value:function(t){return this._getUniforms[t.hash]||null}},{key:"release",value:function(t){var e=t.hash;this._useCounts[e]--,0===this._useCounts[e]&&(this._programCache[e]["delete"](),delete this._programCache[e],delete this._getUniforms[e],delete this._useCounts[e])}},{key:"_getHash",value:function(t){return void 0===this._hashes[t]&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}},{key:"_getModuleList",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=new Array(this._defaultModules.length+t.length),i={},n=0,r=0,a=this._defaultModules.length;r<a;++r){var s=this._defaultModules[r],o="string"===typeof s?s:s.name;e[n++]=s,i[o]=!0}for(var u=0,h=t.length;u<h;++u){var l=t[u],c="string"===typeof l?l:l.name;i[c]||(e[n++]=l,i[c]=!0)}return e.length=n,e}}]),t}(),X=i("a511"),Y=i("a698"),Z=i("caae"),J=i("7aa2"),K=i("167a"),$=i("cf6e"),tt=i("90ba"),et=i.n(tt),it=i("8930"),nt={},rt=function(t){nt[t.id]||(nt[t.id]=t,et.a.listItem("luma.gl",t.id))},at=function(t,e){if(et.a.isReady()&&!et.a.throttle("luma.gl:".concat(t.id),1e3)){var i=t.geometry?Object.assign({},t.geometry.attributes,t.attributes):t.attributes,n=Object.assign({},t.uniforms,e);et.a.multiUpdate("luma.gl",t.id,[{path:"objects.uniforms",data:n},{path:"objects.attributes",data:i}])}},st=function(t){delete nt[t],et.a.deleteItem("luma.gl",t)},ot=function t(e,i,n){e&&(i.length>1?t(e[i[0]],i.slice(1),n):e[i[0]]=n)},ut=new Map,ht=function(t,e,i){if(it["b"].__SEER_INITIALIZED__){ut.has(t)||ut.set(t,new Map);var n=ut.get(t);n.set(e,i)}},lt=function(t,e){if(it["b"].__SEER_INITIALIZED__&&t){var i=ut.get(t);i&&i.forEach((function(t,i){ot(e,i,t)}))}};et.a.listenFor("luma.gl",(function(t){var e=nt[t.itemKey];if(e&&"edit"===t.type&&"uniforms"===t.valuePath[0]){var i=t.valuePath.slice(1);ht(t.itemKey,i,t.value);var n=e.getUniforms();ot(n,i,t.value),e.setUniforms(n)}}));var ct=2,dt=1e4,ft=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l["a"])(this,t),Object(w["a"])(Object(g["c"])(e));var n=i.id,r=void 0===n?Object(C["c"])("base-model"):n;this.id=r,this.gl=e,this.id=i.id||Object(C["c"])("Model"),this.lastLogTime=0,this.initialize(i)}return Object(c["a"])(t,[{key:"initialize",value:function(t){this.props={},t.shaderCache&&_["a"].warn("ShaderCache property is deprecated")(),this.programManager=t.programManager||q.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;var e=t.program,i=void 0===e?null:e,n=t.vs,r=t.fs,a=t.modules,s=t.defines,o=t.inject,u=t.varyings,h=t.bufferMode;this.programProps={program:i,vs:n,fs:r,modules:a,defines:s,inject:o,varyings:u,bufferMode:h},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.animatedUniforms={},this.animated=!1,this.animationLoop=null,this.timerQueryEnabled=!1,this.timeElapsedQuery=void 0,this.lastQueryReturned=!0,this.stats={accumulatedFrameTime:0,averageFrameTime:0,profileFrameCount:0},this.pickable=!0,this._checkProgram(),this._setBaseModelProps(t),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings)))}},{key:"setProps",value:function(t){this._setBaseModelProps(t)}},{key:"delete",value:function(){for(var t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t]["delete"]();this._managedProgram&&this.programManager.release(this.program),this.vertexArray["delete"](),st(this.id)}},{key:"isAnimated",value:function(){return this.animated}},{key:"getProgram",value:function(){return this.program}},{key:"setProgram",value:function(t){this.programProps=Object.assign({},t),this._programDirty=!0}},{key:"getUniforms",value:function(){return this.uniforms}},{key:"setUniforms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t=Object.assign({},t),lt(this.id,t),t=this._extractAnimatedUniforms(t),Object.assign(this.uniforms,t),this}},{key:"getModuleUniforms",value:function(t){this._checkProgram();var e=this.programManager.getUniforms(this.program);return e?e(t):{}}},{key:"updateModuleSettings",value:function(t){var e=this.getModuleUniforms(t||{});return this.setUniforms(e)}},{key:"clear",value:function(t){return Object(X["a"])(this.program.gl,t),this}},{key:"drawGeometry",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._checkProgram();var e=t.moduleSettings,i=void 0===e?null:e,n=t.framebuffer,r=t.uniforms,a=void 0===r?{}:r,s=t.attributes,o=void 0===s?{}:s,u=t.transformFeedback,h=void 0===u?this.transformFeedback:u,l=t.parameters,c=void 0===l?{}:l,d=t.vertexArray,f=void 0===d?this.vertexArray:d,m=t.animationProps;rt(this),this.setAttributes(o),this.updateModuleSettings(i),this.setUniforms(a),this._refreshAnimationProps(m);var v=this._logDrawCallStart(2),p=this.vertexArray.getDrawParams(this.props);p.isInstanced&&!this.isInstanced&&_["a"].warn("Found instanced attributes on non-instanced model",this.id)();var g=p.isIndexed,y=p.indexType,b=p.indexOffset,w=this.isInstanced,k=this.instanceCount,O=function(){},j=this.props,x=j.onBeforeRender,P=void 0===x?O:x,M=j.onAfterRender,C=void 0===M?O:M;P(),this._timerQueryStart(),this.program.setUniforms(this.uniforms);var T=this.program.draw(Object.assign({},t,{logPriority:v,uniforms:null,framebuffer:n,parameters:c,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:f,transformFeedback:h,isIndexed:g,indexType:y,isInstanced:w,instanceCount:k,offset:g?b:0}));return this._timerQueryEnd(),C(),this._logDrawCallEnd(v,f,n),T}},{key:"_setBaseModelProps",value:function(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"timerQueryEnabled"in t&&(this.timerQueryEnabled=t.timerQueryEnabled&&v["a"].isSupported(this.gl,["timers"]),t.timerQueryEnabled&&!this.timerQueryEnabled&&_["a"].warn("GPU timer not supported")()),"_animationProps"in t&&this._setAnimationProps(t._animationProps),"_animationLoop"in t&&(this.animationLoop=t._animationLoop)}},{key:"_checkProgram",value:function(){var t=this._programDirty||this.programManager.stateHash!==this._programManagerState;if(t){var e=this.programProps.program;if(e)this._managedProgram=!1;else{var i=this.programProps,n=i.vs,r=void 0===n?Z["a"].vs:n,a=i.fs,s=void 0===a?Z["a"].fs:a,o=i.modules,u=i.inject,h=i.defines,l=i.varyings,c=i.bufferMode;e=this.programManager.get({vs:r,fs:s,modules:o,inject:u,defines:h,varyings:l,bufferMode:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}Object(w["a"])(e instanceof W["a"],"Model needs a program"),this._programDirty=!1,e!==this.program&&(this.program=e,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new Y["a"](this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}}},{key:"_refreshAnimationProps",value:function(t){t=t||this.animationLoop&&this.animationLoop.animationProps,t&&this._setAnimationProps(t)}},{key:"_evaluateAnimateUniforms",value:function(t){if(!this.animated)return{};var e={};for(var i in this.animatedUniforms){var n=this.animatedUniforms[i];e[i]=n(t)}return e}},{key:"_extractAnimatedUniforms",value:function(t){var e=!1;for(var i in t){var n=t[i];"function"===typeof n?(this.animatedUniforms[i]=n,e=!0):delete this.animatedUniforms[i]}if(this.animated=!Object(C["a"])(this.animatedUniforms),!e)return t;var r={};for(var a in t)this.animatedUniforms[a]||(r[a]=t[a]);return r}},{key:"_timerQueryStart",value:function(){!0===this.timerQueryEnabled&&(this.timeElapsedQuery||(this.timeElapsedQuery=new v["a"](this.gl)),this.lastQueryReturned&&(this.lastQueryReturned=!1,this.timeElapsedQuery.beginTimeElapsedQuery()))}},{key:"_timerQueryEnd",value:function(){if(!0===this.timerQueryEnabled&&(this.timeElapsedQuery.end(),this.timeElapsedQuery.isResultAvailable())){this.lastQueryReturned=!0;var t=this.timeElapsedQuery.getTimerMilliseconds();this.stats.lastFrameTime=t,this.stats.accumulatedFrameTime+=t,this.stats.profileFrameCount++,this.stats.averageFrameTime=this.stats.accumulatedFrameTime/this.stats.profileFrameCount,_["a"].log(ct,"GPU time ".concat(this.program.id,": ").concat(this.stats.lastFrameTime,"ms average ").concat(this.stats.averageFrameTime,"ms accumulated: ").concat(this.stats.accumulatedFrameTime,"ms count: ").concat(this.stats.profileFrameCount))()}}},{key:"_logDrawCallStart",value:function(t){var e=t>3?0:dt;if(!(_["a"].priority<t||Date.now()-this.lastLogTime<e))return this.lastLogTime=Date.now(),_["a"].group(ct,">>> DRAWING MODEL ".concat(this.id),{collapsed:_["a"].priority<=2})(),t}},{key:"_logDrawCallEnd",value:function(t,e,i,n){if(void 0!==t){var r=Object(J["a"])({vertexArray:e,header:"".concat(this.id," attributes"),attributes:this._attributes}),a=Object(K["a"])({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i)}),s=a.table,o=a.unusedTable,u=a.unusedCount,h=Object(K["a"])({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,i),undefinedOnly:!0}),l=h.table,c=h.count;c>0&&_["a"].log("MISSING UNIFORMS",Object.keys(l))(),u>0&&_["a"].log("UNUSED UNIFORMS",Object.keys(o))();var d=Object($["a"])(this.vertexArray.configuration);_["a"].table(t,r)(),_["a"].table(t,s)(),_["a"].table(t+1,d)(),at(this,i),n&&n.log({priority:ct,message:"Rendered to ".concat(n.id)}),_["a"].groupEnd(ct,">>> DRAWING MODEL ".concat(this.id))()}}}]),t}(),mt="Model needs drawMode and vertexCount",vt=function(t){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(l["a"])(this,e);var n=i.id,r=void 0===n?Object(C["c"])("model"):n;return Object(x["a"])(this,Object(P["a"])(e).call(this,t,Object(j["a"])({},i,{id:r})))}return Object(M["a"])(e,t),Object(c["a"])(e,[{key:"initialize",value:function(t){Object(L["a"])(Object(P["a"])(e.prototype),"initialize",this).call(this,t),this.drawMode=void 0!==t.drawMode?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced,this._setModelProps(t),this.geometry={},Object(w["a"])(void 0!==this.drawMode&&Number.isFinite(this.vertexCount),mt)}},{key:"setProps",value:function(t){Object(L["a"])(Object(P["a"])(e.prototype),"setProps",this).call(this,t),this._setModelProps(t)}},{key:"delete",value:function(){Object(L["a"])(Object(P["a"])(e.prototype),"delete",this).call(this),this._deleteGeometryBuffers()}},{key:"getDrawMode",value:function(){return this.drawMode}},{key:"getVertexCount",value:function(){return this.vertexCount}},{key:"getInstanceCount",value:function(){return this.instanceCount}},{key:"getAttributes",value:function(){return this.attributes}},{key:"setDrawMode",value:function(t){return this.drawMode=t,this}},{key:"setVertexCount",value:function(t){return Object(w["a"])(Number.isFinite(t)),this.vertexCount=t,this}},{key:"setInstanceCount",value:function(t){return Object(w["a"])(Number.isFinite(t)),this.instanceCount=t,this}},{key:"setGeometry",value:function(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=B(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}},{key:"setAttributes",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(C["a"])(t))return this;var e={};for(var i in t){var n=t[i];e[i]=n.getValue?n.getValue():n}return this.vertexArray.setAttributes(e),this}},{key:"draw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.drawGeometry(t)}},{key:"transform",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.discard,i=void 0===e||e,n=t.feedbackBuffers,r=t.unbindModels,a=void 0===r?[]:r,s=t.parameters;n&&this._setFeedbackBuffers(n),i&&(s=Object.assign({},s,Object(z["a"])({},35977,i))),a.forEach((function(t){return t.vertexArray.unbindBuffers()}));try{this.draw(Object.assign({},t,{parameters:s}))}finally{a.forEach((function(t){return t.vertexArray.bindBuffers()}))}return this}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return _["a"].warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}},{key:"_setModelProps",value:function(t){"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}},{key:"_deleteGeometryBuffers",value:function(){for(var t in this.geometryBuffers){var e=this.geometryBuffers[t][0]||this.geometryBuffers[t];e instanceof r["a"]&&e["delete"]()}}},{key:"_setAnimationProps",value:function(t){if(this.animated){Object(w["a"])(t,"Model.draw(): animated uniforms but no animationProps");var e=this._evaluateAnimateUniforms(t);Object.assign(this.uniforms,e)}}},{key:"_setFeedbackBuffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(C["a"])(t))return this;var e=this.program.gl;return this.transformFeedback=this.transformFeedback||new N["a"](e,{program:this.program}),this.transformFeedback.setBuffers(t),this}}]),e}(ft),pt=i("73d3"),gt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l["a"])(this,t);var i=e.id;this.id=i||Object(C["c"])(this.constructor.name),this.display=!0,this.position=new pt["b"],this.rotation=new pt["b"],this.scale=new pt["b"](1,1,1),this.matrix=new pt["a"],this.userData={},this.props={},this._setScenegraphNodeProps(e)}return Object(c["a"])(t,[{key:"delete",value:function(){}},{key:"setProps",value:function(t){return this._setScenegraphNodeProps(t),this}},{key:"toString",value:function(){return"{type: ScenegraphNode, id: ".concat(this.id,")}")}},{key:"setPosition",value:function(t){return Object(w["a"])(3===t.length,"setPosition requires vector argument"),this.position=t,this}},{key:"setRotation",value:function(t){return Object(w["a"])(3===t.length,"setRotation requires vector argument"),this.rotation=t,this}},{key:"setScale",value:function(t){return Object(w["a"])(3===t.length,"setScale requires vector argument"),this.scale=t,this}},{key:"setMatrix",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?this.matrix.copy(t):this.matrix=t}},{key:"setMatrixComponents",value:function(t){var e=t.position,i=t.rotation,n=t.scale,r=t.update,a=void 0===r||r;return e&&this.setPosition(e),i&&this.setRotation(i),n&&this.setScale(n),a&&this.updateMatrix(),this}},{key:"updateMatrix",value:function(){var t=this.position,e=this.rotation,i=this.scale;return this.matrix.identity(),this.matrix.translate(t),this.matrix.rotateXYZ(e),this.matrix.scale(i),this}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.position,i=t.rotation,n=t.scale;return e&&this.setPosition(e),i&&this.setRotation(i),n&&this.setScale(n),this.updateMatrix(),this}},{key:"getCoordinateUniforms",value:function(t,e){Object(w["a"])(t),e=e||this.matrix;var i=new pt["a"](t).multiplyRight(e),n=i.invert(),r=n.transpose();return{viewMatrix:t,modelMatrix:e,objectMatrix:e,worldMatrix:i,worldInverseMatrix:n,worldInverseTransposeMatrix:r}}},{key:"_setScenegraphNodeProps",value:function(t){"display"in t&&(this.display=t.display),"position"in t&&this.setPosition(t.position),"rotation"in t&&this.setRotation(t.rotation),"scale"in t&&this.setScale(t.scale),"matrix"in t&&this.setMatrix(t.matrix),Object.assign(this.props,t)}}]),t}(),yt=function(t){function e(t){var i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(l["a"])(this,e),i=Object(x["a"])(this,Object(P["a"])(e).call(this,n)),i.onBeforeRender=null,i.AfterRender=null,t instanceof vt?(i.model=t,i._setModelNodeProps(n)):i.model=new vt(t,n),i.managedResources=n.managedResources||[],i}return Object(M["a"])(e,t),Object(c["a"])(e,[{key:"setProps",value:function(t){return Object(L["a"])(Object(P["a"])(e.prototype),"setProps",this).call(this,t),this._setModelNodeProps(t),this}},{key:"delete",value:function(){this.model&&(this.model["delete"](),this.model=null),this.managedResources.forEach((function(t){return t["delete"]()})),this.managedResources=[]}},{key:"draw",value:function(){var t;return(t=this.model).draw.apply(t,arguments)}},{key:"setUniforms",value:function(){var t;return(t=this.model).setUniforms.apply(t,arguments),this}},{key:"setAttributes",value:function(){var t;return(t=this.model).setAttributes.apply(t,arguments),this}},{key:"updateModuleSettings",value:function(){var t;return(t=this.model).updateModuleSettings.apply(t,arguments),this}},{key:"_setModelNodeProps",value:function(t){this.model.setProps(t)}}]),e}(gt),bt=i("c49b"),_t=i("0082")},be94:function(t,e,i){i.d(e,"a",(function(){return r}));i("b64b"),i("a4d3"),i("99af"),i("4de4"),i("e439"),i("159b");var n=i("ade3");function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?Object(arguments[e]):{},r=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter((function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable})))),r.forEach((function(e){Object(n["a"])(t,e,i[e])}))}return t}}}]);