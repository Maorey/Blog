(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["ihFour.253ae"],{"04d1":function(t,e,r){var n=r("342f"),i=n.match(/firefox\/(\d+)/i);t.exports=!!i&&+i[1]},"07df":function(t,e,r){r.d(e,"b",(function(){return i})),r.d(e,"c",(function(){return s})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return o}));const n="Failed to deduce GL constant from typed array";function i(t){const e=ArrayBuffer.isView(t)?t.constructor:t;switch(e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(n)}}function s(t,{clamped:e=!0}={}){switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function a({data:t,width:e,height:r,bytesPerPixel:n=4,temp:i}){const s=e*n;i=i||new Uint8Array(s);for(let a=0;a<r/2;++a){const e=a*s,n=(r-a-1)*s;i.set(t.subarray(e,e+s)),t.copyWithin(e,n,n+s),t.set(i,n)}}function o({data:t,width:e,height:r}){const n=Math.round(e/2),i=Math.round(r/2),s=new Uint8Array(n*i*4);for(let a=0;a<i;a++)for(let r=0;r<n;r++)for(let i=0;i<4;i++)s[4*(a*n+r)+i]=t[4*(2*a*e+2*r)+i];return{data:s,width:n,height:i}}},"0b1c":function(t,e,r){function n(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}r.d(e,"a",(function(){return n}))},"0b25":function(t,e,r){var n=r("a691"),i=r("50c4");t.exports=function(t){if(void 0===t)return 0;var e=n(t),r=i(e);if(e!==r)throw RangeError("Wrong length or index");return r}},1448:function(t,e,r){var n=r("dfb9"),i=r("b6b7");t.exports=function(t,e){return n(i(t),e)}},"145e":function(t,e,r){var n=r("7b0b"),i=r("23cb"),s=r("50c4"),a=Math.min;t.exports=[].copyWithin||function(t,e){var r=n(this),o=s(r.length),c=i(t,o),u=i(e,o),h=arguments.length>2?arguments[2]:void 0,l=a((void 0===h?o:i(h,o))-u,o-c),f=1;u<c&&c<u+l&&(f=-1,u+=l-1,c+=l-1);while(l-- >0)u in r?r[c]=r[u]:delete r[c],c+=f,u+=f;return r}},"167a":function(t,e,r){r.d(e,"a",(function(){return s}));var n=r("0b1c"),i=r("4ea45");function s({header:t="Uniforms",program:e,uniforms:r,undefinedOnly:s=!1}){Object(n["a"])(e);const o=".*_.*",c=".*Matrix",u=e._uniformSetters,h={},l=Object.keys(u).sort();let f=0;for(const n of l)n.match(o)||n.match(c)||a({table:h,header:t,uniforms:r,uniformName:n,undefinedOnly:s})&&f++;for(const n of l)n.match(c)&&a({table:h,header:t,uniforms:r,uniformName:n,undefinedOnly:s})&&f++;for(const n of l)h[n]||a({table:h,header:t,uniforms:r,uniformName:n,undefinedOnly:s})&&f++;let d=0;const g={};if(!s)for(const n in r){const e=r[n];h[n]||(d++,g[n]={Type:"NOT USED: ".concat(e),[t]:Object(i["a"])(e)})}return{table:h,count:f,unusedTable:g,unusedCount:d}}function a({table:t,header:e,uniforms:r,uniformName:n,undefinedOnly:s}){const a=r[n],c=o(a);return(!s||!c)&&(t[n]={[e]:c?Object(i["a"])(a):"N/A","Uniform Type":c?a:"NOT PROVIDED"},!0)}function o(t){return void 0!==t&&null!==t}},"170b":function(t,e,r){var n=r("ebb5"),i=r("50c4"),s=r("23cb"),a=r("b6b7"),o=n.aTypedArray,c=n.exportTypedArrayMethod;c("subarray",(function(t,e){var r=o(this),n=r.length,c=s(t,n),u=a(r);return new u(r.buffer,r.byteOffset+c*r.BYTES_PER_ELEMENT,i((void 0===e?n:s(e,n))-c))}))},"182d":function(t,e,r){var n=r("f8cd");t.exports=function(t,e){var r=n(t);if(r%e)throw RangeError("Wrong offset");return r}},"19ac":function(t,e,r){(function(t){function n(){let e;if("undefined"!==typeof window&&window.performance)e=window.performance.now();else if("undefined"!==typeof t&&t.hrtime){const r=t.hrtime();e=1e3*r[0]+r[1]/1e6}else e=Date.now();return e}r.d(e,"a",(function(){return n}))}).call(this,r("4362"))},"219c":function(t,e,r){var n=r("ebb5"),i=r("da84"),s=r("d039"),a=r("1c0b"),o=r("50c4"),c=r("addb"),u=r("04d1"),h=r("d998"),l=r("2d00"),f=r("512ce"),d=n.aTypedArray,g=n.exportTypedArrayMethod,b=i.Uint16Array,m=b&&b.prototype.sort,p=!!m&&!s((function(){var t=new b(2);t.sort(null),t.sort({})})),y=!!m&&!s((function(){if(l)return l<74;if(u)return u<67;if(h)return!0;if(f)return f<602;var t,e,r=new b(516),n=Array(516);for(t=0;t<516;t++)e=t%4,r[t]=515-t,n[t]=t-2*e+3;for(r.sort((function(t,e){return(t/4|0)-(e/4|0)})),t=0;t<516;t++)if(r[t]!==n[t])return!0})),A=function(t){return function(e,r){return void 0!==t?+t(e,r)||0:r!==r?-1:e!==e?1:0===e&&0===r?1/e>0&&1/r<0?1:-1:e>r}};g("sort",(function(t){var e=this;if(void 0!==t&&a(t),y)return m.call(e,t);d(e);var r,n=o(e.length),i=Array(n);for(r=0;r<n;r++)i[r]=e[r];for(i=c(e,A(t)),r=0;r<n;r++)e[r]=i[r];return e}),!y||p)},"25a1":function(t,e,r){var n=r("ebb5"),i=r("d58f").right,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("reduceRight",(function(t){return i(s(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},2954:function(t,e,r){var n=r("ebb5"),i=r("b6b7"),s=r("d039"),a=n.aTypedArray,o=n.exportTypedArrayMethod,c=[].slice,u=s((function(){new Int8Array(1).slice()}));o("slice",(function(t,e){var r=c.call(a(this),t,e),n=i(this),s=0,o=r.length,u=new n(o);while(o>s)u[s]=r[s++];return u}),u)},"2c4f":function(t,e,r){r.d(e,"a",(function(){return i}));var n=r("89e8");function i(t,e,r){const{removedProps:i={},deprecatedProps:s={},replacedProps:a={}}=r;for(const c in i)if(c in e){const e=i[c],r=e?"".concat(t,".").concat(i[c]):"N/A";n["i"].removed("".concat(t,".").concat(c),r)()}for(const c in s)if(c in e){const e=s[c];n["i"].deprecated("".concat(t,".").concat(c),"".concat(t,".").concat(e))()}let o=null;for(const c in a)if(c in e){const r=a[c];n["i"].deprecated("".concat(t,".").concat(c),"".concat(t,".").concat(r))(),o=o||Object.assign({},e),o[r]=e[c],delete o[c]}return o||e}},"2fc2":function(t,e,r){r.d(e,"a",(function(){return h}));var n=r("89e8"),i=r("aed6"),s=r("ae79"),a=r("55da"),o=r("0b1c"),c=r("b206");const u="Resource subclass must define virtual methods";class h{constructor(t,e={}){Object(n["b"])(t);const{id:r,userData:i={}}=e;this.gl=t,this.gl2=t,this.id=r||Object(a["c"])(this.constructor.name),this.userData=i,this._bound=!1,this._handle=e.handle,void 0===this._handle&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete({deleteChildren:t=!1}={}){const e=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,e&&t&&e.filter(Boolean).forEach(t=>t.delete()),this}bind(t=this.handle){if("function"!==typeof t)return this._bindHandle(t),this;let e;return this._bound?e=t():(this._bindHandle(this.handle),this._bound=!0,e=t(),this._bound=!1,this._bindHandle(null)),e}unbind(){this.bind(null)}getParameter(t,e={}){t=Object(s["b"])(this.gl,t),Object(o["a"])(t);const r=this.constructor.PARAMETERS||{},i=r[t];if(i){const t=Object(n["h"])(this.gl),e=(!("webgl2"in i)||t)&&(!("extension"in i)||this.gl.getExtension(i.extension));if(!e){const e=i.webgl1,r="webgl2"in i?i.webgl2:i.webgl1,n=t?r:e;return n}}return this._getParameter(t,e)}getParameters(t={}){const{parameters:e,keys:r}=t,i=this.constructor.PARAMETERS||{},a=Object(n["h"])(this.gl),o={},c=e||Object.keys(i);for(const n of c){const e=i[n],c=e&&(!("webgl2"in e)||a)&&(!("extension"in e)||this.gl.getExtension(e.extension));if(c){const i=r?Object(s["a"])(this.gl,n):n;o[i]=this.getParameter(n,t),r&&"GLenum"===e.type&&(o[i]=Object(s["a"])(this.gl,o[i]))}}return o}setParameter(t,e){t=Object(s["b"])(this.gl,t),Object(o["a"])(t);const r=this.constructor.PARAMETERS||{},i=r[t];if(i){const t=Object(n["h"])(this.gl),r=(!("webgl2"in i)||t)&&(!("extension"in i)||this.gl.getExtension(i.extension));if(!r)throw new Error("Parameter not available on this platform");"GLenum"===i.type&&(e=Object(s["b"])(e))}return this._setParameter(t,e),this}setParameters(t){for(const e in t)this.setParameter(e,t[e]);return this}stubRemovedMethods(t,e,r){return Object(c["a"])(this,t,e,r)}initialize(t){}_createHandle(){throw new Error(u)}_deleteHandle(){throw new Error(u)}_bindHandle(t){throw new Error(u)}_getOptsFromHandle(){throw new Error(u)}_getParameter(t,e){throw new Error(u)}_setParameter(t,e){throw new Error(u)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const t=this.constructor.name,e=i["a"].get("Resource Counts");e.get("Resources Created").incrementCount(),e.get("".concat(t,"s Created")).incrementCount(),e.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this.constructor.name,e=i["a"].get("Resource Counts");e.get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t,e=this.constructor.name){const r=i["a"].get("Memory Usage");r.get("GPU Memory").addCount(t),r.get("".concat(e," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(t=this.constructor.name){const e=i["a"].get("Memory Usage");e.get("GPU Memory").subtractCount(this.byteLength),e.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}},3198:function(t,e,r){function n(t){return"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function i(t){return"undefined"!==typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}r.d(e,"b",(function(){return n})),r.d(e,"a",(function(){return i}))},3280:function(t,e,r){var n=r("ebb5"),i=r("e58c"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("lastIndexOf",(function(t){return i.apply(s(this),arguments)}))},"370d":function(t,e,r){r.d(e,"a",(function(){return A}));var n=r("f87d"),i=r("6b74"),s=r("b52f");function a(t){function e(){var e=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(e,Object.getPrototypeOf(this)),e}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class o extends(a(Array)){get ELEMENTS(){return Object(s["a"])(!1),0}clone(){return(new this.constructor).copy(this)}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}fromArray(t,e=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=t[r+e];return this.check()}to(t){return t===this?this:Object(i["d"])(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toArray(t=[],e=0){for(let r=0;r<this.ELEMENTS;++r)t[e+r]=this[r];return t}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(i["a"])}formatString(t){let e="";for(let r=0;r<this.ELEMENTS;++r)e+=(r>0?", ":"")+Object(i["c"])(this[r],t);return`${t.printTypes?this.constructor.name:""}[${e}]`}equals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(!Object(i["b"])(this[e],t[e]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let e=0;e<this.ELEMENTS;++e)if(this[e]!==t[e])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,e,r){void 0===r&&(r=e,e=t,t=this);for(let n=0;n<this.ELEMENTS;++n){const i=t[n];this[n]=i+r*(e[n]-i)}return this.check()}min(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.min(t[e],this[e]);return this.check()}max(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=Math.max(t[e],this[e]);return this.check()}clamp(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t[r]),e[r]);return this.check()}add(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]+=e[t];return this.check()}subtract(...t){for(const e of t)for(let t=0;t<this.ELEMENTS;++t)this[t]-=e[t];return this.check()}scale(t){if(Array.isArray(t))return this.multiply(t);for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}sub(t){return this.subtract(t)}setScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]=t;return this.check()}addScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let e=0;e<this.ELEMENTS;++e)this[e]*=t;return this.check()}divideScalar(t){return this.scale(1/t)}clampScalar(t,e){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],t),e);return this.check()}multiplyByScalar(t){return this.scale(t)}get elements(){return this}check(){if(i["a"].debug&&!this.validate())throw new Error(`math.gl: ${this.constructor.name} some fields set to invalid numbers'`);return this}validate(){let t=this.length===this.ELEMENTS;for(let e=0;e<this.ELEMENTS;++e)t=t&&Number.isFinite(this[e]);return t}}class c extends o{get ELEMENTS(){return Object(s["a"])(!1),0}get RANK(){return Object(s["a"])(!1),0}toString(){let t="[";if(i["a"].printRowMajor){t+="row-major:";for(let e=0;e<this.RANK;++e)for(let r=0;r<this.RANK;++r)t+=" "+this[r*this.RANK+e]}else{t+="column-major:";for(let e=0;e<this.ELEMENTS;++e)t+=" "+this[e]}return t+="]",t}getElementIndex(t,e){return e*this.RANK+t}getElement(t,e){return this[e*this.RANK+t]}setElement(t,e,r){return this[e*this.RANK+t]=Object(n["a"])(r),this}getColumn(t,e=new Array(this.RANK).fill(-0)){const r=t*this.RANK;for(let n=0;n<this.RANK;++n)e[n]=this[r+n];return e}setColumn(t,e){const r=t*this.RANK;for(let n=0;n<this.RANK;++n)this[r+n]=e[n];return this}}function u(t,e,r){const n=e[0],i=e[1],s=r[3]*n+r[7]*i||1;return t[0]=(r[0]*n+r[4]*i)/s,t[1]=(r[1]*n+r[5]*i)/s,t}function h(t,e,r){const n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s||1;return t[0]=(r[0]*n+r[4]*i+r[8]*s)/a,t[1]=(r[1]*n+r[5]*i+r[9]*s)/a,t[2]=(r[2]*n+r[6]*i+r[10]*s)/a,t}var l=r("65a1"),f=r("6711"),d=r("9fe7"),g=r("6e5f");const b=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),m=Object.freeze([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),p=Object.freeze({COL0ROW0:0,COL0ROW1:1,COL0ROW2:2,COL0ROW3:3,COL1ROW0:4,COL1ROW1:5,COL1ROW2:6,COL1ROW3:7,COL2ROW0:8,COL2ROW1:9,COL2ROW2:10,COL2ROW3:11,COL3ROW0:12,COL3ROW1:13,COL3ROW2:14,COL3ROW3:15}),y={};class A extends c{static get IDENTITY(){return y.IDENTITY=y.IDENTITY||Object.freeze(new A(b)),y.IDENTITY}static get ZERO(){return y.ZERO=y.ZERO||Object.freeze(new A(m)),y.ZERO}get INDICES(){return p}get ELEMENTS(){return 16}get RANK(){return 4}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),1===arguments.length&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,e,r,n,i,s,a,o,c,u,h,l,f,d,g,b){return this[0]=t,this[1]=e,this[2]=r,this[3]=n,this[4]=i,this[5]=s,this[6]=a,this[7]=o,this[8]=c,this[9]=u,this[10]=h,this[11]=l,this[12]=f,this[13]=d,this[14]=g,this[15]=b,this.check()}setRowMajor(t,e,r,n,i,s,a,o,c,u,h,l,f,d,g,b){return this[0]=t,this[1]=i,this[2]=c,this[3]=f,this[4]=e,this[5]=s,this[6]=u,this[7]=d,this[8]=r,this[9]=a,this[10]=h,this[11]=g,this[12]=n,this[13]=o,this[14]=l,this[15]=b,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(b)}fromQuaternion(t){return l["b"](this,t),this.check()}frustum({left:t,right:e,bottom:r,top:n,near:i,far:s}){return s===1/0?A._computeInfinitePerspectiveOffCenter(this,t,e,r,n,i):l["c"](this,t,e,r,n,i,s),this.check()}static _computeInfinitePerspectiveOffCenter(t,e,r,n,i,s){const a=2*s/(r-e),o=2*s/(i-n),c=(r+e)/(r-e),u=(i+n)/(i-n),h=-1,l=-1,f=-2*s;return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=c,t[9]=u,t[10]=h,t[11]=l,t[12]=0,t[13]=0,t[14]=f,t[15]=0,t}lookAt(t,e,r){return 1===arguments.length&&({eye:t,center:e,up:r}=t),e=e||[0,0,0],r=r||[0,1,0],l["e"](this,t,e,r),this.check()}ortho({left:t,right:e,bottom:r,top:n,near:i=.1,far:s=500}){return l["g"](this,t,e,r,n,i,s),this.check()}orthographic({fovy:t=45*Math.PI/180,aspect:e=1,focalDistance:r=1,near:n=.1,far:i=500}){if(t>2*Math.PI)throw Error("radians");const s=t/2,a=r*Math.tan(s),o=a*e;return(new A).ortho({left:-o,right:o,bottom:-a,top:a,near:n,far:i})}perspective({fovy:t,fov:e=45*Math.PI/180,aspect:r=1,near:n=.1,far:i=500}={}){if(t=t||e,t>2*Math.PI)throw Error("radians");return l["h"](this,t,r,n,i),this.check()}determinant(){return l["a"](this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const r=this.getScale(e||[-0,-0,-0]),n=1/r[0],i=1/r[1],s=1/r[2];return t[0]=this[0]*n,t[1]=this[1]*i,t[2]=this[2]*s,t[3]=0,t[4]=this[4]*n,t[5]=this[5]*i,t[6]=this[6]*s,t[7]=0,t[8]=this[8]*n,t[9]=this[9]*i,t[10]=this[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t=[-0,-0,-0,-0,-0,-0,-0,-0,-0],e=null){const r=this.getScale(e||[-0,-0,-0]),n=1/r[0],i=1/r[1],s=1/r[2];return t[0]=this[0]*n,t[1]=this[1]*i,t[2]=this[2]*s,t[3]=this[4]*n,t[4]=this[5]*i,t[5]=this[6]*s,t[6]=this[8]*n,t[7]=this[9]*i,t[8]=this[10]*s,t}transpose(){return l["o"](this,this),this.check()}invert(){return l["d"](this,this),this.check()}multiplyLeft(t){return l["f"](this,t,this),this.check()}multiplyRight(t){return l["f"](this,this,t),this.check()}rotateX(t){return l["j"](this,this,t),this.check()}rotateY(t){return l["k"](this,this,t),this.check()}rotateZ(t){return l["l"](this,this,t),this.check()}rotateXYZ([t,e,r]){return this.rotateX(t).rotateY(e).rotateZ(r)}rotateAxis(t,e){return l["i"](this,this,t,e),this.check()}scale(t){return Array.isArray(t)?l["m"](this,this,t):l["m"](this,this,[t,t,t]),this.check()}translate(t){return l["n"](this,this,t),this.check()}transform(t,e){return 4===t.length?(e=g["a"](e||[-0,-0,-0,-0],t,this),Object(n["b"])(e,4),e):this.transformAsPoint(t,e)}transformAsPoint(t,e){const{length:r}=t;switch(r){case 2:e=f["a"](e||[-0,-0],t,this);break;case 3:e=d["a"](e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(n["b"])(e,t.length),e}transformAsVector(t,e){switch(t.length){case 2:e=u(e||[-0,-0],t,this);break;case 3:e=h(e||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Object(n["b"])(e,t.length),e}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,e,r){return this.identity().translate([t,e,r])}transformPoint(t,e){return Object(n["c"])("Matrix4.transformPoint","3.0"),this.transformAsPoint(t,e)}transformVector(t,e){return Object(n["c"])("Matrix4.transformVector","3.0"),this.transformAsPoint(t,e)}transformDirection(t,e){return Object(n["c"])("Matrix4.transformDirection","3.0"),this.transformAsVector(t,e)}}},"3a49":function(t,e,r){r.d(e,"a",(function(){return q}));var n=r("2fc2"),i=r("97a3"),s=r("d752"),a=r("89e8"),o=r("9f85"),c=r("0b1c");const u={[5126]:w.bind(null,"uniform1fv",b,1,x),[35664]:w.bind(null,"uniform2fv",b,2,x),[35665]:w.bind(null,"uniform3fv",b,3,x),[35666]:w.bind(null,"uniform4fv",b,4,x),[5124]:w.bind(null,"uniform1iv",m,1,x),[35667]:w.bind(null,"uniform2iv",m,2,x),[35668]:w.bind(null,"uniform3iv",m,3,x),[35669]:w.bind(null,"uniform4iv",m,4,x),[35670]:w.bind(null,"uniform1iv",m,1,x),[35671]:w.bind(null,"uniform2iv",m,2,x),[35672]:w.bind(null,"uniform3iv",m,3,x),[35673]:w.bind(null,"uniform4iv",m,4,x),[35674]:w.bind(null,"uniformMatrix2fv",b,4,I),[35675]:w.bind(null,"uniformMatrix3fv",b,9,I),[35676]:w.bind(null,"uniformMatrix4fv",b,16,I),[35678]:O,[35680]:O,[5125]:w.bind(null,"uniform1uiv",p,1,x),[36294]:w.bind(null,"uniform2uiv",p,2,x),[36295]:w.bind(null,"uniform3uiv",p,3,x),[36296]:w.bind(null,"uniform4uiv",p,4,x),[35685]:w.bind(null,"uniformMatrix2x3fv",b,6,I),[35686]:w.bind(null,"uniformMatrix2x4fv",b,8,I),[35687]:w.bind(null,"uniformMatrix3x2fv",b,6,I),[35688]:w.bind(null,"uniformMatrix3x4fv",b,12,I),[35689]:w.bind(null,"uniformMatrix4x2fv",b,8,I),[35690]:w.bind(null,"uniformMatrix4x3fv",b,12,I),[35678]:O,[35680]:O,[35679]:O,[35682]:O,[36289]:O,[36292]:O,[36293]:O,[36298]:O,[36299]:O,[36300]:O,[36303]:O,[36306]:O,[36307]:O,[36308]:O,[36311]:O},h={},l={},f={},d=[0];function g(t,e,r,n){1===e&&"boolean"===typeof t&&(t=t?1:0),Number.isFinite(t)&&(d[0]=t,t=d);const i=t.length;if(i%e&&a["i"].warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof r)return t;let s=n[i];s||(s=new r(i),n[i]=s);for(let a=0;a<i;a++)s[a]=t[a];return s}function b(t,e){return g(t,e,Float32Array,h)}function m(t,e){return g(t,e,Int32Array,l)}function p(t,e){return g(t,e,Uint32Array,f)}function y(t,e,r){const n=u[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,t,e)}function A(t){if("]"!==t[t.length-1])return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,r=t.match(e);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function _(t,e,r){for(const n in t){const i=t[n],s=!r||Boolean(r[n]);if(s&&!T(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(n),i),new Error("".concat(e," Bad uniform ").concat(n))}return!0}function T(t){return Array.isArray(t)||ArrayBuffer.isView(t)?v(t):!!isFinite(t)||(!0===t||!1===t||(t instanceof i["a"]||(t instanceof o["a"]||t instanceof s["a"]&&Boolean(t.texture))))}function E(t,e,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(t[e]){const n=t[e];for(let t=0,e=r.length;t<e;++t)n[t]=r[t]}else t[e]=r.slice();else t[e]=r}function v(t){if(0===t.length)return!1;const e=Math.min(t.length,16);for(let r=0;r<e;++r)if(!Number.isFinite(t[r]))return!1;return!0}function O(){let t=null;return(e,r,n)=>{const i=t!==n;return i&&(e.uniform1i(r,n),t=n),i}}function w(t,e,r,n){let i=null,s=null;return(a,o,u)=>{const h=e(u,r),l=h.length;let f=!1;if(null===i)i=new Float32Array(l),s=l,f=!0;else{Object(c["a"])(s===l,"Uniform length cannot change.");for(let t=0;t<l;++t)if(h[t]!==i[t]){f=!0;break}}return f&&(n(a,t,o,h),i.set(h)),f}}function x(t,e,r,n){t[e](r,n)}function I(t,e,r,n){t[e](r,!1,n)}function L(t,e="unnamed"){const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=t.match(r);return n?n[1]:e}const R=35632,S=35633;function P(t){switch(t){case R:return"fragment";case S:return"vertex";default:return"unknown type"}}function N(t,e,r,n){const i=t.split(/\r?\n/),s={},a={},o=n||L(e)||"(unnamed)",c="".concat(P(r)," shader ").concat(o);for(let h=0;h<i.length;h++){const e=i[h];if(e.length<=1)continue;const r=e.split(":"),n=r[0],o=parseInt(r[2],10);if(isNaN(o))throw new Error("GLSL compilation error in ".concat(c,": ").concat(t));"WARNING"!==n?s[o]=e:a[o]=e}const u=B(e);return{shaderName:c,errors:j(s,u),warnings:j(a,u)}}function j(t,e){let r="";for(let n=0;n<e.length;n++){const i=e[n];if((t[n+3]||t[n+2]||t[n+1])&&(r+="".concat(i,"\n"),t[n+1])){const e=t[n+1],i=e.split(":",3),s=i[0],a=parseInt(i[1],10)||0,o=e.substring(i.join(":").length+1).trim();r+=F("^^^ ".concat(s,": ").concat(o,"\n\n"),a)}}return r}function B(t,e=1,r=": "){const n=t.split(/\r?\n/),i=String(n.length+e-1).length;return n.map((t,n)=>{const s=String(n+e),a=s.length,o=F(s,i-a);return o+r+t})}function F(t,e){let r="";for(let n=0;n<e;++n)r+=" ";return"".concat(r).concat(t)}var M=r("55da");const C="Shader: GLSL source code must be a JavaScript string";class D extends n["a"]{static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return Object(c["a"])(!1),"unknown"}}constructor(t,e){Object(a["b"])(t),Object(c["a"])("string"===typeof e.source,C);const r=L(e.source,null)||e.id||Object(M["c"])("unnamed ".concat(D.getTypeName(e.shaderType)));super(t,{id:r}),this.shaderType=e.shaderType,this.source=e.source,this.initialize(e)}initialize({source:t}){const e=L(t,null);e&&(this.id=Object(M["c"])(e)),this._compile(t)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(D.getTypeName(this.shaderType),":").concat(this.id)}getName(){return L(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(t=this.source){t.startsWith("#version ")||(t="#version 100\n".concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle);const e=this.getParameter(35713);if(!e){const t=this.gl.getShaderInfoLog(this.handle),{shaderName:e,errors:r,warnings:n}=N(t,this.source,this.shaderType,this.id);throw a["i"].error("GLSL compilation errors in ".concat(e,"\n").concat(r))(),a["i"].warn("GLSL compilation warnings in ".concat(e,"\n").concat(n))(),new Error("GLSL compilation errors in ".concat(e))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class U extends D{constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class k extends D{constructor(t,e){"string"===typeof e&&(e={source:e}),super(t,Object.assign({},e,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}var V=r("4f61"),z=r("a1e8");class H{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const e=Number(t);return Number.isFinite(e)?this.attributeInfosByLocation[e]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const e=this.getAttributeInfo(t);return e?e.location:-1}getAttributeAccessor(t){const e=this.getAttributeInfo(t);return e?e.accessor:null}getVaryingInfo(t){const e=Number(t);return Number.isFinite(e)?this.varyingInfos[e]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const e=this.getVaryingInfo();return e?e.location:-1}getVaryingAccessor(t){const e=this.getVaryingInfo();return e?e.accessor:null}_readAttributesFromProgram(t){const{gl:e}=t,r=e.getProgramParameter(t.handle,35721);for(let n=0;n<r;n++){const{name:r,type:i,size:s}=e.getActiveAttrib(t.handle,n),a=e.getAttribLocation(t.handle,r);a>=0&&this._addAttribute(a,r,i,s)}this.attributeInfos.sort((t,e)=>t.location-e.location)}_readVaryingsFromProgram(t){const{gl:e}=t;if(!Object(a["h"])(e))return;const r=e.getProgramParameter(t.handle,35971);for(let n=0;n<r;n++){const{name:r,type:i,size:s}=e.getTransformFeedbackVarying(t.handle,n);this._addVarying(n,r,i,s)}this.varyingInfos.sort((t,e)=>t.location-e.location)}_addAttribute(t,e,r,n){const{type:i,components:s}=Object(z["a"])(r),a={type:i,size:n*s};this._inferProperties(t,e,a);const o={location:t,name:e,accessor:new V["a"](a)};this.attributeInfos.push(o),this.attributeInfosByLocation[t]=o,this.attributeInfosByName[o.name]=o}_inferProperties(t,e,r){/instance/i.test(e)&&(r.divisor=1)}_addVarying(t,e,r,n){const{type:i,components:s}=Object(z["a"])(r),a=new V["a"]({type:i,size:n*s}),o={location:t,name:e,accessor:a};this.varyingInfos.push(o),this.varyingInfosByName[o.name]=o}}var G=r("ae79");const X=4,W=35981,Y=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class q extends n["a"]{constructor(t,e={}){super(t,e),this.stubRemovedMethods("Program","v6.0",Y),this._isCached=!1,this.initialize(e),Object.seal(this),this._setId(e.id)}initialize(t={}){const{hash:e,vs:r,fs:n,varyings:i,bufferMode:s=W}=t;return this.hash=e||"",this.vs="string"===typeof r?new U(this.gl,{id:"".concat(t.id,"-vs"),source:r}):r,this.fs="string"===typeof n?new k(this.gl,{id:"".concat(t.id,"-fs"),source:n}):n,Object(c["a"])(this.vs instanceof U),Object(c["a"])(this.fs instanceof k),this.uniforms={},this._textureUniforms={},i&&i.length>0&&(Object(a["a"])(this.gl),this.varyings=i,this.gl2.transformFeedbackVaryings(this.handle,i,s)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new H(this),this.setProps(t)}delete(t={}){return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw({logPriority:t,drawMode:e=4,vertexCount:r,offset:n=0,start:i,end:s,isIndexed:o=!1,indexType:u=5123,instanceCount:h=0,isInstanced:l=h>0,vertexArray:f=null,transformFeedback:d,framebuffer:g,parameters:b={},uniforms:m,samplers:p}){if((m||p)&&(a["i"].deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),a["i"].priority>=t){const n=g?g.id:"default",i="mode=".concat(Object(G["a"])(this.gl,e)," verts=").concat(r," ")+"instances=".concat(h," indexType=").concat(Object(G["a"])(this.gl,u)," ")+"isInstanced=".concat(l," isIndexed=").concat(o," ")+"Framebuffer=".concat(n);a["i"].log(t,i)()}return Object(c["a"])(f),this.gl.useProgram(this.handle),!(!this._areTexturesRenderable()||0===r||l&&0===h)&&(f.bindForDraw(r,h,()=>{if(void 0!==g&&(b=Object.assign({},b,{framebuffer:g})),d){const t=Object(z["c"])(e);d.begin(t)}this._bindTextures(),Object(a["m"])(this.gl,b,()=>{o&&l?this.gl2.drawElementsInstanced(e,r,u,n,h):o&&Object(a["h"])(this.gl)&&!isNaN(i)&&!isNaN(s)?this.gl2.drawRangeElements(e,i,s,r,u,n):o?this.gl.drawElements(e,r,u,n):l?this.gl2.drawArraysInstanced(e,n,r,h):this.gl.drawArrays(e,n,r)}),d&&d.end()}),!0)}setUniforms(t={}){a["i"].priority>=2&&_(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const e in t){const r=t[e],n=this._uniformSetters[e];if(n){let t=r,a=!1;if(t instanceof s["a"]&&(t=t.texture),t instanceof i["a"])if(a=this.uniforms[e]!==r,a){void 0===n.textureIndex&&(n.textureIndex=this._textureIndexCounter++);const r=t,{textureIndex:i}=n;r.bind(i),t=i,this._textureUniforms[e]=r}else t=n.textureIndex;else this._textureUniforms[e]&&delete this._textureUniforms[e];(n(t)||a)&&E(this.uniforms,e,r)}}return this}_areTexturesRenderable(){let t=!0;for(const e in this._textureUniforms){const r=this._textureUniforms[e];r.update(),t=t&&r.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const e=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(e)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const e=this.gl.getAttachedShaders(t),r={};for(const n of e){const t=this.gl.getShaderParameter(this.handle,35663);switch(t){case 35633:r.vs=new U({handle:n});break;case 35632:r.fs=new k({handle:n});break;default:}}return r}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const t=this._getName();this.id=Object(M["c"])(t)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),a["i"].time(X,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),a["i"].timeEnd(X,"linkProgram for ".concat(this._getName()))(),t.debug||a["i"].level>0){const e=t.getProgramParameter(this.handle,35714);if(!e)throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));t.validateProgram(this.handle);const r=t.getProgramParameter(this.handle,35715);if(!r)throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let e=0;e<this._uniformCount;e++){const r=this.gl.getActiveUniform(this.handle,e),{name:n}=A(r.name);let i=t.getUniformLocation(this.handle,n);if(this._uniformSetters[n]=y(t,i,r),r.size>1)for(let e=0;e<r.size;e++)i=t.getUniformLocation(this.handle,"".concat(n,"[").concat(e,"]")),this._uniformSetters["".concat(n,"[").concat(e,"]")]=y(t,i,r)}this._textureIndexCounter=0}getActiveUniforms(t,e){return this.gl2.getActiveUniforms(this.handle,t,e)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,e){return this.gl2.getActiveUniformBlockParameter(this.handle,t,e)}uniformBlockBinding(t,e){this.gl2.uniformBlockBinding(this.handle,t,e)}}},"3a7b":function(t,e,r){var n=r("ebb5"),i=r("b727").findIndex,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("findIndex",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0)}))},"3c5d":function(t,e,r){var n=r("ebb5"),i=r("50c4"),s=r("182d"),a=r("7b0b"),o=r("d039"),c=n.aTypedArray,u=n.exportTypedArrayMethod,h=o((function(){new Int8Array(1).set({})}));u("set",(function(t){c(this);var e=s(arguments.length>1?arguments[1]:void 0,1),r=this.length,n=a(t),o=i(n.length),u=0;if(o+e>r)throw RangeError("Wrong length");while(u<o)this[e+u]=n[u++]}),h)},"3fcc":function(t,e,r){var n=r("ebb5"),i=r("b727").map,s=r("b6b7"),a=n.aTypedArray,o=n.exportTypedArrayMethod;o("map",(function(t){return i(a(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(s(t))(e)}))}))},"45f7":function(t,e,r){r.d(e,"a",(function(){return b}));var n=r("2fc2"),i=r("7779"),s=r("b4c9"),a=r("89e8"),o=r("0b1c");const c=34918,u=34919,h=35007,l=36795,f=35976,d=35887,g=36202;class b extends n["a"]{static isSupported(t,e=[]){const r=Object(a["h"])(t),n=Object(i["b"])(t,s["a"].TIMER_QUERY);let c=r||n;for(const i of e)switch(i){case"queries":c=c&&r;break;case"timers":c=c&&n;break;default:Object(o["a"])(!1)}return c}constructor(t,e={}){super(t,e),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(h)}beginOcclusionQuery({conservative:t=!1}={}){return this.begin(t?g:d)}beginTransformFeedbackQuery(){return this.begin(f)}begin(t){return this._queryPending||(this.target=t,this.gl2.beginQuery(this.target,this.handle)),this}end(){return this._queryPending||this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,u);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(l)}getResult(){return this.gl2.getQueryParameter(this.handle,c)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(t=Number.POSITIVE_INFINITY){if(this._pollingPromise)return this._pollingPromise;let e=0;return this._pollingPromise=new Promise((r,n)=>{const i=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):e++>t?(n("Timed out"),this._pollingPromise=null):requestAnimationFrame(i)};requestAnimationFrame(i)}),this._pollingPromise}_createHandle(){return b.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}},"4ea45":function(t,e,r){function n(t,e){const{maxElts:r=16,size:n=1}=e;let s="[";for(let o=0;o<t.length&&o<r;++o)o>0&&(s+=",".concat(o%n===0?" ":"")),s+=i(t[o],e);const a=t.length>r?"...":"]";return"".concat(s).concat(a)}function i(t,e={}){const r=1e-16,{isInteger:i=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return n(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<r)return i?"0":"0.";if(i)return t.toFixed(0);if(Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const s=t.toPrecision(2),a=s.indexOf(".0");return a===s.length-2?s.slice(0,-1):s}r.d(e,"a",(function(){return i}))},"4f61":function(t,e,r){r.d(e,"a",(function(){return c}));var n=r("07df"),i=r("0b1c"),s=r("2c4f");const a={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},o={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class c{static getBytesPerElement(t){const e=Object(n["c"])(t.type||5126);return e.BYTES_PER_ELEMENT}static getBytesPerVertex(t){Object(i["a"])(t.size);const e=Object(n["c"])(t.type||5126);return e.BYTES_PER_ELEMENT*t.size}static resolve(...t){return new c(...[a,...t])}constructor(...t){t.forEach(t=>this._assign(t)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return c.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return c.getBytesPerVertex(this)}_assign(t={}){return t=Object(s["a"])("Accessor",t,o),void 0!==t.type&&(this.type=t.type,5124!==t.type&&5125!==t.type||(this.integer=!0)),void 0!==t.size&&(this.size=t.size),void 0!==t.offset&&(this.offset=t.offset),void 0!==t.stride&&(this.stride=t.stride),void 0!==t.normalized&&(this.normalized=t.normalized),void 0!==t.integer&&(this.integer=t.integer),void 0!==t.divisor&&(this.divisor=t.divisor),void 0!==t.buffer&&(this.buffer=t.buffer),void 0!==t.index&&("boolean"===typeof t.index?this.index=t.index?1:0:this.index=t.index),void 0!==t.instanced&&(this.divisor=t.instanced?1:0),void 0!==t.isInstanced&&(this.divisor=t.isInstanced?1:0),this}}},"512ce":function(t,e,r){var n=r("342f"),i=n.match(/AppleWebKit\/(\d+)\./);t.exports=!!i&&+i[1]},"55da":function(t,e,r){r.d(e,"c",(function(){return s})),r.d(e,"b",(function(){return a})),r.d(e,"a",(function(){return o}));var n=r("0b1c");const i={};function s(t="id"){i[t]=i[t]||1;const e=i[t]++;return"".concat(t,"-").concat(e)}function a(t){return Object(n["a"])("number"===typeof t,"Input must be a number"),t&&0===(t&t-1)}function o(t){let e=!0;for(const r in t){e=!1;break}return e}},"56f3":function(t,e,r){(function(t){var n=r("6b74"),i=r("370d");r.d(e,"a",(function(){return i["a"]})),r.d(e,"b",(function(){return n["e"]}));const s={self:"undefined"!==typeof self&&self,window:"undefined"!==typeof window&&window,global:"undefined"!==typeof t&&t},a=s.global||s.self||s.window;a.mathgl={config:n["a"]}}).call(this,r("c8ba"))},"5e89":function(t,e,r){var n=r("861d"),i=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&i(t)===t}},"5f96":function(t,e,r){var n=r("ebb5"),i=n.aTypedArray,s=n.exportTypedArrayMethod,a=[].join;s("join",(function(t){return a.apply(i(this),arguments)}))},"60bd":function(t,e,r){var n=r("da84"),i=r("ebb5"),s=r("e260"),a=r("b622"),o=a("iterator"),c=n.Uint8Array,u=s.values,h=s.keys,l=s.entries,f=i.aTypedArray,d=i.exportTypedArrayMethod,g=c&&c.prototype[o],b=!!g&&("values"==g.name||void 0==g.name),m=function(){return u.call(f(this))};d("entries",(function(){return l.call(f(this))})),d("keys",(function(){return h.call(f(this))})),d("values",m,!b),d(o,m,!b)},"621a":function(t,e,r){var n=r("da84"),i=r("83ab"),s=r("a981"),a=r("9112"),o=r("e2cc"),c=r("d039"),u=r("19aa"),h=r("a691"),l=r("50c4"),f=r("0b25"),d=r("77a7"),g=r("e163"),b=r("d2bb"),m=r("241c").f,p=r("9bf2").f,y=r("81d5"),A=r("d44e"),_=r("69f3"),T=_.get,E=_.set,v="ArrayBuffer",O="DataView",w="prototype",x="Wrong length",I="Wrong index",L=n[v],R=L,S=n[O],P=S&&S[w],N=Object.prototype,j=n.RangeError,B=d.pack,F=d.unpack,M=function(t){return[255&t]},C=function(t){return[255&t,t>>8&255]},D=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},U=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},k=function(t){return B(t,23,4)},V=function(t){return B(t,52,8)},z=function(t,e){p(t[w],e,{get:function(){return T(this)[e]}})},H=function(t,e,r,n){var i=f(r),s=T(t);if(i+e>s.byteLength)throw j(I);var a=T(s.buffer).bytes,o=i+s.byteOffset,c=a.slice(o,o+e);return n?c:c.reverse()},G=function(t,e,r,n,i,s){var a=f(r),o=T(t);if(a+e>o.byteLength)throw j(I);for(var c=T(o.buffer).bytes,u=a+o.byteOffset,h=n(+i),l=0;l<e;l++)c[u+l]=h[s?l:e-l-1]};if(s){if(!c((function(){L(1)}))||!c((function(){new L(-1)}))||c((function(){return new L,new L(1.5),new L(NaN),L.name!=v}))){R=function(t){return u(this,R),new L(f(t))};for(var X,W=R[w]=L[w],Y=m(L),q=0;Y.length>q;)(X=Y[q++])in R||a(R,X,L[X]);W.constructor=R}b&&g(P)!==N&&b(P,N);var Q=new S(new R(2)),K=P.setInt8;Q.setInt8(0,2147483648),Q.setInt8(1,2147483649),!Q.getInt8(0)&&Q.getInt8(1)||o(P,{setInt8:function(t,e){K.call(this,t,e<<24>>24)},setUint8:function(t,e){K.call(this,t,e<<24>>24)}},{unsafe:!0})}else R=function(t){u(this,R,v);var e=f(t);E(this,{bytes:y.call(new Array(e),0),byteLength:e}),i||(this.byteLength=e)},S=function(t,e,r){u(this,S,O),u(t,R,O);var n=T(t).byteLength,s=h(e);if(s<0||s>n)throw j("Wrong offset");if(r=void 0===r?n-s:l(r),s+r>n)throw j(x);E(this,{buffer:t,byteLength:r,byteOffset:s}),i||(this.buffer=t,this.byteLength=r,this.byteOffset=s)},i&&(z(R,"byteLength"),z(S,"buffer"),z(S,"byteLength"),z(S,"byteOffset")),o(S[w],{getInt8:function(t){return H(this,1,t)[0]<<24>>24},getUint8:function(t){return H(this,1,t)[0]},getInt16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=H(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return U(H(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return U(H(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return F(H(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return F(H(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){G(this,1,t,M,e)},setUint8:function(t,e){G(this,1,t,M,e)},setInt16:function(t,e){G(this,2,t,C,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){G(this,2,t,C,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){G(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){G(this,4,t,D,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){G(this,4,t,k,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){G(this,8,t,V,e,arguments.length>2?arguments[2]:void 0)}});A(R,v),A(S,O),t.exports={ArrayBuffer:R,DataView:S}},"649e":function(t,e,r){var n=r("ebb5"),i=r("b727").some,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("some",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0)}))},"6b74":function(t,e,r){r.d(e,"a",(function(){return i})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return h})),r.d(e,"b",(function(){return l}));r("b52f");Math.PI;const n=1/180*Math.PI,i={};function s(t){return Math.round(t/i.EPSILON)*i.EPSILON}function a(t,{precision:e=i.precision||4}={}){return t=s(t),""+parseFloat(t.toPrecision(e))}function o(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function c(t){return t.clone?t.clone():new Array(t.length)}function u(t,e,r){if(o(t)){r=r||c(t);for(let n=0;n<r.length&&n<t.length;++n)r[n]=e(t[n],n,r);return r}return e(t)}function h(t,e){return u(t,t=>t*n,e)}function l(t,e,r){const n=i.EPSILON;r&&(i.EPSILON=r);try{if(t===e)return!0;if(o(t)&&o(e)){if(t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(!l(t[r],e[r]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):!(!Number.isFinite(t)||!Number.isFinite(e))&&Math.abs(t-e)<=i.EPSILON*Math.max(1,Math.abs(t),Math.abs(e))}finally{i.EPSILON=n}}i.EPSILON=1e-12,i.debug=!1,i.precision=4,i.printTypes=!1,i.printDegrees=!1,i.printRowMajor=!0},"6e98":function(t,e,r){r.d(e,"a",(function(){return o}));var n=r("89e8"),i=r("2fc2"),s=r("b1cf"),a=r("55da");class o extends i["a"]{static isSupported(t){return Object(n["h"])(t)}constructor(t,e={}){Object(n["a"])(t),super(t,e),this.initialize(e),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(t={}){return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Object(a["a"])(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(t={}){return this.bind(()=>{for(const e in t)this.setBuffer(e,t[e])}),this}setBuffer(t,e){const r=this._getVaryingIndex(t),{buffer:i,byteSize:s,byteOffset:a}=this._getBufferParams(e);return r<0?(this.unused[t]=i,n["i"].warn(()=>"".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[r]=e,this.bindOnUse||this._bindBuffer(r,i,a,s),this)}begin(t=0){return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let e,r,n;return t instanceof s["a"]===!1?(n=t.buffer,r=t.byteSize,e=t.byteOffset):n=t,void 0===e&&void 0===r||(e=e||0,r=r||n.byteLength-e),{buffer:n,byteOffset:e,byteSize:r}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const e=Number(t);return Number.isFinite(e)?e:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:e,byteSize:r,byteOffset:n}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,e,n,r)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,e,r=0,n){const i=e&&e.handle;return i&&void 0!==n?this.gl.bindBufferRange(35982,t,i,r,n):this.gl.bindBufferBase(35982,t,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}},"72f7":function(t,e,r){var n=r("ebb5").exportTypedArrayMethod,i=r("d039"),s=r("da84"),a=s.Uint8Array,o=a&&a.prototype||{},c=[].toString,u=[].join;i((function(){c.call({})}))&&(c=function(){return u.call(this)});var h=o.toString!=c;n("toString",c,h)},"735e":function(t,e,r){var n=r("ebb5"),i=r("81d5"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("fill",(function(t){return i.apply(s(this),arguments)}))},"74e8":function(t,e,r){var n=r("23e7"),i=r("da84"),s=r("83ab"),a=r("8aa7"),o=r("ebb5"),c=r("621a"),u=r("19aa"),h=r("5c6c"),l=r("9112"),f=r("5e89"),d=r("50c4"),g=r("0b25"),b=r("182d"),m=r("a04b"),p=r("5135"),y=r("f5df"),A=r("861d"),_=r("d9b5"),T=r("7c73"),E=r("d2bb"),v=r("241c").f,O=r("a078"),w=r("b727").forEach,x=r("2626"),I=r("9bf2"),L=r("06cf"),R=r("69f3"),S=r("7156"),P=R.get,N=R.set,j=I.f,B=L.f,F=Math.round,M=i.RangeError,C=c.ArrayBuffer,D=c.DataView,U=o.NATIVE_ARRAY_BUFFER_VIEWS,k=o.TYPED_ARRAY_CONSTRUCTOR,V=o.TYPED_ARRAY_TAG,z=o.TypedArray,H=o.TypedArrayPrototype,G=o.aTypedArrayConstructor,X=o.isTypedArray,W="BYTES_PER_ELEMENT",Y="Wrong length",q=function(t,e){var r=0,n=e.length,i=new(G(t))(n);while(n>r)i[r]=e[r++];return i},Q=function(t,e){j(t,e,{get:function(){return P(this)[e]}})},K=function(t){var e;return t instanceof C||"ArrayBuffer"==(e=y(t))||"SharedArrayBuffer"==e},Z=function(t,e){return X(t)&&!_(e)&&e in t&&f(+e)&&e>=0},J=function(t,e){return e=m(e),Z(t,e)?h(2,t[e]):B(t,e)},$=function(t,e,r){return e=m(e),!(Z(t,e)&&A(r)&&p(r,"value"))||p(r,"get")||p(r,"set")||r.configurable||p(r,"writable")&&!r.writable||p(r,"enumerable")&&!r.enumerable?j(t,e,r):(t[e]=r.value,t)};s?(U||(L.f=J,I.f=$,Q(H,"buffer"),Q(H,"byteOffset"),Q(H,"byteLength"),Q(H,"length")),n({target:"Object",stat:!0,forced:!U},{getOwnPropertyDescriptor:J,defineProperty:$}),t.exports=function(t,e,r){var s=t.match(/\d+$/)[0]/8,o=t+(r?"Clamped":"")+"Array",c="get"+t,h="set"+t,f=i[o],m=f,p=m&&m.prototype,y={},_=function(t,e){var r=P(t);return r.view[c](e*s+r.byteOffset,!0)},I=function(t,e,n){var i=P(t);r&&(n=(n=F(n))<0?0:n>255?255:255&n),i.view[h](e*s+i.byteOffset,n,!0)},L=function(t,e){j(t,e,{get:function(){return _(this,e)},set:function(t){return I(this,e,t)},enumerable:!0})};U?a&&(m=e((function(t,e,r,n){return u(t,m,o),S(function(){return A(e)?K(e)?void 0!==n?new f(e,b(r,s),n):void 0!==r?new f(e,b(r,s)):new f(e):X(e)?q(m,e):O.call(m,e):new f(g(e))}(),t,m)})),E&&E(m,z),w(v(f),(function(t){t in m||l(m,t,f[t])})),m.prototype=p):(m=e((function(t,e,r,n){u(t,m,o);var i,a,c,h=0,l=0;if(A(e)){if(!K(e))return X(e)?q(m,e):O.call(m,e);i=e,l=b(r,s);var f=e.byteLength;if(void 0===n){if(f%s)throw M(Y);if(a=f-l,a<0)throw M(Y)}else if(a=d(n)*s,a+l>f)throw M(Y);c=a/s}else c=g(e),a=c*s,i=new C(a);N(t,{buffer:i,byteOffset:l,byteLength:a,length:c,view:new D(i)});while(h<c)L(t,h++)})),E&&E(m,z),p=m.prototype=T(H)),p.constructor!==m&&l(p,"constructor",m),l(p,k,m),V&&l(p,V,o),y[o]=m,n({global:!0,forced:m!=f,sham:!U},y),W in m||l(m,W,s),W in p||l(p,W,s),x(o)}):t.exports=function(){}},7779:function(t,e,r){r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return c}));var n=r("b4c9"),i=r("89e8"),s=r("0b1c");const a=2;function o(t,e){return e=Array.isArray(e)?e:[e],e.every(e=>u(t,e))}function c(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in n["b"])void 0===t.luma.caps[e]&&(t.luma.caps[e]=u(t,e));return t.luma.caps}function u(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},void 0===t.luma.caps[e]&&(t.luma.caps[e]=h(t,e)),t.luma.caps[e]||i["i"].log(a,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function h(t,e){const r=n["b"][e];let a;Object(s["a"])(r,e);const o=Object(i["h"])(t)&&r[1]||r[0];if("function"===typeof o)a=o(t);else if(Array.isArray(o)){a=!0;for(const e of o)a=a&&Boolean(t.getExtension(e))}else"string"===typeof o?a=Boolean(t.getExtension(o)):"boolean"===typeof o?a=o:Object(s["a"])(!1);return a}},"77a7":function(t,e){var r=Math.abs,n=Math.pow,i=Math.floor,s=Math.log,a=Math.LN2,o=function(t,e,o){var c,u,h,l=new Array(o),f=8*o-e-1,d=(1<<f)-1,g=d>>1,b=23===e?n(2,-24)-n(2,-77):0,m=t<0||0===t&&1/t<0?1:0,p=0;for(t=r(t),t!=t||t===1/0?(u=t!=t?1:0,c=d):(c=i(s(t)/a),t*(h=n(2,-c))<1&&(c--,h*=2),t+=c+g>=1?b/h:b*n(2,1-g),t*h>=2&&(c++,h/=2),c+g>=d?(u=0,c=d):c+g>=1?(u=(t*h-1)*n(2,e),c+=g):(u=t*n(2,g-1)*n(2,e),c=0));e>=8;l[p++]=255&u,u/=256,e-=8);for(c=c<<e|u,f+=e;f>0;l[p++]=255&c,c/=256,f-=8);return l[--p]|=128*m,l},c=function(t,e){var r,i=t.length,s=8*i-e-1,a=(1<<s)-1,o=a>>1,c=s-7,u=i-1,h=t[u--],l=127&h;for(h>>=7;c>0;l=256*l+t[u],u--,c-=8);for(r=l&(1<<-c)-1,l>>=-c,c+=e;c>0;r=256*r+t[u],u--,c-=8);if(0===l)l=1-o;else{if(l===a)return r?NaN:h?-1/0:1/0;r+=n(2,e),l-=o}return(h?-1:1)*r*n(2,l-e)};t.exports={pack:o,unpack:c}},"7aa2":function(t,e,r){r.d(e,"a",(function(){return o}));var n=r("b1cf"),i=r("ae79"),s=r("a1e8"),a=r("4ea45");function o({vertexArray:t,header:e="Attributes"}){if(!t.configuration)return{};const r={};t.elements&&(r.ELEMENT_ARRAY_BUFFER=c(t,t.elements,null,e));const n=t.values;for(const i in n){const s=t._getAttributeInfo(i);if(s){let a="".concat(i,": ").concat(s.name);const o=t.accessors[s.location];o&&(a="".concat(i,": ").concat(u(s.name,o))),r[a]=c(t,n[i],o,e)}}return r}function c(t,e,r,s){const{gl:o}=t;if(!e)return{[s]:"null","Format ":"N/A"};let c,u,h,l="NOT PROVIDED",f=1,d=0,g=0;if(r&&(l=r.type,f=r.size,l=String(l).replace("Array",""),c=-1!==l.indexOf("nt")),e instanceof n["a"]){const t=e,{data:n,changed:b}=t.getDebugData();let m;if(u=b?"*":"",h=n,g=t.byteLength,d=g/n.BYTES_PER_ELEMENT/f,r){const t=r.divisor>0;m="".concat(t?"I ":"P "," ").concat(d," (x").concat(f,"=").concat(g," bytes ").concat(Object(i["a"])(o,l),")")}else c=!0,m="".concat(g," bytes");return{[s]:"".concat(u).concat(Object(a["a"])(h,{size:f,isInteger:c})),"Format ":m}}return h=e,f=e.length,l=String(e.constructor.name).replace("Array",""),c=-1!==l.indexOf("nt"),{[s]:"".concat(Object(a["a"])(h,{size:f,isInteger:c})," (constant)"),"Format ":"".concat(f,"x").concat(l," (constant)")}}function u(t,e){const{type:r,size:n}=e,i=Object(s["b"])(r,n);return i?"".concat(t," (").concat(i.name,")"):t}},"7f94":function(t,e,r){r.d(e,"a",(function(){return c}));var n=r("89e8"),i=r("97a3"),s=r("0b1c");let a="";function o(t,e){return Object(s["a"])("string"===typeof t),t=a+t,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){n(i)}})}class c extends i["a"]{static isSupported(t,e){return i["a"].isSupported(t,e)}constructor(t,e={}){Object(n["b"])(t),(e instanceof Promise||"string"===typeof e)&&(e={data:e}),"string"===typeof e.data&&(e=Object.assign({},e,{data:o(e.data)})),super(t,Object.assign({},e,{target:3553})),this.initialize(e),Object.seal(this)}}},"81d5":function(t,e,r){var n=r("7b0b"),i=r("23cb"),s=r("50c4");t.exports=function(t){var e=n(this),r=s(e.length),a=arguments.length,o=i(a>1?arguments[1]:void 0,r),c=a>2?arguments[2]:void 0,u=void 0===c?r:i(c,r);while(u>o)e[o++]=t;return e}},"82f8":function(t,e,r){var n=r("ebb5"),i=r("4d64").includes,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("includes",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0)}))},"8a59":function(t,e,r){var n=r("74e8");n("Uint8",(function(t){return function(e,r,n){return t(this,e,r,n)}}),!0)},"8aa7":function(t,e,r){var n=r("da84"),i=r("d039"),s=r("1c7e"),a=r("ebb5").NATIVE_ARRAY_BUFFER_VIEWS,o=n.ArrayBuffer,c=n.Int8Array;t.exports=!a||!i((function(){c(1)}))||!i((function(){new c(-1)}))||!s((function(t){new c,new c(null),new c(1.5),new c(t)}),!0)||i((function(){return 1!==new c(new o(2),1,void 0).length}))},"97a3":function(t,e,r){r.d(e,"a",(function(){return f}));var n=r("89e8"),i=r("c526"),s=r("2fc2"),a=r("b1cf"),o=r("b980"),c=r("55da"),u=r("0b1c");const h=[9729,9728],l=i["global"].WebGLBuffer||function(){};class f extends s["a"]{static isSupported(t,e={}){const{format:r,linearFiltering:n}=e;let i=!0;return r&&(i=i&&Object(o["d"])(t,r),i=i&&(!n||Object(o["e"])(t,r))),i}constructor(t,e){const{id:r=Object(c["c"])("texture"),handle:n,target:i}=e;super(t,{id:r,handle:n}),this.target=i,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(t={}){let e=t.data;if(e instanceof Promise)return e.then(e=>this.initialize(Object.assign({},t,{pixels:e,data:e}))),this;const r="undefined"!==typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(r&&e.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,e.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:s=6408,border:a=0,recreate:o=!1,parameters:c={},pixelStore:u={},textureUnit:h}=t;e||(e=i);let{width:l,height:f,dataFormat:d,type:g,compressed:b=!1,mipmaps:m=!0}=t;const{depth:p=0}=t;return({width:l,height:f,compressed:b,dataFormat:d,type:g}=this._deduceParameters({format:s,type:g,dataFormat:d,compressed:b,data:e,width:l,height:f})),this.width=l,this.height=f,this.depth=p,this.format=s,this.type=g,this.dataFormat=d,this.border=a,this.textureUnit=h,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(n["i"].warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(c)),this.mipmaps=m,this.setImageData({data:e,width:l,height:f,depth:p,format:s,type:g,dataFormat:d,border:a,mipmaps:m,parameters:u,compressed:b}),m&&this.generateMipmap(),this.setParameters(c),o&&(this.data=e),r&&(this._video={video:e,parameters:c,lastTime:e.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?e.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:e,lastTime:r}=this._video;if(r===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:e}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize({height:t,width:e,mipmaps:r=!1}){return e!==this.width||t!==this.height?this.initialize({width:e,height:t,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:r}):this}generateMipmap(t={}){return this._isNPOT()?(n["i"].warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Object(n["m"])(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:e=this.target,pixels:r=null,level:i=0,format:s=this.format,border:a=this.border,offset:c=0,parameters:h={}}=t;let{data:l=null,type:f=this.type,width:d=this.width,height:g=this.height,dataFormat:b=this.dataFormat,compressed:m=!1}=t;l||(l=r),({type:f,dataFormat:b,compressed:m,width:d,height:g}=this._deduceParameters({format:s,type:f,dataFormat:b,compressed:m,data:l,width:d,height:g}));const{gl:p}=this;p.bindTexture(this.target,this.handle);let y,A=null;if(({data:l,dataType:A}=this._getDataType({data:l,compressed:m})),Object(n["m"])(this.gl,h,()=>{switch(A){case"null":p.texImage2D(e,i,s,d,g,a,b,f,l);break;case"typed-array":p.texImage2D(e,i,s,d,g,a,b,f,l,c);break;case"buffer":y=Object(n["a"])(p),y.bindBuffer(35052,l.handle||l),y.texImage2D(e,i,s,d,g,a,b,f,c),y.bindBuffer(35052,null);break;case"browser-object":Object(n["h"])(p)?p.texImage2D(e,i,s,d,g,a,b,f,l):p.texImage2D(e,i,s,b,f,l);break;case"compressed":for(const[t,r]of l.entries())p.compressedTexImage2D(e,t,r.format,r.width,r.height,a,r.data);break;default:Object(u["a"])(!1,"Unknown image data type")}}),l&&l.byteLength)this._trackAllocatedMemory(l.byteLength,"Texture");else{const t=o["a"][this.dataFormat]||4,e=o["c"][this.type]||1;this._trackAllocatedMemory(this.width*this.height*t*e,"Texture")}return this.loaded=!0,this}setSubImageData({target:t=this.target,pixels:e=null,data:r=null,x:i=0,y:s=0,width:o=this.width,height:c=this.height,level:h=0,format:f=this.format,type:d=this.type,dataFormat:g=this.dataFormat,compressed:b=!1,offset:m=0,border:p=this.border,parameters:y={}}){if(({type:d,dataFormat:g,compressed:b,width:o,height:c}=this._deduceParameters({format:f,type:d,dataFormat:g,compressed:b,data:r,width:o,height:c})),Object(u["a"])(0===this.depth,"texSubImage not supported for 3D textures"),r||(r=e),r&&r.data){const t=r;r=t.data,o=t.shape[0],c=t.shape[1]}r instanceof a["a"]&&(r=r.handle),this.gl.bindTexture(this.target,this.handle),Object(n["m"])(this.gl,y,()=>{if(b)this.gl.compressedTexSubImage2D(t,h,i,s,o,c,f,r);else if(null===r)this.gl.texSubImage2D(t,h,i,s,o,c,g,d,null);else if(ArrayBuffer.isView(r))this.gl.texSubImage2D(t,h,i,s,o,c,g,d,r,m);else if(r instanceof l){const e=Object(n["a"])(this.gl);e.bindBuffer(35052,r),e.texSubImage2D(t,h,i,s,o,c,g,d,m),e.bindBuffer(35052,null)}else if(Object(n["h"])(this.gl)){const e=Object(n["a"])(this.gl);e.texSubImage2D(t,h,i,s,o,c,g,d,r)}else this.gl.texSubImage2D(t,h,i,s,g,d,r)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(t={}){return n["i"].error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,this.handle),t}unbind(t=this.textureUnit){const{gl:e}=this;return void 0!==t&&(this.textureUnit=t,e.activeTexture(33984+t)),e.bindTexture(this.target,null),t}_getDataType({data:t,compressed:e=!1}){return e?{data:t,dataType:"compressed"}:null===t?{data:t,dataType:"null"}:ArrayBuffer.isView(t)?{data:t,dataType:"typed-array"}:t instanceof a["a"]?{data:t.handle,dataType:"buffer"}:t instanceof l?{data:t,dataType:"buffer"}:{data:t,dataType:"browser-object"}}_deduceParameters(t){const{format:e,data:r}=t;let{width:n,height:i,dataFormat:s,type:a,compressed:c}=t;const u=o["b"][e];return s=s||u&&u.dataFormat,a=a||u&&u.types[0],c=c||u&&u.compressed,({width:n,height:i}=this._deduceImageSize(r,n,i)),{dataFormat:s,type:a,compressed:c,width:n,height:i,format:e,data:r}}_deduceImageSize(t,e,r){let n;return n="undefined"!==typeof ImageData&&t instanceof ImageData?{width:t.width,height:t.height}:"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement?{width:t.naturalWidth,height:t.naturalHeight}:"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?{width:t.width,height:t.height}:"undefined"!==typeof HTMLVideoElement&&t instanceof HTMLVideoElement?{width:t.videoWidth,height:t.videoHeight}:t?{width:e,height:r}:{width:e>=0?e:1,height:r>=0?r:1},Object(u["a"])(n,"Could not deduced texture size"),Object(u["a"])(void 0===e||n.width===e,"Deduced texture width does not match supplied width"),Object(u["a"])(void 0===r||n.height===r,"Deduced texture height does not match supplied height"),n}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const e=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),e}}_setParameter(t,e){switch(this.gl.bindTexture(this.target,this.handle),e=this._getNPOTParam(t,e),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,e);break;case 4096:case 4097:Object(u["a"])(!1);break;default:this.gl.texParameteri(this.target,t,e);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return!Object(n["h"])(this.gl)&&(!(!this.width||!this.height)&&(!Object(c["b"])(this.width)||!Object(c["b"])(this.height)))}_updateForNPOT(t){void 0===t[this.gl.TEXTURE_MIN_FILTER]&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),void 0===t[this.gl.TEXTURE_WRAP_S]&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),void 0===t[this.gl.TEXTURE_WRAP_T]&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,e){if(this._isNPOT())switch(t){case 10241:-1===h.indexOf(e)&&(e=9729);break;case 10242:case 10243:33071!==e&&(e=33071);break;default:break}return e}}},"9a8c":function(t,e,r){var n=r("ebb5"),i=r("145e"),s=n.aTypedArray,a=n.exportTypedArrayMethod;a("copyWithin",(function(t,e){return i.call(s(this),t,e,arguments.length>2?arguments[2]:void 0)}))},"9f85":function(t,e,r){r.d(e,"a",(function(){return u}));var n=r("2fc2");const i="EXT_color_buffer_float";var s={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:i,bpp:2},[33327]:{gl2:i,bpp:4},[34842]:{gl2:i,bpp:8},[33326]:{gl2:i,bpp:4},[33328]:{gl2:i,bpp:8},[34836]:{gl2:i,bpp:16},[35898]:{gl2:i,bpp:4}},a=r("89e8"),o=r("0b1c");function c(t,e,r){const n=r[e];if(!n)return!1;const i=Object(a["h"])(t)&&n.gl2||n.gl1;return"string"===typeof i?t.getExtension(i):i}class u extends n["a"]{static isSupported(t,{format:e}={format:null}){return!e||c(t,e,s)}static getSamplesForFormat(t,{format:e}){return t.getInternalformatParameter(36161,e,32937)}constructor(t,e={}){super(t,e),this.initialize(e),Object.seal(this)}initialize({format:t,width:e=1,height:r=1,samples:n=0}){return Object(o["a"])(t,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),0!==n&&Object(a["h"])(this.gl)?this.gl.renderbufferStorageMultisample(36161,n,t,e,r):this.gl.renderbufferStorage(36161,t,e,r),this.format=t,this.width=e,this.height=r,this.samples=n,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*s[this.format].bpp),this}resize({width:t,height:e}){return t!==this.width||e!==this.height?this.initialize({width:t,height:e,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){this.gl.bindRenderbuffer(36161,this.handle);const e=this.gl.getRenderbufferParameter(36161,t);return e}}},a078:function(t,e,r){var n=r("7b0b"),i=r("50c4"),s=r("9a1f"),a=r("35a1"),o=r("e95a"),c=r("0366"),u=r("ebb5").aTypedArrayConstructor;t.exports=function(t){var e,r,h,l,f,d,g=n(t),b=arguments.length,m=b>1?arguments[1]:void 0,p=void 0!==m,y=a(g);if(void 0!=y&&!o(y)){f=s(g,y),d=f.next,g=[];while(!(l=d.call(f)).done)g.push(l.value)}for(p&&b>2&&(m=c(m,arguments[2],2)),r=i(g.length),h=new(u(this))(r),e=0;r>e;e++)h[e]=p?m(g[e],e):g[e];return h}},a1e8:function(t,e,r){r.d(e,"c",(function(){return V})),r.d(e,"a",(function(){return z})),r.d(e,"b",(function(){return H}));var n=r("0b1c");const i=5120,s=5121,a=5122,o=5123,c=0,u=1,h=2,l=3,f=4,d=5,g=6,b=5126,m=35664,p=35665,y=35666,A=5124,_=35667,T=35668,E=35669,v=5125,O=36294,w=36295,x=36296,I=35670,L=35671,R=35672,S=35673,P=35674,N=35675,j=35676,B=35685,F=35686,M=35687,C=35688,D=35689,U=35690,k={[b]:[b,1,"float"],[m]:[b,2,"vec2"],[p]:[b,3,"vec3"],[y]:[b,4,"vec4"],[A]:[A,1,"int"],[_]:[A,2,"ivec2"],[T]:[A,3,"ivec3"],[E]:[A,4,"ivec4"],[v]:[v,1,"uint"],[O]:[v,2,"uvec2"],[w]:[v,3,"uvec3"],[x]:[v,4,"uvec4"],[I]:[b,1,"bool"],[L]:[b,2,"bvec2"],[R]:[b,3,"bvec3"],[S]:[b,4,"bvec4"],[P]:[b,8,"mat2"],[B]:[b,8,"mat2x3"],[F]:[b,8,"mat2x4"],[N]:[b,12,"mat3"],[M]:[b,12,"mat3x2"],[C]:[b,12,"mat3x4"],[j]:[b,16,"mat4"],[D]:[b,16,"mat4x2"],[U]:[b,16,"mat4x3"]};function V(t){switch(t){case c:return c;case u:return u;case l:return u;case h:return u;case f:return f;case d:return f;case g:return f;default:return Object(n["a"])(!1),0}}function z(t){const e=k[t];if(!e)return null;const[r,n]=e;return{type:r,components:n}}function H(t,e){switch(t){case i:case s:case a:case o:t=b;break;default:}for(const r in k){const[n,i,s]=k[r];if(n===t&&i===e)return{glType:r,name:s}}return null}},a511:function(t,e,r){r.d(e,"a",(function(){return d})),r.d(e,"b",(function(){return g}));var n=r("89e8"),i=r("0b1c");const s=256,a=1024,o=16384,c=6144,u=6145,h=6146,l=34041,f="clear: bad arguments";function d(t,{framebuffer:e=null,color:r=null,depth:c=null,stencil:u=null}={}){const h={};e&&(h.framebuffer=e);let l=0;r&&(l|=o,!0!==r&&(h.clearColor=r)),c&&(l|=s,!0!==c&&(h.clearDepth=c)),u&&(l|=a,!0!==c&&(h.clearStencil=c)),Object(i["a"])(0!==l,f),Object(n["m"])(t,h,()=>{t.clear(l)})}function g(t,{framebuffer:e=null,buffer:r=c,drawBuffer:s=0,value:a=[0,0,0,0]}={}){Object(n["a"])(t),Object(n["m"])(t,{framebuffer:e},()=>{switch(r){case c:switch(a.constructor){case Int32Array:t.clearBufferiv(r,s,a);break;case Uint32Array:t.clearBufferuiv(r,s,a);break;case Float32Array:default:t.clearBufferfv(r,s,a)}break;case u:t.clearBufferfv(u,0,[a]);break;case h:t.clearBufferiv(h,0,[a]);break;case l:const[e,n]=a;t.clearBufferfi(l,0,e,n);break;default:Object(i["a"])(!1,f)}})}},a698:function(t,e,r){r.d(e,"a",(function(){return A}));var n=r("89e8"),i=r("4f61"),s=r("b1cf"),a=r("2fc2");let o=null;function c(t){return(!o||o.byteLength<t)&&(o=new ArrayBuffer(t)),o}function u(t,e){const r=c(t.BYTES_PER_ELEMENT*e);return new t(r,0,e)}function h({target:t,source:e,start:r=0,count:n=1}){const i=e.length,s=n*i;let a=0;for(let o=r;a<i;a++)t[o++]=e[a];while(a<s)a<s-a?(t.copyWithin(r+a,r,r+a),a*=2):(t.copyWithin(r+a,r,r+s-a),a=s);return t}var l=r("0b1c"),f=r("5db5");const d="elements must be GL.ELEMENT_ARRAY_BUFFER";class g extends a["a"]{static isSupported(t,e={}){return!e.constantAttributeZero||(Object(n["h"])(t)||"Chrome"===Object(f["a"])())}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new g(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return g.MAX_ATTRIBUTES=g.MAX_ATTRIBUTES||t.getParameter(34921),g.MAX_ATTRIBUTES}static setConstant(t,e,r){switch(r.constructor){case Float32Array:g._setConstantFloatArray(t,e,r);break;case Int32Array:g._setConstantIntArray(t,e,r);break;case Uint32Array:g._setConstantUintArray(t,e,r);break;default:Object(l["a"])(!1)}}constructor(t,e={}){const r=e.id||e.program&&e.program.id;super(t,Object.assign({},e,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=e.isDefaultArray||!1,this.gl2=t,this.initialize(e),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return g.getMaxAttributes(this.gl)}initialize(t={}){return this.setProps(t)}setProps(t){return this}setElementBuffer(t=null,e={}){return Object(l["a"])(!t||34963===t.target,d),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,e,r){if(34963===e.target)return this.setElementBuffer(e,r);const{size:i,type:s,stride:a,offset:o,normalized:c,integer:u,divisor:h}=r,{gl:f,gl2:d}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,e.handle),u?(Object(l["a"])(Object(n["h"])(f)),d.vertexAttribIPointer(t,i,s,a,o)):f.vertexAttribPointer(t,i,s,c,a,o),f.enableVertexAttribArray(t),d.vertexAttribDivisor(t,h||0)}),this}enable(t,e=!0){const r=!e&&0===t&&!g.isSupported(this.gl,{constantAttributeZero:!0});return r||(t=Number(t),this.bind(()=>e?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,e){const r=this._normalizeConstantArrayValue(e),n=r.byteLength*t,i=r.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new s["a"](this.gl,n),a=a||this.buffer.reallocate(n),a=a||!this._compareConstantArrayValues(r,this.bufferValue),a){const t=u(e.constructor,i);h({target:t,source:r,start:0,count:i}),this.buffer.subData(t),this.bufferValue=e}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,e){if(!t||!e||t.length!==e.length||t.constructor!==e.constructor)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}static _setConstantFloatArray(t,e,r){switch(r.length){case 1:t.vertexAttrib1fv(e,r);break;case 2:t.vertexAttrib2fv(e,r);break;case 3:t.vertexAttrib3fv(e,r);break;case 4:t.vertexAttrib4fv(e,r);break;default:Object(l["a"])(!1)}}static _setConstantIntArray(t,e,r){switch(Object(l["a"])(Object(n["h"])(t)),r.length){case 1:t.vertexAttribI1iv(e,r);break;case 2:t.vertexAttribI2iv(e,r);break;case 3:t.vertexAttribI3iv(e,r);break;case 4:t.vertexAttribI4iv(e,r);break;default:Object(l["a"])(!1)}}static _setConstantUintArray(t,e,r){switch(Object(l["a"])(Object(n["h"])(t)),r.length){case 1:t.vertexAttribI1uiv(e,r);break;case 2:t.vertexAttribI2uiv(e,r);break;case 3:t.vertexAttribI3uiv(e,r);break;case 4:t.vertexAttribI4uiv(e,r);break;default:Object(l["a"])(!1)}}_createHandle(){const t=this.gl;return t.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,{location:e}){return Object(l["a"])(Number.isFinite(e)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(e,t);default:return this.gl.getVertexAttrib(e,t)}})}}var b=r("b206");const m="VertexArray: attributes must be Buffers or constants (i.e. typed array)",p=/^(.+)__LOCATION_([0-9]+)$/,y=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class A{constructor(t,e={}){const r=e.id||e.program&&e.program.id;this.id=r,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new g(t),Object(b["a"])(this,"VertexArray","v6.0",y),this.initialize(e),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(t={}){return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const e in t){const r=t[e];this._setAttribute(e,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(t=null,e={}){return this.elements=t,this.elementsAccessor=e,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,e),this}setBuffer(t,e,r={}){if(34963===e.target)return this.setElementBuffer(e,r);const{location:n,accessor:i}=this._resolveLocationAndAccessor(t,e,e.accessor,r);return n>=0&&(this.values[n]=e,this.accessors[n]=i,this.clearDrawParams(),this.vertexArrayObject.setBuffer(n,e,i)),this}setConstant(t,e,r={}){const{location:n,accessor:i}=this._resolveLocationAndAccessor(t,e,Object.assign({size:e.length},r));return n>=0&&(e=this.vertexArrayObject._normalizeConstantArrayValue(e),this.values[n]=e,this.accessors[n]=i,this.clearDrawParams(),this.vertexArrayObject.enable(n,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new s["a"](this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof s["a"]&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const e=this.values[t];e instanceof s["a"]&&this.setBuffer(t,e)}}),this}bindForDraw(t,e,r){let n;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,e),n=r()}),n}_resolveLocationAndAccessor(t,e,r,s){const a={location:-1,accessor:null},{location:o,name:c}=this._getAttributeIndex(t);if(!Number.isFinite(o)||o<0)return this.unused[t]=e,n["i"].once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),a;const u=this._getAttributeInfo(c||o);if(!u)return a;const h=this.accessors[o]||{},f=i["a"].resolve(u.accessor,h,r,s),{size:d,type:g}=f;return Object(l["a"])(Number.isFinite(d)&&Number.isFinite(g)),{location:o,accessor:f}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const e=Number(t);if(Number.isFinite(e))return{location:e};const r=p.exec(t),n=r?r[1]:t,i=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(n)+i,name:n}:{location:-1}}_setAttribute(t,e){if(e instanceof s["a"])this.setBuffer(t,e);else if(Array.isArray(e)&&e.length&&e[0]instanceof s["a"]){const r=e[0],n=e[1];this.setBuffer(t,r,n)}else if(ArrayBuffer.isView(e)||Array.isArray(e)){const r=e;this.setConstant(t,r)}else{if(!(e.buffer instanceof s["a"]))throw new Error(m);{const r=e;this.setBuffer(t,r.buffer,r)}}}_setConstantAttributes(t,e){const r=Math.max(0|t,0|e);let n=this.values[0];ArrayBuffer.isView(n)&&this._setConstantAttributeZero(n,r);for(let i=1;i<this.vertexArrayObject.MAX_ATTRIBUTES;i++)n=this.values[i],ArrayBuffer.isView(n)&&this._setConstantAttribute(i,n)}_setConstantAttributeZero(t,e){if(g.isSupported(this.gl,{constantAttributeZero:!0}))return void this._setConstantAttribute(0,t);const r=this.vertexArrayObject.getConstantBuffer(e,t);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(t,e){g.setConstant(this.gl,t,e)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this._updateDrawParamsForLocation(t,e);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,e){const r=this.values[e],n=this.accessors[e];if(!r)return;const{divisor:i}=n,a=i>0;if(t.isInstanced=t.isInstanced||a,r instanceof s["a"]){const e=r;if(a){const r=e.getVertexCount(n);t.instanceCount=Math.min(t.instanceCount,r)}else{const r=e.getVertexCount(n);t.vertexCount=Math.min(t.vertexCount,r)}}}setElements(t=null,e={}){return n["i"].deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,e)}}},a7bc:function(t,e,r){r.d(e,"b",(function(){return f})),r.d(e,"a",(function(){return d}));r("b1cf");var n=r("d752"),i=r("97a3"),s=r("89e8"),a=r("07df"),o=r("0b1c");function c(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return Object(o["a"])(!1),0}}r("7f94");const u=[34069,34070,34071,34072,34073,34074];class h extends i["a"]{constructor(t,e={}){Object(s["b"])(t),super(t,Object.assign({},e,{target:34067})),this.initialize(e),Object.seal(this)}initialize(t={}){const{mipmaps:e=!0,parameters:r={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,e&&this.generateMipmap(t),this.setParameters(r)}),this}subImage({face:t,data:e,x:r=0,y:n=0,mipmapLevel:i=0}){return this._subImage({target:t,data:e,x:r,y:n,mipmapLevel:i})}async setCubeMapImageData({width:t,height:e,pixels:r,data:n,border:i=0,format:a=6408,type:o=5121}){const{gl:c}=this,h=r||n,l=await Promise.all(u.map(t=>{const e=h[t];return Promise.all(Array.isArray(e)?e:[e])}));this.bind(),u.forEach((r,n)=>{l[n].length>1&&!1!==this.opts.mipmaps&&s["i"].warn("".concat(this.id," has mipmap and multiple LODs."))(),l[n].forEach((n,s)=>{t&&e?c.texImage2D(r,s,a,t,e,i,a,o,n):c.texImage2D(r,s,a,a,o,n)})}),this.unbind()}setImageDataForFace(t){const{face:e,width:r,height:n,pixels:i,data:s,border:a=0,format:o=6408,type:c=5121}=t,{gl:u}=this,h=i||s;return this.bind(),h instanceof Promise?h.then(r=>this.setImageDataForFace(Object.assign({},t,{face:e,data:r,pixels:r}))):this.width||this.height?u.texImage2D(e,0,o,r,n,a,o,c,h):u.texImage2D(e,0,o,o,c,h),this}}h.FACES=u;r("b980");i["a"];function l(t,e){const{gl:r,width:i,height:s,id:a}=t,o=new n["a"](r,Object.assign({},e,{id:"framebuffer-for-".concat(a),width:i,height:s,attachments:{[36064]:t}}));return o}function f(t,e={}){const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:c=null,sourceWidth:u,sourceHeight:h,sourceType:l}=e;const{framebuffer:f,deleteFramebuffer:d}=g(t);Object(o["a"])(f);const{gl:m,handle:p,attachments:y}=f;u=u||f.width,h=h||f.height,36064===s&&null===p&&(s=1028),Object(o["a"])(y[s]),l=l||y[s].type,c=b(c,l,i,u,h),l=l||Object(a["b"])(c);const A=m.bindFramebuffer(36160,p);return m.readPixels(r,n,u,h,i,l,c),m.bindFramebuffer(36160,A||null),d&&f.delete(),c}function d(t,{sourceAttachment:e=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}={}){let n=f(t,{sourceAttachment:e}),{width:i,height:s}=t;while(s>r)({data:n,width:i,height:s}=Object(a["d"])({data:n,width:i,height:s}));Object(a["a"])({data:n,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const c=o.getContext("2d"),u=c.createImageData(i,s);return u.data.set(n),c.putImageData(u,0,0),o.toDataURL()}function g(t){return t instanceof n["a"]?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:l(t),deleteFramebuffer:!0}}function b(t,e,r,n,i){if(t)return t;e=e||5121;const s=Object(a["c"])(e,{clamped:!1}),o=c(r);return new s(n*i*o)}},a975:function(t,e,r){var n=r("ebb5"),i=r("b727").every,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("every",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0)}))},a981:function(t,e){t.exports="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof DataView},a9e3:function(t,e,r){var n=r("83ab"),i=r("da84"),s=r("94ca"),a=r("6eeb"),o=r("5135"),c=r("c6b6"),u=r("7156"),h=r("d9b5"),l=r("c04e"),f=r("d039"),d=r("7c73"),g=r("241c").f,b=r("06cf").f,m=r("9bf2").f,p=r("58a8").trim,y="Number",A=i[y],_=A.prototype,T=c(d(_))==y,E=function(t){if(h(t))throw TypeError("Cannot convert a Symbol value to a number");var e,r,n,i,s,a,o,c,u=l(t,"number");if("string"==typeof u&&u.length>2)if(u=p(u),e=u.charCodeAt(0),43===e||45===e){if(r=u.charCodeAt(2),88===r||120===r)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,i=49;break;case 79:case 111:n=8,i=55;break;default:return+u}for(s=u.slice(2),a=s.length,o=0;o<a;o++)if(c=s.charCodeAt(o),c<48||c>i)return NaN;return parseInt(s,n)}return+u};if(s(y,!A(" 0o1")||!A("0b1")||A("+0x1"))){for(var v,O=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof O&&(T?f((function(){_.valueOf.call(r)})):c(r)!=y)?u(new A(E(e)),r,O):E(e)},w=n?g(A):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),x=0;w.length>x;x++)o(A,v=w[x])&&!o(O,v)&&m(O,v,b(A,v));O.prototype=_,_.constructor=O,a(i,y,O)}},ace4:function(t,e,r){var n=r("23e7"),i=r("d039"),s=r("621a"),a=r("825a"),o=r("23cb"),c=r("50c4"),u=r("4840"),h=s.ArrayBuffer,l=s.DataView,f=h.prototype.slice,d=i((function(){return!new h(2).slice(1,void 0).byteLength}));n({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:d},{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(a(this),t);var r=a(this).byteLength,n=o(t,r),i=o(void 0===e?r:e,r),s=new(u(this,h))(c(i-n)),d=new l(this),g=new l(s),b=0;while(n<i)g.setUint8(b++,d.getUint8(n++));return s}})},addb:function(t,e){var r=Math.floor,n=function(t,e){var a=t.length,o=r(a/2);return a<8?i(t,e):s(n(t.slice(0,o),e),n(t.slice(o),e),e)},i=function(t,e){var r,n,i=t.length,s=1;while(s<i){n=s,r=t[s];while(n&&e(t[n-1],r)>0)t[n]=t[--n];n!==s++&&(t[n]=r)}return t},s=function(t,e,r){var n=t.length,i=e.length,s=0,a=0,o=[];while(s<n||a<i)s<n&&a<i?o.push(r(t[s],e[a])<=0?t[s++]:e[a++]):o.push(s<n?t[s++]:e[a++]);return o};t.exports=n},ae79:function(t,e,r){r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return s}));var n=r("0b1c");function i(t,e){if("string"!==typeof e)return e;const r=Number(e);if(!isNaN(r))return r;e=e.replace(/^.*\./,"");const i=t[e];return Object(n["a"])(void 0!==i,"Accessing undefined constant GL.".concat(e)),i}function s(t,e){e=Number(e);for(const r in t)if(t[r]===e)return"GL.".concat(r);return String(e)}},aed6:function(t,e,r){r.d(e,"a",(function(){return l}));var n=r("89e8"),i=r("19ac");class s{constructor(t,e){this.name=t,this.type=e,this.sampleSize=1,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=Object(i["a"])(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(Object(i["a"])()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class a{constructor({id:t,stats:e}){this.id=t,this.stats={},this._initializeStats(e),Object.seal(this)}get(t,e="count"){return this._getOrCreate({name:t,type:e})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const e in this.stats)t(this.stats[e])}getTable(){const t={};return this.forEach(e=>{t[e.name]={time:e.time||0,count:e.count||0,average:e.getAverageTime()||0,hz:e.getHz()||0}}),t}_initializeStats(t=[]){t.forEach(t=>this._getOrCreate(t))}_getOrCreate(t){if(!t||!t.name)return null;const{name:e,type:r}=t;return this.stats[e]||(this.stats[e]=t instanceof s?t:new s(e,r)),this.stats[e]}}var o=r("c526");const c="8.5.5",u="set luma.log.level=1 (or higher) to trace rendering";class h{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new a({id:t})),this.stats.get(t)}}const l=new h;if(o["global"].luma&&o["global"].luma.VERSION!==c)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(o["global"].luma.VERSION," vs ").concat(c));o["global"].luma||(Object(o["isBrowser"])()&&n["i"].log(1,"luma.gl ".concat(c," - ").concat(u))(),o["global"].luma=o["global"].luma||{VERSION:c,version:c,log:n["i"],stats:l,globals:{modules:{},nodeIO:{}}});o["global"].luma},b1cf:function(t,e,r){r.d(e,"a",(function(){return d}));var n=r("2fc2"),i=r("4f61"),s=r("07df"),a=r("89e8"),o=r("2c4f"),c=r("0b1c");const u=10,h={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},l={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:h},f={removedProps:h};class d extends n["a"]{constructor(t,e={}){super(t,e),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=e.target||(this.gl.webgl2?36662:34962),this.initialize(e),Object.seal(this)}getElementCount(t=this.accessor){return Math.round(this.byteLength/i["a"].getBytesPerElement(t))}getVertexCount(t=this.accessor){return Math.round(this.byteLength/i["a"].getBytesPerVertex(t))}initialize(t={}){return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=Object(o["a"])("Buffer",t,l),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=Object(o["a"])("Buffer",t,f),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new i["a"](t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:e,offset:r=0,srcOffset:n=0}=t,i=t.byteLength||t.length;Object(c["a"])(e);const s=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(s,this.handle),0!==n||void 0!==i?(Object(a["a"])(this.gl),this.gl.bufferSubData(this.target,r,e,n,i)):this.gl.bufferSubData(s,r,e),this.gl.bindBuffer(s,null),this.debugData=null,this._inferType(e),this}copyData({sourceBuffer:t,readOffset:e=0,writeOffset:r=0,size:n}){const{gl:i}=this;return Object(a["a"])(i),i.bindBuffer(36662,t.handle),i.bindBuffer(36663,this.handle),i.copyBufferSubData(36662,36663,e,r,n),i.bindBuffer(36662,null),i.bindBuffer(36663,null),this.debugData=null,this}getData({dstData:t=null,srcByteOffset:e=0,dstOffset:r=0,length:n=0}={}){Object(a["a"])(this.gl);const i=Object(s["c"])(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(e),u=r;let h,l;t?(l=t.length,h=l-u):(h=Math.min(o,n||o),l=u+h);const f=Math.min(o,h);return n=n||f,Object(c["a"])(n<=f),t=t||new i(l),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,e,t,r,n),this.gl.bindBuffer(36662,null),t}bind({target:t=this.target,index:e=this.accessor&&this.accessor.index,offset:r=0,size:n}={}){return 35345===t||35982===t?void 0!==n?this.gl.bindBufferRange(t,e,this.handle,r,n):(Object(c["a"])(0===r),this.gl.bindBufferBase(t,e,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind({target:t=this.target,index:e=this.accessor&&this.accessor.index}={}){const r=35345===t||35982===t;return r?this.gl.bindBufferBase(t,e,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(u,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t,e=0,r=t.byteLength+e){Object(c["a"])(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const n=this._getTarget();this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,this.usage),this.gl.bufferSubData(n,e,t),this.gl.bindBuffer(n,null),this.debugData=t.slice(0,u),this.bytesUsed=r,this._trackAllocatedMemory(r);const a=Object(s["b"])(t);return Object(c["a"])(a),this.setAccessor(new i["a"](this.accessor,{type:a})),this}_setByteLength(t,e=this.usage){Object(c["a"])(t>=0),this._trackDeallocatedMemory();let r=t;0===t&&(r=new Float32Array(0));const n=this._getTarget();return this.gl.bindBuffer(n,this.handle),this.gl.bufferData(n,r,e),this.gl.bindBuffer(n,null),this.usage=e,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const e=Object(s["c"])(this.accessor.type||5126,{clamped:!1}),r=t/e.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(t){this.accessor.type||this.setAccessor(new i["a"](this.accessor,{type:Object(s["b"])(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const e=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),e}get type(){return a["i"].deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return a["i"].deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return a["i"].deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return a["i"].deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new i["a"](this.accessor,t),this}}},b206:function(t,e,r){r.d(e,"a",(function(){return i}));var n=r("89e8");function i(t,e,r,i){const s="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),a=Object.getPrototypeOf(t);i.forEach(t=>{a.methodName||(a[t]=()=>{throw n["i"].removed("Calling removed method ".concat(e,".").concat(t,": "),s)(),new Error(t)})})}},b39a:function(t,e,r){var n=r("da84"),i=r("ebb5"),s=r("d039"),a=n.Int8Array,o=i.aTypedArray,c=i.exportTypedArrayMethod,u=[].toLocaleString,h=[].slice,l=!!a&&s((function(){u.call(new a(1))})),f=s((function(){return[1,2].toLocaleString()!=new a([1,2]).toLocaleString()}))||!s((function(){a.prototype.toLocaleString.call([1,2])}));c("toLocaleString",(function(){return u.apply(l?h.call(o(this)):o(this),arguments)}),f)},b4c9:function(t,e,r){r.d(e,"a",(function(){return s}));var n=r("d752"),i=r("7f94");const s={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function a(t){const e=new i["a"](t,{format:6408,type:5126,dataFormat:6408}),r=new n["a"](t,{id:"test-framebuffer",check:!1,attachments:{[36064]:e}}),s=r.getStatus();return e.delete(),r.delete(),36053===s}e["b"]={[s.WEBGL2]:[!1,!0],[s.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[s.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[s.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[s.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[s.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[s.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[s.FLOAT_BLEND]:["EXT_float_blend"],[s.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[s.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[s.TEXTURE_FLOAT]:["OES_texture_float",!0],[s.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[s.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[s.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[s.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[s.COLOR_ATTACHMENT_RGBA32F]:[a,"EXT_color_buffer_float"],[s.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[s.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[s.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[s.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[s.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[s.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]}},b52f:function(t,e,r){function n(t,e){if(!t)throw new Error("math.gl assertion "+e)}r.d(e,"a",(function(){return n}))},b6b7:function(t,e,r){var n=r("ebb5"),i=r("4840"),s=n.TYPED_ARRAY_CONSTRUCTOR,a=n.aTypedArrayConstructor;t.exports=function(t){return a(i(t,t[s]))}},b980:function(t,e,r){r.d(e,"b",(function(){return i})),r.d(e,"a",(function(){return s})),r.d(e,"c",(function(){return a})),r.d(e,"d",(function(){return o})),r.d(e,"e",(function(){return c}));var n=r("89e8");const i={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},s={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},a={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function o(t,e){const r=i[e];if(!r)return!1;if(void 0===r.gl1&&void 0===r.gl2)return!0;const s=Object(n["h"])(t)&&r.gl2||r.gl1;return"string"===typeof s?t.getExtension(s):s}function c(t,e){const r=i[e];switch(r&&r.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}},c1ac:function(t,e,r){var n=r("ebb5"),i=r("b727").filter,s=r("1448"),a=n.aTypedArray,o=n.exportTypedArrayMethod;o("filter",(function(t){var e=i(a(this),t,arguments.length>1?arguments[1]:void 0);return s(this,e)}))},ca91:function(t,e,r){var n=r("ebb5"),i=r("d58f").left,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("reduce",(function(t){return i(s(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}))},cd26:function(t,e,r){var n=r("ebb5"),i=n.aTypedArray,s=n.exportTypedArrayMethod,a=Math.floor;s("reverse",(function(){var t,e=this,r=i(e).length,n=a(r/2),s=0;while(s<n)t=e[s],e[s++]=e[--r],e[r]=t;return e}))},cf6e:function(t,e,r){r.d(e,"a",(function(){return i}));var n=r("a1e8");function i(t){const e={},r="Accessors for ".concat(t.id);for(const n of t.attributeInfos)if(n){const t=s(n);e["in ".concat(t)]={[r]:JSON.stringify(n.accessor)}}for(const n of t.varyingInfos)if(n){const t=s(n);e["out ".concat(t)]={[r]:JSON.stringify(n.accessor)}}return e}function s(t){const{type:e,size:r}=t.accessor,i=Object(n["b"])(e,r);return i?"".concat(i.name," ").concat(t.name):t.name}},cfc3:function(t,e,r){var n=r("74e8");n("Float32",(function(t){return function(e,r,n){return t(this,e,r,n)}}))},d139:function(t,e,r){var n=r("ebb5"),i=r("b727").find,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("find",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0)}))},d58f:function(t,e,r){var n=r("1c0b"),i=r("7b0b"),s=r("44ad"),a=r("50c4"),o=function(t){return function(e,r,o,c){n(r);var u=i(e),h=s(u),l=a(u.length),f=t?l-1:0,d=t?-1:1;if(o<2)while(1){if(f in h){c=h[f],f+=d;break}if(f+=d,t?f<0:l<=f)throw TypeError("Reduce of empty array with no initial value")}for(;t?f>=0:l>f;f+=d)f in h&&(c=r(c,h[f],f,u));return c}};t.exports={left:o(!1),right:o(!0)}},d5d6:function(t,e,r){var n=r("ebb5"),i=r("b727").forEach,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("forEach",(function(t){i(s(this),t,arguments.length>1?arguments[1]:void 0)}))},d752:function(t,e,r){r.d(e,"a",(function(){return d}));var n=r("89e8"),i=r("2fc2"),s=r("7f94"),a=r("9f85"),o=r("a511"),c=r("a7bc"),u=r("7779"),h=r("ae79"),l=r("0b1c");const f="Multiple render targets not supported";class d extends i["a"]{static isSupported(t,e={}){const{colorBufferFloat:r,colorBufferHalfFloat:n}=e;let i=!0;return r&&(i=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),n&&(i=i&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),i}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new d(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Object(n["a"])(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Object(n["a"])(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t,e={}){super(t,e),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(e),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize({width:t=1,height:e=1,attachments:r=null,color:n=!0,depth:i=!0,stencil:s=!1,check:a=!0,readBuffer:o,drawBuffers:c}){if(Object(l["a"])(t>=0&&e>=0,"Width and height need to be integers"),this.width=t,this.height=e,r)for(const u in r){const n=r[u],i=Array.isArray(n)?n[0]:n;i.resize({width:t,height:e})}else r=this._createDefaultAttachments(n,i,s,t,e);this.update({clearAttachments:!0,attachments:r,readBuffer:o,drawBuffers:c}),r&&a&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update({attachments:t={},readBuffer:e,drawBuffers:r,clearAttachments:n=!1,resizeAttachments:i=!0}){this.attach(t,{clearAttachments:n,resizeAttachments:i});const{gl:s}=this,a=s.bindFramebuffer(36160,this.handle);return e&&this._setReadBuffer(e),r&&this._setDrawBuffers(r),s.bindFramebuffer(36160,a||null),this}resize(t={}){let{width:e,height:r}=t;if(null===this.handle)return Object(l["a"])(void 0===e&&void 0===r),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;void 0===e&&(e=this.gl.drawingBufferWidth),void 0===r&&(r=this.gl.drawingBufferHeight),e!==this.width&&r!==this.height&&n["i"].log(2,"Resizing framebuffer ".concat(this.id," to ").concat(e,"x").concat(r))();for(const n in this.attachments)this.attachments[n].resize({width:e,height:r});return this.width=e,this.height=r,this}attach(t,{clearAttachments:e=!1,resizeAttachments:r=!0}={}){const n={};e&&Object.keys(this.attachments).forEach(t=>{n[t]=null}),Object.assign(n,t);const i=this.gl.bindFramebuffer(36160,this.handle);for(const s in n){Object(l["a"])(void 0!==s,"Misspelled framebuffer binding point?");const t=Number(s),e=n[t];let i=e;if(i)if(i instanceof a["a"])this._attachRenderbuffer({attachment:t,renderbuffer:i});else if(Array.isArray(e)){const[r,n=0,s=0]=e;i=r,this._attachTexture({attachment:t,texture:r,layer:n,level:s})}else this._attachTexture({attachment:t,texture:i,layer:0,level:0});else this._unattach(t);r&&i&&i.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,i||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(t=>!this.attachments[t]).forEach(t=>{delete this.attachments[t]})}checkStatus(){const{gl:t}=this,e=this.getStatus();if(36053!==e)throw new Error(b(e));return this}getStatus(){const{gl:t}=this,e=t.bindFramebuffer(36160,this.handle),r=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,e||null),r}clear(t={}){const{color:e,depth:r,stencil:n,drawBuffers:i=[]}=t,s=this.gl.bindFramebuffer(36160,this.handle);return(e||r||n)&&Object(o["a"])(this.gl,{color:e,depth:r,stencil:n}),i.forEach((t,e)=>{Object(o["b"])(this.gl,{drawBuffer:e,value:t})}),this.gl.bindFramebuffer(36160,s||null),this}readPixels(t={}){return n["i"].error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(t={}){return n["i"].error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(t={}){return n["i"].error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(t={}){return n["i"].error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(t={}){return n["i"].error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(t={}){return n["i"].error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate({attachments:t=[],x:e=0,y:r=0,width:i,height:s}){const a=Object(n["a"])(this.gl),o=a.bindFramebuffer(36008,this.handle),c=0===e&&0===r&&void 0===i&&void 0===s;return c?a.invalidateFramebuffer(36008,t):a.invalidateFramebuffer(36008,t,e,r,i,s),a.bindFramebuffer(36008,o),this}getAttachmentParameter(t,e,r){let n=this._getAttachmentParameterFallback(e);return null===n&&(this.gl.bindFramebuffer(36160,this.handle),n=this.gl.getFramebufferAttachmentParameter(36160,t,e),this.gl.bindFramebuffer(36160,null)),r&&n>1e3&&(n=Object(h["a"])(this.gl,n)),n}getAttachmentParameters(t=36064,e,r=this.constructor.ATTACHMENT_PARAMETERS||[]){const n={};for(const i of r){const r=e?Object(h["a"])(this.gl,i):i;n[r]=this.getAttachmentParameter(t,i,e)}return n}getParameters(t=!0){const e=Object.keys(this.attachments),r={};for(const n of e){const e=Number(n),i=t?Object(h["a"])(this.gl,e):e;r[i]=this.getAttachmentParameters(e,t)}return r}show(){return"undefined"!==typeof window&&window.open(Object(c["a"])(this),"luma-debug-texture"),this}log(t=0,e=""){if(t>n["i"].level||"undefined"===typeof window)return this;e=e||"Framebuffer ".concat(this.id);const r=Object(c["a"])(this,{targetMaxHeight:100});return n["i"].image({logLevel:t,message:e,image:r},e)(),this}bind({target:t=36160}={}){return this.gl.bindFramebuffer(t,this.handle),this}unbind({target:t=36160}={}){return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,e,r,n,i){let o=null;return t&&(o=o||{},o[36064]=new s["a"](this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:n,height:i,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(o[36064])),e&&r?(o=o||{},o[33306]=new a["a"](this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:n,height:111}),this.ownResources.push(o[33306])):e?(o=o||{},o[36096]=new a["a"](this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:n,height:i}),this.ownResources.push(o[36096])):r&&Object(l["a"])(!1),o}_unattach(t){const e=this.attachments[t];e&&(e instanceof a["a"]?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer({attachment:t=36064,renderbuffer:e}){const{gl:r}=this;r.framebufferRenderbuffer(36160,t,36161,e.handle),this.attachments[t]=e}_attachTexture({attachment:t=36064,texture:e,layer:r,level:i}){const{gl:s}=this;switch(s.bindTexture(e.target,e.handle),e.target){case 35866:case 32879:const a=Object(n["a"])(s);a.framebufferTextureLayer(36160,t,e.target,i,r);break;case 34067:const o=g(r);s.framebufferTexture2D(36160,t,o,e.handle,i);break;case 3553:s.framebufferTexture2D(36160,t,3553,e.handle,i);break;default:Object(l["a"])(!1,"Illegal texture type")}s.bindTexture(e.target,null),this.attachments[t]=e}_setReadBuffer(t){const e=Object(n["e"])(this.gl);e?e.readBuffer(t):Object(l["a"])(36064===t||1029===t,f),this.readBuffer=t}_setDrawBuffers(t){const{gl:e}=this,r=Object(n["a"])(e);if(r)r.drawBuffers(t);else{const r=e.getExtension("WEBGL_draw_buffers");r?r.drawBuffersWEBGL(t):Object(l["a"])(1===t.length&&(36064===t[0]||1029===t[0]),f)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const e=Object(u["a"])(this.gl);switch(t){case 36052:return e.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return e.WEBGL2?null:8;case 33297:return e.WEBGL2?null:5125;case 33296:return e.WEBGL2||e.EXT_sRGB?null:9729;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function g(t){return t<34069?t+34069:t}function b(t){const e=d.STATUS||{};return e[t]||"Framebuffer error ".concat(t)}const m=[36049,36048,33296,33298,33299,33300,33301,33302,33303];d.ATTACHMENT_PARAMETERS=m},d81d:function(t,e,r){var n=r("23e7"),i=r("b727").map,s=r("1dde"),a=s("map");n({target:"Array",proto:!0,forced:!a},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},d998:function(t,e,r){var n=r("342f");t.exports=/MSIE|Trident/.test(n)},dfb9:function(t,e){t.exports=function(t,e){var r=0,n=e.length,i=new t(n);while(n>r)i[r]=e[r++];return i}},e58c:function(t,e,r){var n=r("fc6a"),i=r("a691"),s=r("50c4"),a=r("a640"),o=Math.min,c=[].lastIndexOf,u=!!c&&1/[1].lastIndexOf(1,-0)<0,h=a("lastIndexOf"),l=u||!h;t.exports=l?function(t){if(u)return c.apply(this,arguments)||0;var e=n(this),r=s(e.length),a=r-1;for(arguments.length>1&&(a=o(a,i(arguments[1]))),a<0&&(a=r+a);a>=0;a--)if(a in e&&e[a]===t)return a||0;return-1}:c},e91f:function(t,e,r){var n=r("ebb5"),i=r("4d64").indexOf,s=n.aTypedArray,a=n.exportTypedArrayMethod;a("indexOf",(function(t){return i(s(this),t,arguments.length>1?arguments[1]:void 0)}))},ebb5:function(t,e,r){var n,i,s,a=r("a981"),o=r("83ab"),c=r("da84"),u=r("861d"),h=r("5135"),l=r("f5df"),f=r("9112"),d=r("6eeb"),g=r("9bf2").f,b=r("e163"),m=r("d2bb"),p=r("b622"),y=r("90e3"),A=c.Int8Array,_=A&&A.prototype,T=c.Uint8ClampedArray,E=T&&T.prototype,v=A&&b(A),O=_&&b(_),w=Object.prototype,x=w.isPrototypeOf,I=p("toStringTag"),L=y("TYPED_ARRAY_TAG"),R=y("TYPED_ARRAY_CONSTRUCTOR"),S=a&&!!m&&"Opera"!==l(c.opera),P=!1,N={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},j={BigInt64Array:8,BigUint64Array:8},B=function(t){if(!u(t))return!1;var e=l(t);return"DataView"===e||h(N,e)||h(j,e)},F=function(t){if(!u(t))return!1;var e=l(t);return h(N,e)||h(j,e)},M=function(t){if(F(t))return t;throw TypeError("Target is not a typed array")},C=function(t){if(m&&!x.call(v,t))throw TypeError("Target is not a typed array constructor");return t},D=function(t,e,r){if(o){if(r)for(var n in N){var i=c[n];if(i&&h(i.prototype,t))try{delete i.prototype[t]}catch(s){}}O[t]&&!r||d(O,t,r?e:S&&_[t]||e)}},U=function(t,e,r){var n,i;if(o){if(m){if(r)for(n in N)if(i=c[n],i&&h(i,t))try{delete i[t]}catch(s){}if(v[t]&&!r)return;try{return d(v,t,r?e:S&&v[t]||e)}catch(s){}}for(n in N)i=c[n],!i||i[t]&&!r||d(i,t,e)}};for(n in N)i=c[n],s=i&&i.prototype,s?f(s,R,i):S=!1;for(n in j)i=c[n],s=i&&i.prototype,s&&f(s,R,i);if((!S||"function"!=typeof v||v===Function.prototype)&&(v=function(){throw TypeError("Incorrect invocation")},S))for(n in N)c[n]&&m(c[n],v);if((!S||!O||O===w)&&(O=v.prototype,S))for(n in N)c[n]&&m(c[n].prototype,O);if(S&&b(E)!==O&&m(E,O),o&&!h(O,I))for(n in P=!0,g(O,I,{get:function(){return u(this)?this[L]:void 0}}),N)c[n]&&f(c[n],L,n);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:S,TYPED_ARRAY_CONSTRUCTOR:R,TYPED_ARRAY_TAG:P&&L,aTypedArray:M,aTypedArrayConstructor:C,exportTypedArrayMethod:D,exportTypedArrayStaticMethod:U,isView:B,isTypedArray:F,TypedArray:v,TypedArrayPrototype:O}},f87d:function(t,e,r){r.d(e,"a",(function(){return s})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return c}));var n=r("6b74");function i(t,e){if(t.length!==e)return!1;for(let r=0;r<t.length;++r)if(!Number.isFinite(t[r]))return!1;return!0}function s(t){if(!Number.isFinite(t))throw new Error("Invalid number "+t);return t}function a(t,e,r=""){if(n["a"].debug&&!i(t,e))throw new Error(`math.gl: ${r} some fields set to invalid numbers'`);return t}const o={};function c(t,e){o[t]||(o[t]=!0,console.warn(`${t} has been removed in version ${e}, see upgrade guide for more information`))}},f8cd:function(t,e,r){var n=r("a691");t.exports=function(t){var e=n(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}}}]);